var Ef=(()=>{var O=(t,i)=>()=>(i||t((i={NY:{}}).NY,i),i.NY);var P=O((_w,hn)=>{hn.NY=hn.Df||(hn.Df={proxy:null,backend:{hostname:"www.haxball.com",hostnameWs:"p2p.haxball.com",secure:!0},qi:null,Ls:9,noVariableValueChangeEvent:!1,noWebRTC:!1,fixNames:!0,yn:null,stunServers:[{urls:"stun:stun.l.google.com:19302"}],backendUrl:"wss://www.haxball.com/",httpUrl:"https://p2p.haxball.com/rs/",setTimeout:null,clearTimeout:null,setInterval:null,clearInterval:null,console:null,requestAnimationFrame:null,cancelAnimationFrame:null,crypto:null,WebSocket:null,XMLHttpRequest:null,performance:null,JSON5:null,pako:null,RTCPeerConnection:null,RTCIceCandidate:null,RTCSessionDescription:null,E:(t,i,n)=>{var r=new t,e=Object.keys(r),s=Object.keys(r.__proto__),u=e.concat(s);i.forEach((h,l)=>{if(!(!h||u.includes(h))){var o=e[l];o&&(u.push(h),Object.defineProperty(t.prototype,h,{get:function(){return this[o]},set:function(v){this[o]=v}}))}}),n.forEach((h,l)=>{if(!(!h||u.includes(h))){var o=s[l];o&&(u.push(h),t.prototype[h]=t.prototype[o])}})}})});var Ue=O((Iw,Fe)=>{var _=P();Fe.NY=(t,i)=>{var{setTimeout:n,clearTimeout:r,setInterval:e,clearInterval:s,console:u,requestAnimationFrame:h,cancelAnimationFrame:l,crypto:o,WebSocket:v,XMLHttpRequest:y,performance:C,JSON5:k,pako:f}=t,p=i?.backend;p&&(p.hostname!=null&&(_.backend.hostname=p.hostname),p.hostnameWs!=null&&(_.backend.hostnameWs=p.hostnameWs),p.secure!=null&&(_.backend.secure=p.secure)),p=i?.proxy,p&&(_.proxy={},p.HttpUrl!=null&&(_.proxy.HttpUrl=p.HttpUrl),p.WebSocketUrl!=null&&(_.proxy.WebSocketUrl=p.WebSocketUrl),p.WebSocketChangeOriginAllowed!=null&&(_.proxy.WebSocketChangeOriginAllowed=p.WebSocketChangeOriginAllowed)),i?.version!=null&&(_.Ls=i.version),_.backendUrl=(_.backend.secure?"wss":"ws")+"://"+_.backend.hostnameWs+"/",_.httpUrl=i?.proxy?.HttpUrl||(_.backend.secure?"https":"http")+"://"+_.backend.hostname+"/rs/",i?.stunServer!=null&&(_.stunServers=[{urls:i.stunServer}]),i?.noWebRTC!=null&&(_.noWebRTC=i.noWebRTC),i?.fixNames!=null&&(_.fixNames=i.fixNames),_.setTimeout=n,_.clearTimeout=r,_.setInterval=e,_.clearInterval=s,_.console=u,_.requestAnimationFrame=h,_.cancelAnimationFrame=l,_.crypto=o,_.WebSocket=v,_.XMLHttpRequest=y,_.performance=C,_.JSON5=k,_.pako=f,_.qi=i?.proxyAgent,_.yn=i?.identityToken,String.fromCodePoint||(String.fromCodePoint=M=>M<65536?String.fromCharCode(M):String.fromCharCode((M>>10)+55232)+String.fromCharCode((M&1023)+56320)),ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(M,b){var tt=new Uint8Array(this,M,b==null?null:b-M),ft=new Uint8Array(tt.byteLength);return ft.set(tt),ft.buffer});var q=t.webkitRTCPeerConnection||t.mozRTCPeerConnection||t.RTCPeerConnection,w=t.webkitRTCIceCandidate||t.mozRTCIceCandidate||t.RTCIceCandidate,g=t.webkitRTCSessionDescription||t.mozRTCSessionDescription||t.RTCSessionDescription;if(!_.noWebRTC){var N=new q({iceServers:[]});try{N.createAnswer().catch(function(M){N.close()})}catch{var S=S.RTCPeerConnection.prototype,R=S.createOffer,E=S.createAnswer;S.createOffer=function(b){var tt=this;return new Promise(function(ft,W){R.call(tt,ft,W,b)})},S.createAnswer=function(b){var tt=this;return new Promise(function(ft,W){E.call(tt,ft,W,b)})}}}_.RTCPeerConnection=q,_.RTCIceCandidate=w,_.RTCSessionDescription=g}});var Ye=O((Bw,fn)=>{function He(t,{x:i,y:n},r){return t.s?.c.C.findIndex(e=>{var s=e.e.x-i,u=e.e.y-n;return s*s+u*u<=r*r})}function Ke(t,{x:i,y:n},r){return t.s?.c.O.findIndex(e=>{var s,u,h,l,o,v,y;if(0*e.dt==0){if(u=i-e.He.x,h=n-e.He.y,(e.Or.x*u+e.Or.y*h>0&&e.Rr.x*u+e.Rr.y*h>0)==e.dt<=0)return!1;s=Math.sqrt(u*u+h*h)-e.Fs}else{if(l=e.Z.e,o=e.z.e,u=o.x-l.x,h=o.y-l.y,v=i-o.x,y=n-o.y,(i-l.x)*u+(n-l.y)*h<=0||v*u+y*h>=0)return!1;s=e.b.x*v+e.b.y*y}return Math.abs(s)<r})}function Je(t,{x:i,y:n},r){return t.S.Pt.findIndex(e=>{var s=e.ni,u=e.ri,h=u.x-s.x,l=u.y-s.y,o=i-u.x,v=n-u.y;if((i-s.x)*h+(n-s.y)*l<=0||o*h+v*l>=0)return!1;var y=Math.sqrt(l*l+h*h);return Math.abs(o*l/y-v*h/y)<r})}function We(t,{x:i,y:n},r){return t.s?.c.Q.findIndex(e=>Math.abs(e.st-(e.b.x*i+e.b.y*n))<r)}function Qe(t,{x:i,y:n},r){var e=t.s?.c;if(!e)return-1;var s=e.p;return e.yt.findIndex(u=>{var h=s[u.$t];if(!h)return!1;var l=s[u.Zt];if(!l)return!1;var o=h.e,v=l.e,y=v.x-o.x,C=v.y-o.y,k=i-v.x,f=n-v.y;if((i-o.x)*y+(n-o.y)*C<=0||k*y+f*C>=0)return!1;var p=Math.sqrt(C*C+y*y);return Math.abs(k*C/p-f*y/p)<r})}function Xe(t,{x:i,y:n}){return t.s?.c.p.findIndex(r=>{var e=r.e.x-i,s=r.e.y-n;return e*e+s*s<=r.B*r.B})}function af(t,{x:i,y:n},r){r||(r=t.s?.S.Pi.B);var e=r*r,s=t.s?.S.Dt.findIndex(u=>{var h=u.x-i,l=u.y-n;return h*h+l*l<=e});return s>=0?[s,1]:(s=t.s?.S.at.findIndex(u=>{var h=u.x-i,l=u.y-n;return h*h+l*l<=e}),s>=0?[s,2]:[-1,-1])}function to(t,i,n){return t.s?.c.C[He(t,i,n)]}function io(t,i,n){return t.s?.c.O[Ke(t,i,n)]}function no(t,i,n){return t.S.Pt[Je(t,i,n)]}function ro(t,i,n){return t.s?.c.Q[We(t,i,n)]}function eo(t,i,n){return t.s?.c.yt[Qe(t,i,n)]}function so(t,i){return t.s?.c.p[Xe(t,i)]}fn.NY=fn.af||(fn.af={getVertexIndexAtMapCoord:He,getVertexAtMapCoord:to,getSegmentIndexAtMapCoord:Ke,getSegmentAtMapCoord:io,getGoalIndexAtMapCoord:Je,getGoalAtMapCoord:no,getPlaneIndexAtMapCoord:We,getPlaneAtMapCoord:ro,getJointIndexAtMapCoord:Qe,getJointAtMapCoord:eo,getDiscIndexAtMapCoord:Xe,getDiscAtMapCoord:so,getSpawnPointIndexAtMapCoord:af})});var Ci=O((Gw,on)=>{var Cr=null,ln=[];function uo(t){t&&ln.push(t)}function ho(t){if(t){var i=ln.indexOf(t);i<0||ln.splice(i,1)}}function Hi(t,i=null){this.abbr=t,this.api={errors:{}},this.defineMetadata(i)}Object.defineProperty(Hi,"current",{get:function(){return Cr},set:function(t){Cr=t,ln.forEach(i=>{i._onLanguageChange?.(t?.abbr)})}});Hi.prototype.defineMetadata=function(t){};Hi.resolveText=function(t,i){if(t){for(var n=/\$([\d]+)\?\("([^"]*)":"([^"]*)"\)/gm,r=/\$([\d]+)/gm,e,s="",u=0;(e=n.exec(t))!=null;)s+=t.substring(u,e.index)+(i[e[1]-1]?e[2]:e[3]),u=e.index+e[0].length;for(s+=t.substring(u),t="",u=0;(e=r.exec(s))!=null;)t+=s.substring(u,e.index)+i[e[1]-1],u=e.index+e[0].length;return t+=s.substring(u),t}};on.NY=on.to||(on.to={Language:Hi,addRoomToList:uo,removeRoomFromList:ho,nh:(t,i)=>Hi.resolveText(Cr?.api?.errors?.[t],i||[])})});var Y=O((Vw,cn)=>{cn.NY=cn.io||(cn.io={Empty:0,ConnectionClosed:1,GameStateTimeout:2,RoomClosed:3,RoomFull:4,WrongPassword:5,BannedBefore:6,IncompatibleVersion:7,FailedHost:8,Unknown:9,Cancelled:10,FailedPeer:11,KickedNow:12,Failed:13,MasterConnectionError:14,StadiumParseError:15,StadiumParseSyntaxError:16,StadiumParseUnknownError:17,ObjectCastError:18,TeamColorsReadError:19,UTF8CharacterDecodeError:20,ReadTooMuchError:21,ReadWrongStringLengthError:22,EncodeUTF8CharNegativeError:23,EncodeUTF8CharTooLargeError:24,CalculateLengthOfUTF8CharNegativeError:25,CalculateLengthOfUTF8CharTooLargeError:26,BufferResizeParameterTooSmallError:27,BadColorError:28,BadTeamError:29,StadiumLimitsExceededError:30,MissingActionConfigError:31,UnregisteredActionError:32,MissingImplementationError:33,AnnouncementActionMessageTooLongError:34,ChatActionMessageTooLongError:35,KickBanReasonTooLongError:36,ChangeTeamColorsInvalidTeamIdError:37,MissingRecaptchaCallbackError:38,ReplayFileVersionMismatchError:39,ReplayFileReadError:40,JoinRoomNullIdAuthError:41,PlayerNameTooLongError:42,PlayerCountryTooLongError:43,PlayerAvatarTooLongError:44,PlayerJoinBlockedByMPDError:45,PlayerJoinBlockedByORError:46,PluginNotFoundError:47,PluginNameChangeNotAllowedError:48,LibraryNotFoundError:49,LibraryNameChangeNotAllowedError:50,AuthFromKeyInvalidIdFormatError:51,BadActorError:55,AuthBannedError:56,NoProxyIdentityProblem:57,NoProxyIdentitySolution:58})});var $=O((Lw,vn)=>{var{E:$e}=P(),lt=Y(),{nh:fo}=Ci();function pn(){this.code=lt.Empty,this.params=null}pn.prototype={toString:function(){return fo(this.code,this.params)}};function ct(t,...i){var n=new pn;return n.code=t,n.params=i,n}function oo(t){this.Us=t}function Ze(t){this.Et=t}function wn(t){this.zt=t,Error.captureStackTrace?.(this,wn)}wn.prototype=Error.prototype;Object.defineProperty(wn.prototype,"message",{get:function(){return String(this.zt)}});function lo(t){switch(t){case 4001:return ct(lt.RoomClosed);case 4100:return ct(lt.RoomFull);case 4101:return ct(lt.WrongPassword);case 4102:return ct(lt.BannedBefore);case 4103:return ct(lt.IncompatibleVersion)}return ct(lt.ConnectionClosed,t)}var co={Error:()=>[ct(lt.MasterConnectionError),ct(lt.MasterConnectionError)],no:()=>[ct(lt.FailedHost),ct(lt.Failed)],ro:()=>[ct(lt.Cancelled),ct(lt.Empty)],eo:t=>[lo(t)]};$e(pn,["code","params"],[]);$e(Ze,["version"],[]);vn.NY=vn.so||(vn.so={Ht:ct,HBError:pn,Ke:oo,uo:Ze,q:wn,At:co})});var gi=O((Fw,yn)=>{yn.NY=yn.ho||(yn.ho={RoomConfig:0,Plugin:1,Renderer:2,Library:3})});var ze=O((Uw,qn)=>{qn.NY=qn.allowFlags||(qn.allowFlags={JoinRoom:1,CreateRoom:2})});var xe=O((Hw,Cn)=>{Cn.NY=Cn.fo||(Cn.fo={None:0,Grass:1,Hockey:2})});var gr=O((Kw,gn)=>{gn.NY=gn.oo||(gn.oo={Player:0,IP:1,Auth:2})});var be=O((Jw,mn)=>{mn.NY=mn.Vi||(mn.Vi={None:0,Player:1})});var De=O((Ww,kn)=>{kn.NY=kn.lo||(kn.lo={ball:0,red:1,blue:2,redKO:3,blueKO:4,wall:5,kick:6,score:7,free1:8,free2:9,free3:10,free4:11,free5:12,free6:13,free7:14,free8:15,free9:16,free10:17,free11:18,free12:19,free13:20,free14:21,free15:22,free16:23,free17:24,free18:25,free19:26,free20:27,c0:28,c1:29,c2:30,c3:31})});var ae=O((Qw,Nn)=>{Nn.NY=Nn.co||(Nn.co={ConnectingToMaster:0,ConnectingToPeer:1,AwaitingState:2,Active:3,ConnectionFailed:4})});var ts=O((Xw,Sn)=>{Sn.NY=Sn.vo||(Sn.vo={Backward:-1,Still:0,Forward:1})});var is=O((Yw,Tn)=>{Tn.NY=Tn.po||(Tn.po={BeforeKickOff:0,Playing:1,AfterGoal:2,Ending:3})});var F=O(($w,On)=>{On.NY=On.wo||(On.wo={SendAnnouncement:0,SendChatIndicator:1,CheckConsistency:2,SendInput:3,SendChat:4,JoinRoom:5,KickBanPlayer:6,StartGame:7,StopGame:8,PauseResumeGame:9,SetGamePlayLimit:10,SetStadium:11,SetPlayerTeam:12,SetTeamsLock:13,SetPlayerAdmin:14,AutoTeams:15,SetPlayerSync:16,Ping:17,SetAvatar:18,SetTeamColors:19,ReorderPlayers:20,SetKickRateLimit:21,SetHeadlessAvatar:22,SetDiscProperties:23,CustomEvent:24,BinaryCustomEvent:25,SetPlayerIdentity:26})});var ns=O((Zw,Rn)=>{Rn.NY=Rn.yo||(Rn.yo={None:0,GK:1,SW:2,WBL:3,DL:4,DC:5,DR:6,WBR:7,DML:8,DMC:9,DMR:10,ML:11,MC:12,MR:13,AML:14,AMC:15,AMR:16,FL:17,FC:18,FR:19,ST:20})});var mr=O((zw,Pn)=>{Pn.NY=Pn.qo||(Pn.qo={Void:0,Boolean:1,Integer:2,Number:3,String:4,Color:5,CollisionFlags:6,Coordinate:7,Team:8,TeamWithSpec:9,BgType:10,CameraFollow:11,KickOffReset:12,Flag:13,File:14,PlayerId:15,Keys:16,Progress:17,PlayerPositionInGame:18})});var rs=O((xw,An)=>{An.NY=An.Co||(An.Co={AddonType:gi(),AllowFlags:ze(),BackgroundType:xe(),BanEntryType:gr(),CameraFollow:be(),CollisionFlags:De(),ConnectionState:ae(),Direction:ts(),ErrorCodes:Y(),GamePlayState:is(),OperationType:F(),PlayerPositionInGame:ns(),VariableType:mr()})});var j=O((bw,Mn)=>{var{setTimeout:us,clearTimeout:es,performance:kr}=P(),bt=Y(),{Ht:Dt,q:St}=$();function hs(t,i){var n=t.charCodeAt(i);if(!isNaN(n))return n}function dn(){}dn.substr=function(t,i,n){if(n==null)n=t.length;else if(0>n)if(i==0)n=t.length+n;else return"";return t.substr(i,n)};dn.remove=function(t,i){var n=t.indexOf(i);return n==-1?!1:(t.splice(n,1),!0)};function Ki(t,i){i==null&&(i=!1),this.v=t,this.jt=i,this.l=0}Ki.go=function(t,i){var n=t.getUint8(i),r,e,s,u,h,l=i;if(!(n&128))++i;else if((n&224)==192)r=t.getUint8(i+1),n=(n&31)<<6|r&63,i+=2;else if((n&240)==224)r=t.getUint8(i+1),e=t.getUint8(i+2),n=(n&15)<<12|(r&63)<<6|e&63,i+=3;else if((n&248)==240)r=t.getUint8(i+1),e=t.getUint8(i+2),s=t.getUint8(i+3),n=(n&7)<<18|(r&63)<<12|(e&63)<<6|s&63,i+=4;else if((n&252)==248)r=t.getUint8(i+1),e=t.getUint8(i+2),s=t.getUint8(i+3),u=t.getUint8(i+4),n=(n&3)<<24|(r&63)<<18|(e&63)<<12|(s&63)<<6|u&63,i+=5;else if((n&254)==252)r=t.getUint8(i+1),e=t.getUint8(i+2),s=t.getUint8(i+3),u=t.getUint8(i+4),h=t.getUint8(i+5),n=(n&1)<<30|(r&63)<<24|(e&63)<<18|(s&63)<<12|(u&63)<<6|h&63,i+=6;else throw new St(Dt(bt.UTF8CharacterDecodeError,i,n));return{char:n,length:i-l}};Ki.prototype={Lt:function(t){if(t==null&&(t=this.v.byteLength-this.l),this.l+t>this.v.byteLength)throw new St(Dt(bt.ReadTooMuchError));var i=new Uint8Array(this.v.buffer,this.v.byteOffset+this.l,t);return this.l+=t,i},rh:function(t){var i=this.Lt(t);return t=new ArrayBuffer(t),new Uint8Array(t).set(i),t},Pr:function(){return this.v.getInt8(this.l++)},T:function(){return this.v.getUint8(this.l++)},Hs:function(){var t=this.v.getInt16(this.l,this.jt);return this.l+=2,t},At:function(){var t=this.v.getUint16(this.l,this.jt);return this.l+=2,t},M:function(){var t=this.v.getInt32(this.l,this.jt);return this.l+=4,t},ut:function(){var t=this.v.getUint32(this.l,this.jt);return this.l+=4,t},Ks:function(){var t=this.v.getFloat32(this.l,this.jt);return this.l+=4,t},m:function(){var t=this.v.getFloat64(this.l,this.jt);return this.l+=8,t},Kt:function(){for(var t=this.l,i=0,n,r=0;n=this.v.getUint8(t+i),5>i&&(r|=(n&127)<<7*i>>>0),++i,(n&128)!=0;);return this.l+=i,r|0},bn:function(t){var i=this.l,n,r="";for(t=i+t;i<t;)n=Ki.go(this.v,i),i+=n.length,r+=String.fromCodePoint(n.char);if(i!=t)throw new St(Dt(bt.ReadWrongStringLengthError,i-t));return this.l=i,r},ei:function(){var t=this.Kt();return 0>=t?null:this.bn(t-1)},li:function(){return this.bn(this.Kt())},eh:function(){return this.bn(this.T())},Ar:function(){var t=this.li();return JSON.parse(t)}};function et(t,i){i==null&&(i=!1),this.v=t,this.jt=i,this.l=0}et.L=function(t,i){return i==null&&(i=!1),t==null&&(t=16),new et(new DataView(new ArrayBuffer(t)),i)};et.mo=function(t,i,n){var r=n;if(0>t)throw new St(Dt(bt.EncodeUTF8CharNegativeError,t));if(128>t)i.setUint8(n,t&127),++n;else if(2048>t)i.setUint8(n,t>>6&31|192),i.setUint8(n+1,t&63|128),n+=2;else if(65536>t)i.setUint8(n,t>>12&15|224),i.setUint8(n+1,t>>6&63|128),i.setUint8(n+2,t&63|128),n+=3;else if(2097152>t)i.setUint8(n,t>>18&7|240),i.setUint8(n+1,t>>12&63|128),i.setUint8(n+2,t>>6&63|128),i.setUint8(n+3,t&63|128),n+=4;else if(67108864>t)i.setUint8(n,t>>24&3|248),i.setUint8(n+1,t>>18&63|128),i.setUint8(n+2,t>>12&63|128),i.setUint8(n+3,t>>6&63|128),i.setUint8(n+4,t&63|128),n+=5;else if(-2147483648>t)i.setUint8(n,t>>30&1|252),i.setUint8(n+1,t>>24&63|128),i.setUint8(n+2,t>>18&63|128),i.setUint8(n+3,t>>12&63|128),i.setUint8(n+4,t>>6&63|128),i.setUint8(n+5,t&63|128),n+=6;else throw new St(Dt(bt.EncodeUTF8CharTooLargeError,t));return n-r};et.ko=function(t){if(0>t)throw new St(Dt(bt.CalculateLengthOfUTF8CharNegativeError,t));if(128>t)return 1;if(2048>t)return 2;if(65536>t)return 3;if(2097152>t)return 4;if(67108864>t)return 5;if(-2147483648>t)return 6;throw new St(Dt(bt.CalculateLengthOfUTF8CharTooLargeError,t))};et.Je=function(t){for(var i=0,n=t.length,r=0;r<n;)i+=et.ko(hs(t,r++));return i};et.No=function(t){return t>>>=0,128>t?1:16384>t?2:2097152>t?3:268435456>t?4:5};et.prototype={We:function(){var t=new ArrayBuffer(this.l),i=new Uint8Array(this.v.buffer,this.v.byteOffset,this.l);return new Uint8Array(t).set(i),t},_t:function(){return new Uint8Array(this.v.buffer,this.v.byteOffset,this.l)},jn:function(){return new DataView(this.v.buffer,this.v.byteOffset,this.l)},So:function(){return new Ki(this.jn(),this.jt)},Li:function(t){this.v.byteLength<t&&this.To(2*this.v.byteLength>=t?2*this.v.byteLength:t)},To:function(t){if(1>t)throw new St(Dt(bt.BufferResizeParameterTooSmallError));if(this.v.byteLength<t){var i=new Uint8Array(this.v.buffer);t=new ArrayBuffer(t),new Uint8Array(t).set(i),this.v=new DataView(t)}},o:function(t){var i=this.l++;this.Li(this.l),this.v.setUint8(i,t)},Js:function(t){var i=this.l;this.l+=2,this.Li(this.l),this.v.setInt16(i,t,this.jt)},Ft:function(t){var i=this.l;this.l+=2,this.Li(this.l),this.v.setUint16(i,t,this.jt)},G:function(t){var i=this.l;this.l+=4,this.Li(this.l),this.v.setInt32(i,t,this.jt)},kt:function(t){var i=this.l;this.l+=4,this.Li(this.l),this.v.setUint32(i,t,this.jt)},Ws:function(t){var i=this.l;this.l+=4,this.Li(this.l),this.v.setFloat32(i,t,this.jt)},g:function(t){var i=this.l;this.l+=8,this.Li(this.l),this.v.setFloat64(i,t,this.jt)},Yt:function(t){var i=this.l;this.l+=t.byteLength,this.Li(this.l),new Uint8Array(this.v.buffer,this.v.byteOffset,this.v.byteLength).set(t,i)},Qe:function(t){this.Yt(new Uint8Array(t))},ci:function(t){this.Ut(et.Je(t)),this.Mr(t)},si:function(t){t==null?this.Ut(0):(this.Ut(et.Je(t)+1),this.Mr(t))},sh:function(t){var i=et.Je(t);if(255<i)throw new St(null);this.o(i),this.Mr(t)},Xe:function(t){this.ci(JSON.stringify(t))},Mr:function(t){var i=this.l;this.Li(i+et.Je(t));for(var n=t.length,r=0;r<n;)i+=et.mo(hs(t,r++),this.v,i);this.l=i},Ut:function(t){var i=this.l;t>>>=0,this.Li(i+et.No(t)),this.v.setUint8(i,t|128),128<=t?(this.v.setUint8(i+1,t>>7|128),16384<=t?(this.v.setUint8(i+2,t>>14|128),2097152<=t?(this.v.setUint8(i+3,t>>21|128),268435456<=t?(this.v.setUint8(i+4,t>>28&127),t=5):(this.v.setUint8(i+3,this.v.getUint8(i+3)&127),t=4)):(this.v.setUint8(i+2,this.v.getUint8(i+2)&127),t=3)):(this.v.setUint8(i+1,this.v.getUint8(i+1)&127),t=2)):(this.v.setUint8(i,this.v.getUint8(i)&127),t=1),this.l+=t}};function fs(t){this.Oo=t,this.Jt=[]}fs.prototype={add:function(t){for(var i=this.Jt.length,n=0,r=this.Ye=0;r<i;){var e=r++,s=this.Jt[e];s.index++,s.weight*=.97,this.Jt[n].index<s.index&&(n=e),this.Ye+=s.weight}for(i>=this.Oo?(i=this.Jt[n],this.Ye-=i.weight,this.Jt.splice(n,1)):i={},i.value=t,i.weight=1,i.index=0,this.Ye+=i.weight,t=0;t<this.Jt.length&&this.Jt[t].value<=i.value;)++t;this.Jt.splice(t,0,i)},$e:function(t){if(this.Jt.length==0)return 0;if(this.Jt.length==1)return this.Jt[0].value;t*=this.Ye;for(var i=this.Jt[0].weight,n=0;n<this.Jt.length-1&&!(i>=t);)++n,i+=this.Jt[n].weight;return this.Jt[n].value},max:function(){return this.Jt.length==0?0:this.Jt[this.Jt.length-1].value}};function os(t,i){this.uh=t,this.Qs=i,this._n=t,this.Ze=kr.now()}os.prototype={hh:function(t){return t==null&&(t=1),this.ct(),t<=this._n?(this._n-=t,!0):!1},Ro:function(t){return this.ct(),t-=this._n,0>=t?0:this.Ze+t*this.Qs-kr.now()},Nv:function(t,i){var n=this.Ro(t);this._n-=t,us(i,n|0)},ct:function(){var t=kr.now(),i=Math.floor((t-this.Ze)/this.Qs);this.Ze+=i*this.Qs,this._n+=i,this._n>=this.uh&&(this._n=this.uh,this.Ze=t)}};var ss={};Mn.NY=Mn.Po||(Mn.Po={D:dn,F:Ki,w:et,Ao:fs,kt:os,Integer:ss,fh:(t,i)=>{var n=i!=null;if(n){switch(i){case Array:n=t instanceof Array;break;case Boolean:n=typeof t=="boolean";break;case Number:n=typeof t=="number";break;case ss:n=typeof t=="number"&&(t|0)===t;break;case String:n=typeof t=="string";break;default:n=!1}if(n)return t}throw new St(Dt(bt.ObjectCastError,JSON.stringify(t),JSON.stringify(i)))},oh:(t,i)=>new Promise((n,r)=>{var e=us(()=>{r("Timed out")},i);t.then(s=>{es(e),n(s)},s=>{es(e),r(s)})}),In:(t,i)=>t.length<=i?t:dn.substr(t,0,i),extend:(t,i)=>{var n=Object.create(t),r;for(r in i)n[r]=i[r];return i.toString!==Object.prototype.toString&&(n.toString=i.toString),n}})});var ci=O((Dw,En)=>{var{D:vo}=j(),Nr="0123456789ABCDEF";function ls(){}ls.parseInt=function(t){return t=parseInt(t,!t||t[0]!="0"||t[1]!="x"&&t[1]!="X"?10:16),isNaN(t)?null:t};function jn(){}jn.startsWith=function(t,i){return t.length>=i.length?vo.substr(t,0,i.length)==i:!1};jn.replace=function(t,i,n){return t.split(i).join(n)};jn.Xs=function(t,i){var n="";do n=Nr.charAt(t&15)+n,t>>>=4;while(t>0);if(i!=null)for(;n.length<i;)n="0"+n;return n};var po=t=>{for(var i="",n=0;n<t.length;)i+=String.fromCharCode(Nr.indexOf(t.charAt(n++))<<4|Nr.indexOf(t.charAt(n++)));return i},wo=t=>{for(var i="",n=0,r=t.byteLength;n<r;)i+=String.fromCharCode(t[n++]);return i};En.NY=En.Mo||(En.Mo={lh:po,ch:wo,K:ls,J:jn})});var ot=O((aw,cs)=>{var{E:yo}=P();function vt(t,i,n,r,e){this.id=t,this.N=i,this.vh=n,this.u=r,this.f=e}vt.spec=new vt(0,16777215,0,-1,0);vt.red=new vt(1,15035990,-1,8,2);vt.blue=new vt(2,5671397,1,16,4);vt.byId=vt.i=[vt.spec,vt.red,vt.blue];yo(vt,["id","color","defenseDir","cMask","cGroup"],[]);cs.NY=vt});var vs=O((In,Bn)=>{var _n=(()=>{var t=(v,y)=>()=>(y||v((y={NY:{}}).NY,y),y.NY),i=t((v,y)=>{function C(k,f){this.x=k,this.y=f}C.prototype={ph:function(){this.x=-this.x,this.y=-this.y}},y.NY=C}),n=t((v,y)=>{var C=i();y.NY=function(k){var{f=32,u:p=63,h:q=1,Eo:w=0,jo:g=0}=k||{};this.f=f,this.u=p,this.h=q,this.e=new C(w,g)}}),r=t((v,y)=>{function C(f){var{f:p=32,u:q=63,h:w=1,Wt:g=0,Z:N=null,z:S=null}=f||{};this.Or=this.Rr=this.b=null,this.Fs=0,this.He=null,this.Z=N,this.z=S,this.Wt=g,this.h=w,this.u=q,this.f=p,this.dt=1/0}var k=i();C.prototype={Ai:function(f){if(f*=.017453292519943295,0>f){f=-f;var p=this.Z;this.Z=this.z,this.z=p,this.Wt=-this.Wt}.17435839227423353<f&&5.934119456780721>f&&(this.dt=1/Math.tan(f/2))},getCurveDegrees:function(){return isFinite(this.dt)?114.59155902616465*Math.atan(1/this.dt):0},calculateNormals:function(){var{dt:f,z:{e:p},Z:{e:q}}=this,w,g,N,S;isFinite(f)?(N=.5*(p.x-q.x),S=.5*(p.y-q.y),w=q.x+N-S*f,g=q.y+S+N*f,N=q.x-w,S=q.y-g,this.Fs=Math.sqrt(N*N+S*S),this.Or=new k(g-q.y,q.x-w),this.Rr=new k(p.y-g,w-p.x),0>=f&&(this.Or.ph(),this.Rr.ph()),this.He=new k(w,g)):(N=q.x-p.x,S=q.y-p.y,g=Math.sqrt(S*S+N*N),this.b=new k(-S/g,N/g))}},y.NY=C}),e=t((v,y)=>{var C=i();y.NY=function(k){var{f=32,u:p=63,h:q=1,st:w=0,Sv:g=0,Tv:N=0}=k||{};this.f=f,this.u=p,this.h=q,this.st=w,this.b=new C(g,N)}}),s=t((v,y)=>{function C(f){var{Ov:p=0,Rv:q=0,Pv:w=0,Av:g=0}=f||{};this.ri=new k(w,g),this.ni=new k(p,q)}var k=i();C.prototype={_o:function({x:f,y:p},{x:q,y:w}){var{ni:{x:g,y:N},ri:{x:S,y:R}}=this,E=q-f,M=w-p;return 0<M*(g-f)-E*(N-p)==0<M*(S-f)-E*(R-p)?!1:(E=S-g,M=R-N,0<M*(f-g)-E*(p-N)!=0<M*(q-g)-E*(w-N))}},y.NY=C}),u=t((v,y)=>{var C=i();y.NY=function(k){var{f=63,u:p=63,Y:q=.99,U:w=1,h:g=.5,B:N=10,xgravity:S=0,ygravity:R=0,xspeed:E=0,yspeed:M=0,Eo:b=0,jo:tt=0}=k||{};this.f=f,this.u=p,this.Y=q,this.U=w,this.h=g,this.B=N,this.P=new C(S,R),this.A=new C(E,M),this.e=new C(b,tt)}}),h=t((v,y)=>{y.NY=function(C){var{Mi:k=1/0,It:f=100,Bt:p=100,$t:q=0,Zt:w=0}=C||{};this.Mi=k,this.It=f,this.Bt=p,this.$t=q,this.Zt=w}}),l=t((v,y)=>{function C(f){k.apply(this,[f])}var k=u();C.prototype={wh:function(f,p,q){var{A:w,U:g}=this;w.x+=f*p*g,w.y+=f*q*g},Io:function(f,p){var{A:q}=this;q.x+=f,q.y+=p},Bo:function(){var{x:f,y:p}=this.A;return 0<f*f+p*p}},y.NY=C}),o=t((v,y)=>{function C(){this.p=[],this.C=[],this.Q=[],this.O=[],this.yt=[]}C.prototype={ze:function(k,f){var p,q,w,g,N,S,{p:R,Q:E,O:M,C:b,yt:tt}=this;R.forEach(({e:W,A:G,P:nt,Y:rt})=>{var{x:qt,y:Nt}=G;W.x+=k*qt,W.y+=k*Nt,G.x=rt*(qt+nt.x),G.y=rt*(Nt+nt.y)}),R.forEach((W,G)=>{var{h:nt,B:rt,u:qt,f:Nt,U:ti,e:X,A:Z}=W;for(p=G+1;p<R.length;p++)if(w=R[p],w.u&Nt&&w.f&qt){var{e:xt,A:Ct}=w,wt=X.x-xt.x,ii=X.y-xt.y,gt=wt*wt+ii*ii,V=w.B+rt;if(0<gt&&gt<=V*V){gt=Math.sqrt(gt),wt/=gt,ii/=gt;var ni=ti/(ti+w.U);V-=gt,gt=V*ni,X.x+=wt*gt,X.y+=ii*gt,V-=gt,xt.x-=wt*V,xt.y-=ii*V,V=wt*(Z.x-Ct.x)+ii*(Z.y-Ct.y),0>V&&(V*=nt*w.h+1,ni*=V,Z.x-=wt*ni,Z.y-=ii*ni,ni=V-ni,Ct.x+=wt*ni,Ct.y+=ii*ni,f?.dr?.(G,W,p,w))}}if(ti!=0){E.forEach((K,Ui)=>{if(K.u&Nt&&K.f&qt){var{b:{x:H,y:L}}=K;g=K.st-(H*X.x+L*X.y)+rt,0<g&&(X.x+=H*g,X.y+=L*g,g=Z.x*H+Z.y*L,0>g&&(g*=nt*K.h+1,Z.x-=g*H,Z.y-=g*L,f?.Er?.(G,W,Ui)))}}),M.forEach((K,Ui)=>{if(K.u&Nt&&K.f&qt){var H,L,J,{x:yr,y:qr}=X;if(isFinite(K.dt)){if(L=K.He,H=yr-L.x,L=qr-L.y,J=K.Or,V=K.Rr,(0<J.x*H+J.y*L&&0<V.x*H+V.y*L)==0>=K.dt||(V=Math.sqrt(H*H+L*L),V==0))return;J=V-K.Fs,H/=V,L/=V}else{var{x:Be,y:Ge}=K.Z.e,{x:Ve,y:Le}=K.z.e;if(L=Ve-Be,H=Le-Ge,J=yr-Ve,V=qr-Le,0>=(yr-Be)*L+(qr-Ge)*H||0<=J*L+V*H)return;L=K.b,H=L.x,L=L.y,J=H*J+L*V}if(V=K.Wt,V==0)0>J&&(J=-J,H=-H,L=-L);else if(0>V&&(V=-V,J=-J,H=-H,L=-L),J<-V)return;J>=rt||(J=rt-J,X.x+=H*J,X.y+=L*J,J=H*Z.x+L*Z.y,0>J&&(J*=nt*K.h+1,Z.x-=H*J,Z.y-=L*J,f?.jr?.(G,W,Ui)))}});var Df=rt*rt;b.forEach((K,Ui)=>{if(K.u&Nt&&K.f&qt&&(g=X.x-K.e.x,N=X.y-K.e.y,S=g*g+N*N,0<S&&S<=Df)){S=Math.sqrt(S),g/=S,N/=S,S=rt-S,X.x+=g*S,X.y+=N*S,S=g*Z.x+N*Z.y;var H=0>S;H&&(S*=nt*K.h+1,Z.x-=g*S,Z.y-=N*S),f?._r?.(G,W,Ui,H)}})}});for(var ft=0;2>ft;ft++)tt.forEach(({Zt:W,$t:G,Mi:nt,Bt:rt,It:qt},Nt)=>{if(W=R[W],G=R[G],W&&G){var{e:ti,A:X,U:Z}=W,{e:xt,A:Ct,U:wt}=G;if(q=ti.x-xt.x,G=ti.y-xt.y,w=Math.sqrt(q*q+G*G),!(0>=w)){if(q/=w,G/=w,p=Z/(Z+wt),p!=p&&(p=.5),rt>=qt)g=rt,N=0;else if(w<=rt)g=rt,N=1;else if(w>=qt)g=qt,N=-1;else return;w=g-w,isFinite(nt)?(p=nt*w*.5,q*=p,G*=p,X.x+=q*Z,X.y+=G*Z,Ct.x-=q*wt,Ct.y-=G*wt,f?.Dn?.(Nt,!1,!0)):(g=w*p,ti.x+=q*g*.5,ti.y+=G*g*.5,w-=g,xt.x-=q*w*.5,xt.y-=G*w*.5,w=q*(X.x-Ct.x)+G*(X.y-Ct.y),(nt=0>=N*w)&&(p*=w,X.x-=q*p,X.y-=G*p,p=w-p,Ct.x+=q*p,Ct.y+=G*p),f?.Dn?.(Nt,!0,nt))}}})},addDisc:function(k){this.p.push(k)},removeDisc:function(k){k=this.p.indexOf(k),0>k||this.p.splice(k,1)}},y.NY=C});return t((v,y)=>{y.NY={Point:i(),Ys:n(),xe:r(),$s:e(),Go:s(),be:u(),Zs:h(),zs:l(),xs:o()}})()})();typeof In<"u"?(typeof Bn<"u"&&Bn.NY&&(In=Bn.NY=_n),In.Mv=_n):typeof root<"u"?root.nago=_n:window.nago=_n});var mi=O((ty,Gn)=>{var{E:ei}=P(),{extend:si}=j(),Vn=ot(),{Point:qo,Ys:ws,xe:ys,$s:qs,Go:Cs,be:gs,Zs:ms,zs:ks,xs:Ns}=vs(),ps=1/Math.SQRT2;function Sr(){ws.call(this),this.id=0}Sr.prototype=si(ws.prototype,{$:function(t){var i=this.e;t.g(i.x),t.g(i.y),t.g(this.h),t.G(this.u),t.G(this.f)},a:function(t){var i=this.e;i.x=t.m(),i.y=t.m(),this.h=t.m(),this.u=t.M(),this.f=t.M()}});function Tr(){ys.call(this),this.Nt=!0,this.N=0}Tr.prototype=si(ys.prototype,{$:function(t){var i=0,n=t.l;t.o(0),t.o(this.Z.id),t.o(this.z.id),this.Wt!=0&&(i=1,t.g(this.Wt)),this.dt!=1/0&&(i|=2,t.g(this.dt)),this.N!=0&&(i|=4,t.G(this.N)),this.Nt&&(i|=8),t.v.setUint8(n,i),t.g(this.h),t.G(this.u),t.G(this.f)},a:function(t,i){var n=t.T();this.Z=i[t.T()],this.z=i[t.T()],this.Wt=n&1?t.m():0,this.dt=n&2?t.m():1/0,this.N=n&4?t.M():0,this.Nt=(n&8)!=0,this.h=t.m(),this.u=t.M(),this.f=t.M()}});function Or(){qs.call(this)}Or.prototype=si(qs.prototype,{$:function(t){var i=this.b;t.g(i.x),t.g(i.y),t.g(this.st),t.g(this.h),t.G(this.u),t.G(this.f)},a:function(t){var i=this.b;i.x=t.m(),i.y=t.m(),this.st=t.m(),this.h=t.m(),this.u=t.M(),this.f=t.M()}});function Rr(){Cs.call(this),this.R=Vn.spec}Rr.prototype=si(Cs.prototype,{$:function(t){var i=this.ni;t.g(i.x),t.g(i.y),i=this.ri,t.g(i.x),t.g(i.y),t.o(this.R.id)},a:function(t){var i=this.ni;i.x=t.m(),i.y=t.m(),i=this.ri,i.x=t.m(),i.y=t.m(),this.R=Vn.i[t.Pr()]||Vn.spec}});function Pr(){gs.call(this),this.N=16777215}Pr.prototype=si(gs.prototype,{$:function(t){var i=this.e;t.g(i.x),t.g(i.y),i=this.A,t.g(i.x),t.g(i.y),i=this.P,t.g(i.x),t.g(i.y),t.g(this.B),t.g(this.h),t.g(this.U),t.g(this.Y),t.kt(this.N),t.G(this.u),t.G(this.f)},a:function(t){var i=this.e;i.x=t.m(),i.y=t.m(),i=this.A,i.x=t.m(),i.y=t.m(),i=this.P,i.x=t.m(),i.y=t.m(),this.B=t.m(),this.h=t.m(),this.U=t.m(),this.Y=t.m(),this.N=t.ut(),this.u=t.M(),this.f=t.M()},Vo:function(){var t=new Tt;return this.yh(t),t},yh:function(t){var i=t.e,n=this.e;i.x=n.x,i.y=n.y,i=t.A,n=this.A,i.x=n.x,i.y=n.y,i=t.P,n=this.P,i.x=n.x,i.y=n.y,t.B=this.B,t.h=this.h,t.U=this.U,t.Y=this.Y,t.N=this.N,t.u=this.u,t.f=this.f}});function Ar(){ms.call(this),this.N=0}Ar.prototype=si(ms.prototype,{$:function(t){t.o(this.Zt),t.o(this.$t),t.g(this.Bt),t.g(this.It),t.g(this.Mi),t.G(this.N)},a:function(t){this.Zt=t.T(),this.$t=t.T(),this.Bt=t.m(),this.It=t.m(),this.Mi=t.m(),this.N=t.M()}});function Tt(){ks.call(this),this._=null,this.ui=-1,this.tt=null,this.qh=0,this.N=16777215}Tt.Di=function(t,i,n){t.B=i.B,t.h=i.h,t.U=i.U,t.Y=i.Y,t.N=i.N,t.u=i.u,t.f=i.f;var r=t.e,e=i.e;r.x=e.x,r.y=e.y,r=t.A,e=i.A,r.x=e.x,r.y=e.y,r=t.P,e=i.P,r.x=e.x,r.y=e.y};Tt.prototype=si(ks.prototype,{$:function(t){var i=this.e;t.g(i.x),t.g(i.y),i=this.A,t.g(i.x),t.g(i.y),i=this.P,t.g(i.x),t.g(i.y),t.g(this.B),t.g(this.h),t.g(this.U),t.g(this.Y),t.kt(this.N),t.G(this.u),t.G(this.f)},a:function(t){var i=this.e;i.x=t.m(),i.y=t.m(),i=this.A,i.x=t.m(),i.y=t.m(),i=this.P,i.x=t.m(),i.y=t.m(),this.B=t.m(),this.h=t.m(),this.U=t.m(),this.Y=t.m(),this.N=t.ut(),this.u=t.M(),this.f=t.M()},Ci:function(t){return t!=this.ui&&(this.tt||(this.tt=new Tt),this.ui=t,Tt.Di(this.tt,this,t)),this.tt}});function ri(){Ns.call(this),this.Pt=[],this.ui=-1,this.tt=null}ri.Di=function(t,i,n){if(i.p==null)t.p=null;else{t.p==null&&(t.p=[]);for(var r=t.p,e=i.p,s=e.length,u;r.length>s;)r.pop();for(s=0,u=e.length;s<u;){var h=s++;r[h]=e[h].Ci(n)}}t.C=i.C,t.O=i.O,t.Q=i.Q,t.yt=i.yt};ri.prototype=si(Ns.prototype,{$:function(t){t.o(this.p.length);for(var i=0,n=this.p.length;i<n;){var r=i++,e=this.p[r];e.qh=r,e.$(t)}},a:function(t){this.p=[];for(var i=t.T(),n=0;n<i;){++n;var r=new Tt;r.a(t),this.addDisc(r)}},Ci:function(t){return t!=this.ui&&(this.tt||(this.tt=new ri),this.ui=t,ri.Di(this.tt,this,t)),this.tt},kickBall:function(t,i,n){var e=i.e,s=t.e,r=e.x-s.x,e=e.y-s.y,s=Math.sqrt(r*r+e*e);if(!(s-i.B-t.B>=4)){var u=r/s,h=e/s;return i.wh(n.qn,u,h),t.wh(-n.Cn,u,h),!0}},Lo:function(t,i){var n=t.Tt,r=((n&8)>0)-((n&4)>0),e=r==0,s=((n&2)>0)-((n&1)>0),u=s==0;!e&&!u&&(r*=ps,s*=ps),n=t.gi,(!e||!u)&&(u=n?i.gn:i.mn,t.H.Io(r*u,s*u)),t.H.Y=n?i.kn:i.Y},Ch:function(t,i){t.H&&(this.removeDisc(t.H),i?.(t),t.H=null)},Fo:function(t,i,n){t.Tt=0;var r=t.H;r==null&&(r=new Tt,r._=t.id,t.H=r,this.addDisc(r),n?.(t));var e=i.Pi;r.N=0,r.B=e.B,r.U=e.U,r.Y=e.Y,r.h=e.h,r.u=39,r.f=t.R.f|e.f;var s=t.R==Vn.red?i.Dt:i.at;s.length==0?(r.e.x=t.R.vh*i.di,r.e.y=0):(t=r.e,s=s[s.length-1],t.x=s.x,t.y=s.y),s=r.A,s.x=0,s.y=0,r=r.P,e=e.P,r.x=e.x,r.y=e.y}});ri.Uo=t=>{var i=new ri;return i.C=t.C,i.O=t.O,i.Pt=t.Pt,i.Q=t.Q,i.yt=t.yt,t.p.forEach(n=>{var r=new Tt;return r.e.x=n.e.x,r.e.y=n.e.y,r.A.x=n.A.x,r.A.y=n.A.y,r.P.x=n.P.x,r.P.y=n.P.y,r.B=n.B,r.h=n.h,r.U=n.U,r.Y=n.Y,r.N=n.N,r.u=n.u,r.f=n.f,i.addDisc(r),r}),i};ei(Sr,["cGroup","cMask","bCoef","pos","id"],[]);ei(Tr,["normal","v1Normal","v0Normal","arcRadius","arcCenter","v0","v1","bias","bCoef","cMask","cGroup","curveF","vis","color"],[]);ei(Or,["cGroup","cMask","bCoef","dist","normal"],[]);ei(Rr,["p1","p0","team"],[]);ei(Pr,["cGroup","cMask","damping","invMass","bCoef","radius","gravity","speed","pos","color"],[]);ei(Ar,["strength","maxLength","minLength","d1","d0","color"],[]);ei(Tt,["cGroup","cMask","damping","invMass","bCoef","radius","gravity","speed","pos","playerId",null,"ext",null,"color"],[]);ei(ri,["discs","vertices","planes","segments","joints","goals",null,"ext"],[]);Gn.NY=Gn.Ho||(Gn.Ho={Point:qo,Ys:Sr,xe:Tr,$s:Or,Ko:Rr,be:Pr,Zs:Ar,zs:Tt,xs:ri})});var Mr=O((iy,Ln)=>{var{noVariableValueChangeEvent:Co}=P(),Fn=[];function A(t,i){Fn.push({name:t})}function go(t){var i=Fn.findIndex(n=>n.name==t);i<0||Fn.splice(i,1)}A("PlayerObjectCreated");A("PlayerDiscCreated");A("PlayerDiscDestroyed");A("RoomLink");A("PlayerBallKick");A("TeamGoal");A("GameEnd");A("GameTick");A("PlayerSyncChange");A("Announcement");A("KickOff");A("AutoTeams");A("ScoreLimitChange");A("TimeLimitChange");A("PlayerAdminChange");A("PlayerAvatarChange");A("PlayerHeadlessAvatarChange");A("PlayersOrderChange");A("PlayerTeamChange");A("StadiumChange");A("TeamColorsChange");A("TeamsLockChange");A("PlayerJoin");A("GamePauseChange");A("PlayerChat");A("PlayerInputChange");A("PlayerChatIndicatorChange");A("PlayerLeave");A("SetDiscProperties");A("KickRateLimitChange");A("GameStart");A("GameStop");A("PingData");A("PingChange");A("CollisionDiscVsDisc");A("CollisionDiscVsSegment");A("CollisionDiscVsPlane");A("CollisionDiscVsVertex");A("ModifyJoint");A("TimeIsUp");A("PositionsReset");A("BansClear");A("BanClear");A("HandicapChange");A("RoomRecaptchaModeChange");A("RoomTokenChange");A("RoomRecordingChange");A("RoomPropertiesChange");A("CustomEvent");A("BinaryCustomEvent");A("IdentityEvent");A("PluginActiveChange");A("ConfigUpdate");A("RendererUpdate");A("PluginUpdate");A("LibraryUpdate");A("LanguageChange");Co||A("VariableValueChange");Ln.NY=Ln.bs||(Ln.bs={bs:Fn,Jo:A,Wo:go})});var B=O((ny,Un)=>{var ki=Y(),{Ht:Ni,q:Si}=$();function mt(){this.V=0}mt.Ds=new Map;mt.qt=function(t){return t.lt==null&&(t.lt=!0),t.vt==null&&(t.vt=!0),t};mt.Ct=function(t){if(t.gh=t.prototype.eventType,t.pt==null)throw new Si(Ni(ki.MissingActionConfigError));t.prototype.an=t.pt,mt.Ds.set(t.gh,t)};mt.Nn=function(t,i){var n=t?.it?.gh;if(n==null)throw new Si(Ni(ki.UnregisteredActionError));i.o(n),t.ht(i)};mt.ai=function(t,i){var n=Object.create(mt.Ds.get(t.T()).prototype);return n.V=0,n.St=0,n.ft(t,i),n};mt.prototype={mh:function(){return!0},apply:function(){throw new Si(Ni(ki.MissingImplementationError))},ft:function(){throw new Si(Ni(ki.MissingImplementationError))},ht:function(){throw new Si(Ni(ki.MissingImplementationError))},copy:function(){throw new Si(Ni(ki.MissingImplementationError))},it:mt};Object.defineProperty(mt.prototype,"eventType",{get(){return null}});function mo(t,i){return t.V=i.V,t.St=i.St,t.i=i.i,t.De=i.De,t}Un.NY=Un.Qo||(Un.Qo={Event:mt,gt:mo})});var dr=O((ry,Ss)=>{function Hn(){this.list=[]}Hn.Xo=function(t,i,n){if(t.length==0)for(t=0;t<i.length;)n.push(i[t++]);else if(i.length==0)for(i=0;i<t.length;)n.push(t[i++]);else for(var r=0,e=t.length,s=0,u=i.length;;){var h=t[r],l=i[s];if(h.St<=l.St){if(n.push(h),++r,r>=e){for(;s<u;)n.push(i[s++]);break}}else if(n.push(l),++s,s>=u){for(;r<e;)n.push(t[r++]);break}}};Hn.prototype={as:function(t){for(var i=0,n=t.St,r=t.V,e=0,s=this.list;e<s.length;){var u=s[e];++e;var h=u.St;if(h>n)break;if(h==n){if(u=u.V,u>r)break;u==r&&++r}++i}t.V=r,this.list.splice(i,0,t)},Yo:function(t){for(var i=0,n=0,r=this.list;n<r.length&&!(r[n++].St>=t);)++i;this.list.splice(0,i)},$o:function(t,i){for(var n=this.list;0<n.length;)n.pop();Hn.Xo(t.list,i.list,this.list)},Zo:function(t){for(var i=0,n=this.list,r=0,e=n.length;r<e;){var s=n[r++];s.Bn!=t&&(n[i]=s,++i)}for(;n.length>i;)n.pop()},zo:function(t){for(var i=0,n=0,r=this.list;n<r.length&&!(r[n++].St>=t);)++i;return i}};Ss.NY=Hn});var Ti=O((ey,Rs)=>{var{Ht:Er,q:jr}=$(),Ts=dr(),_r=Y();function Os(t){this.tu=new Ts,this.Gn=0,this.ti=0,this.tn=new Ts,this.mi=0,this.nn=0,this.rn=.06,this.iu=16.666666666666668,this.ae=120,this.k=0,this.t=t,this.kh=0}Os.prototype={j:function(){throw new jr(Er(_r.MissingImplementationError))},en:function(t=0){throw new jr(Er(_r.MissingImplementationError))},ct:function(){throw new jr(Er(_r.MissingImplementationError))},Nh:function(t){for(var i=this.tn.list,n=0,r=i.length,e=0;e<t;){for(++e;n<r;){var s=i[n];if(s.St!=this.k)break;s.apply(this.t),this.vi!=null&&this.vi(s),this.ti++,++n}this.t.ct(1),this.Gn+=this.ti,this.ti=0,this.k++}for(;n<r&&(t=i[n],!(t.St!=this.k||t.V!=this.ti));)t.apply(this.t),this.vi!=null&&this.vi(t),this.ti++,++n;i.splice(0,n)},Ir:function(t){t.St==this.k&&t.V<=this.ti?(t.V=this.ti++,t.apply(this.t,this.haxball),this.vi!=null&&this.vi(t)):this.tn.as(t)},Sh:function(t,i){if(0>=t)return this.t;t>this.ae&&(t=this.ae);var n=this.t.Ci(++this.kh),r;i!=null?(this.tu.$o(this.tn,i),r=this.tu):r=this.tn,r=r.list;for(var e=0,s=r.length,u=this.k,h=t|0,l=u+h;u<=l;){for(;e<s;){var o=r[e];if(o.St>u)break;o.an.vt&&o.apply(n),++e}n.ct(u!=l?1:t-h),++u}for(r=this.tu.list;0<r.length;)r.pop();return n},xo:function(t){this.mi=this.rn*t|0,this.t.Br?.(t)}};Rs.NY=Os});var As=O((sy,Ps)=>{var{E:ko}=P(),{Ht:No,q:So}=$(),{Event:Ir,gt:To}=B(),Oo=Y(),Ro=F(),{extend:Po,In:Ao}=j();function Ot(){this.V=0,this.tr="",this.N=0,this.Gr=0,this.Vr=0,this.i=0,this.De=null}Ot.create=function(t,i,n,r){var e=new Ot;return e.tr=t,e.N=i,e.Gr=n,e.Vr=r,e};Ot.prototype=Po(Ir.prototype,{apply:function(t){this.i==0&&t.Lr?.(this.tr,this.N,this.Gr,this.Vr)},ht:function(t){t.ci(Ao(this.tr,1e3)),t.G(this.N),t.o(this.Gr),t.o(this.Vr)},ft:function(t){if(this.tr=t.li(),1e3<this.tr.length)throw new So(No(Oo.AnnouncementActionMessageTooLongError));this.N=t.M(),this.Gr=t.T(),this.Vr=t.T()},copy:function(){return To(Ot.create(this.tr,this.N,this.Gr,this.Vr),this)},it:Ot});Object.defineProperty(Ot.prototype,"eventType",{get(){return Ro.SendAnnouncement}});Ot.pt=Ir.qt({vt:!1,lt:!1,nu:{ru:10,eu:900}});Ir.Ct(Ot);ko(Ot,[null,"msg","color","style","sound","byId","targetId"],[]);Ps.NY=Ot});var ds=O((uy,Ms)=>{var{E:Mo}=P(),{Event:Br,gt:Eo}=B(),jo=F(),{extend:_o}=j();function Rt(){this.V=0,this.value=0,this.id=null,this.ir=null,this.i=0}Rt.create=function(t,i,n){var r=new Rt;return r.value=t,r.id=i,r.ir=n,r};Rt.prototype=_o(Br.prototype,{apply:function(t){if(this.id!=null){t.Th&&t.Th(this.i,this.id,this.ir);return}var i=t.getPlayer(this.i);i!=null&&t.Fr?.(i,this.value)},ht:function(t){t.o(this.value),this.id!=null&&this.ir!=null&&(t.G(this.id),t.o(this.ir))},ft:function(t,i){if(this.value=t.T(),!i)try{this.id=t.M(),this.ir=t.T()}catch{}},copy:function(){return Eo(Rt.create(this.value,this.id,this.ir),this)},it:Rt});Object.defineProperty(Rt.prototype,"eventType",{get(){return jo.SendChatIndicator}});Rt.pt=Br.qt({vt:!1,lt:!1});Br.Ct(Rt);Mo(Rt,[null,"value","id","mode","byId"],[]);Ms.NY=Rt});var js=O((hy,Es)=>{var{E:Io}=P(),{Event:Gr,gt:Bo}=B(),Go=F(),{extend:Vo}=j();function Pt(){this.V=0,this.data=null}Pt.create=function(t){var i=new Pt;return i.data=t,i};Pt.prototype=Vo(Gr.prototype,{apply:function(t){t.bo(this.data)},ht:function(t){t.Ut(this.data.byteLength),t.Qe(this.data)},ft:function(t){this.data=t.rh(t.Kt())},copy:function(){var t=null;return this.data&&(t=new ArrayBuffer(this.data.byteLength),new Uint8Array(t).set(new Uint8Array(this.data))),Bo(Pt.create(t),this)},it:Pt});Object.defineProperty(Pt.prototype,"eventType",{get(){return Go.CheckConsistency}});Pt.pt=Gr.qt({vt:!1,lt:!1});Gr.Ct(Pt);Io(Pt,[null,"data"],[]);Es.NY=Pt});var Is=O((fy,_s)=>{var{E:Lo}=P(),{Event:Vr,gt:Fo}=B(),Uo=F(),{extend:Ho}=j();function At(){this.V=0,this.Tt=0,this.i=0}At.create=function(t){var i=new At;return i.Tt=t,i};At.prototype=Ho(Vr.prototype,{apply:function(t){var i=t.getPlayer(this.i);if(i){var n=this.Tt;!(i.Tt&16)&&n&16&&(i.gi=!0),i.Tt=n,t.nr?.(i)}},ht:function(t){t.kt(this.Tt)},ft:function(t){this.Tt=t.ut()},copy:function(){return Fo(At.create(this.Tt),this)},it:At});Object.defineProperty(At.prototype,"eventType",{get(){return Uo.SendInput}});At.pt=Vr.qt({});Vr.Ct(At);Lo(At,[null,"input","byId"],[]);_s.NY=At});var Gs=O((oy,Bs)=>{var{E:Ko}=P(),{Ht:Jo,q:Wo}=$(),{Event:Lr,gt:Qo}=B(),Xo=F(),Yo=Y(),{extend:$o,In:Zo}=j();function Mt(){this.V=0,this.pi="",this.i=0,this.De=null}Mt.create=function(t){var i=new Mt;return i.pi=t,i};Mt.prototype=$o(Lr.prototype,{mh:function(t){if(t.Do!=null){var i=t.getPlayer(this.i);return i==null?!1:t.Do(i,this.pi)}return!0},apply:function(t){var i=t.getPlayer(this.i);i!=null&&t.Ur?.(i,this.pi)},ht:function(t){t.ci(Zo(this.pi,140))},ft:function(t){if(this.pi=t.li(),140<this.pi.length)throw new Wo(Jo(Yo.ChatActionMessageTooLongError))},copy:function(){return Qo(Mt.create(this.pi),this)},it:Mt});Object.defineProperty(Mt.prototype,"eventType",{get(){return Xo.SendChat}});Mt.pt=Lr.qt({vt:!1,lt:!1,nu:{ru:10,eu:900}});Lr.Ct(Mt);Ko(Mt,[null,"text","byId","targetId"],[]);Bs.NY=Mt});var Jn=O((ly,Vs)=>{var{E:zo}=P(),Kn=ot();function Oi(){this.ui=-1,this.tt=null,this.R=Kn.spec,this.H=null,this.Fi=0,this.Ui=0,this.gi=!1,this.id=0,this.Tt=0,this.name="Player",this.rr=0,this.er=0,this.Ot=null,this.Ei=!1,this.Vn=null,this.mt=null,this.ki=0,this.wi=!1,this.Sn=null,this.Qt=null,this.sn=!1,this.su=null}Oi.Di=function(t,i,n){t.wi=i.wi,t.ki=i.ki,t.mt=i.mt,t.Vn=i.Vn,t.Ei=i.Ei,t.Ot=i.Ot,t.er=i.er,t.rr=i.rr,t.name=i.name,t.Tt=i.Tt,t.id=i.id,t.gi=i.gi,t.Ui=i.Ui,t.Fi=i.Fi,t.H=i.H==null?null:i.H.Ci(n),t.H&&(t.H._=t.id),t.R=i.R};Oi.prototype={ht:function(t){t.o(this.wi?1:0),t.G(this.ki),t.si(this.mt),t.si(this.Vn),t.o(this.Ei?1:0),t.si(this.Ot),t.G(this.er),t.si(this.name),t.G(this.Tt),t.Ut(this.id),t.o(this.gi?1:0),t.Js(this.Ui),t.o(this.Fi),t.o(this.R.id),t.Js(this.H==null?-1:this.H.qh)},ft:function(t,i){this.wi=t.T()!=0,this.ki=t.M(),this.mt=t.ei(),this.Vn=t.ei(),this.Ei=t.T()!=0,this.Ot=t.ei(),this.er=t.M(),this.name=t.ei(),this.Tt=t.M(),this.id=t.Kt(),this.gi=t.T()!=0,this.Ui=t.Hs(),this.Fi=t.T();var n=t.Pr();this.R=n==1?Kn.red:n==2?Kn.blue:Kn.spec,n=t.Hs(),this.H=0>n?null:i[n],this.H&&(this.H._=this.id)},Ci:function(t){return t!=this.ui&&(this.tt||(this.tt=new Oi),this.ui=t,Oi.Di(this.tt,this,t)),this.tt}};zo(Oi,[null,"ext","team","disc","kickRateMinTickCounter","kickRateMaxTickCounter","isKicking","id","input","name","ping",null,"flag","sync","headlessAvatar","avatar","avatarNumber","isAdmin","conn","auth","customClient","identity"],[]);Vs.NY=Oi});var Fs=O((cy,Ls)=>{var{E:xo}=P(),{Event:Fr,gt:bo}=B(),Do=F(),ao=Jn(),{extend:tl}=j();function dt(){this.V=0,this.id=0,this.name="",this.Ot="",this.mt="",this.Sn="",this.Qt="",this.i=0}dt.create=function(t,i,n,r,e,s){var u=new dt;return u.id=t,u.name=i,u.Ot=n,u.mt=r,u.Sn=e,u.Qt=s,u};dt.prototype=tl(Fr.prototype,{apply:function(t,i){if(this.i==0){var n=new ao;n.id=this.id,n.name=this.name,n.Ot=this.Ot,n.mt=this.mt,n.Sn=this.Sn,n.Qt=this.Qt,t.d.push(n),t.Hr?.(n),i?.room?._onPlayerObjectCreated?.(n)}},ht:function(t){t.G(this.id),t.si(this.name),t.si(this.Ot),t.si(this.mt)},ft:function(t){this.id=t.M(),this.name=t.ei(),this.Ot=t.ei(),this.mt=t.ei()},copy:function(){return bo(dt.create(this.id,this.name,this.Ot,this.mt,this.Sn,this.Qt),this)},it:dt});Object.defineProperty(dt.prototype,"eventType",{get(){return Do.JoinRoom}});dt.pt=Fr.qt({vt:!1,lt:!1});Fr.Ct(dt);xo(dt,[null,"id","name","flag","avatar","conn","auth","byId"],[]);Ls.NY=dt});var Hs=O((vy,Us)=>{var{E:il}=P(),{Ht:nl,q:rl}=$(),{Event:Ur,gt:el}=B(),sl=Y(),ul=F(),{D:hl,extend:fl,In:ol}=j();function Et(){this.V=0,this.id=0,this.Hi=null,this.Kr=!1,this.i=0}Et.create=function(t,i,n){var r=new Et;return r.id=t,r.Hi=i,r.Kr=n,r};Et.prototype=fl(Ur.prototype,{apply:function(t){if(this.id!=0&&t.Ni(this.i,128)){var i=t.getPlayer(this.id);if(i!=null){var n=t.getPlayer(this.i);hl.remove(t.d,i),t.s!=null&&t.s.c.removeDisc(i.H),t.Jr?.(i,this.Hi,this.Kr,n)}}},ht:function(t){this.Hi!=null&&(this.Hi=ol(this.Hi,100)),t.G(this.id),t.si(this.Hi),t.o(this.Kr?1:0)},ft:function(t){if(this.id=t.M(),this.Hi=t.ei(),this.Kr=t.T()!=0,this.Hi!=null&&100<this.Hi.length)throw new rl(nl(sl.KickBanReasonTooLongError))},copy:function(){return el(Et.create(this.id,this.Hi,this.Kr),this)},it:Et});Object.defineProperty(Et.prototype,"eventType",{get(){return ul.KickBanPlayer}});Et.pt=Ur.qt({vt:!1,lt:!1});Ur.Ct(Et);il(Et,[null,"id","reason","ban","byId"],[]);Us.NY=Et});var Js=O((py,Ks)=>{var{E:ll}=P(),{Event:Hr,gt:cl}=B(),vl=F(),{extend:pl}=j();function jt(){this.V=0,this.i=0}jt.create=function(){return new jt};jt.prototype=pl(Hr.prototype,{apply:function(t){t.Ni(this.i,32)&&t.ao(t.getPlayer(this.i),0)},ht:function(){},ft:function(){},copy:function(){return cl(jt.create(),this)},it:jt});Object.defineProperty(jt.prototype,"eventType",{get(){return vl.StartGame}});jt.pt=Hr.qt({vt:!1,lt:!1});Hr.Ct(jt);ll(jt,[null,"byId"],[]);Ks.NY=jt});var Qs=O((wy,Ws)=>{var{E:wl}=P(),{Event:Kr,gt:yl}=B(),ql=F(),{extend:Cl}=j();function _t(){this.V=0,this.i=0}_t.create=function(){return new _t};_t.prototype=Cl(Kr.prototype,{apply:function(t){if(t.Ni(this.i,32)){var i=t.getPlayer(this.i);if(!t.s)return;t.s=null;for(var n=0,r=t.d;n<r.length;){var e=r[n];++n,e.H&&t.Tn?.(e),e.H=null,e.ki=0}t.tl?.(),t.sr?.(i)}},ht:function(){},ft:function(){},copy:function(){return yl(_t.create(),this)},it:_t});Object.defineProperty(_t.prototype,"eventType",{get(){return ql.StopGame}});_t.pt=Kr.qt({vt:!1,lt:!1});Kr.Ct(_t);wl(_t,[null,"byId"],[]);Ws.NY=_t});var Ys=O((yy,Xs)=>{var{E:gl}=P(),{Event:Jr,gt:ml}=B(),kl=F(),{extend:Nl}=j();function It(){this.V=0,this.Ln=!1,this.i=0}It.create=function(t){var i=new It;return i.Ln=t,i};It.prototype=Nl(Jr.prototype,{apply:function(t){var i=t.s;if(i!=null&&t.Ni(this.i,16)){var n=t.getPlayer(this.i),r=i.xt==120,e=0<i.xt;this.Ln?i.xt=120:i.xt==120&&(i.xt=119),this.Ln!=r&&t.Wr?.(n,this.Ln,e)}},ht:function(t){t.o(this.Ln?1:0)},ft:function(t){this.Ln=t.T()!=0},copy:function(){return ml(It.create(this.Ln),this)},it:It});Object.defineProperty(It.prototype,"eventType",{get(){return kl.PauseResumeGame}});It.pt=Jr.qt({});Jr.Ct(It);gl(It,[null,"paused","byId"],[]);Xs.NY=It});var Zs=O((qy,$s)=>{var{E:Sl}=P(),{Event:Wr,gt:Tl}=B(),Ol=F(),{extend:Rl}=j();function Bt(){this.V=0,this.type=0,this.ii=0,this.i=0}Bt.create=function(t,i){var n=new Bt;return n.type=t,n.ii=i,n};Bt.prototype=Rl(Wr.prototype,{apply:function(t){if(t.Ni(this.i,2)&&t.s==null)switch(this.type){case 0:var i=this.ii;t.Gt=0>i?0:99<i?99:i,t.Qr?.(this.ii,this.i);break;case 1:i=this.ii,t.Mt=0>i?0:99<i?99:i,t.Xr?.(this.ii,this.i)}},ht:function(t){t.G(this.type),t.G(this.ii)},ft:function(t){this.type=t.M(),this.ii=t.M()},copy:function(){return Tl(Bt.create(this.type,this.ii),this)},it:Bt});Object.defineProperty(Bt.prototype,"eventType",{get(){return Ol.SetGamePlayLimit}});Bt.pt=Wr.qt({vt:!1,lt:!1});Wr.Ct(Bt);Sl(Bt,[null,"type","newValue","byId"],[]);$s.NY=Bt});var xs=O((Cy,zs)=>{var{E:Pl}=P(),{Point:Al}=mi();function Qr(){this.Cn=0,this.B=15,this.f=0,this.P=new Al(0,0),this.h=.5,this.U=.5,this.Y=.96,this.mn=.1,this.gn=.07,this.kn=.96,this.qn=5}Qr.prototype={$:function(t){t.g(this.h),t.g(this.U),t.g(this.Y),t.g(this.mn),t.g(this.gn),t.g(this.kn),t.g(this.qn);var i=this.P;t.g(i.x),t.g(i.y),t.G(this.f),t.g(this.B),t.g(this.Cn)},a:function(t){this.h=t.m(),this.U=t.m(),this.Y=t.m(),this.mn=t.m(),this.gn=t.m(),this.kn=t.m(),this.qn=t.m();var i=this.P;i.x=t.m(),i.y=t.m(),this.f=t.M(),this.B=t.m(),this.Cn=t.m()}};Pl(Qr,["kickback","radius","cGroup","gravity","bCoef","invMass","damping","acceleration","kickingAcceleration","kickingDamping","kickStrength"],[]);zs.NY=Qr});var $n=O((gy,Ds)=>{var{JSON5:Ml,E:dl}=P(),{Ht:Xn,Ke:El,q:ui}=$(),{w:jl,Integer:Q,fh:T}=j(),Yn=Y(),{J:_l,K:Il}=ci(),{Point:Wn,Ys:U,xe:z,$s:D,Ko:Qn,be:vi,Zs:Ji}=mi(),bs=xs(),pi=ot(),Bl=t=>{for(var i=0,n=0;n<t.length;n++)i+=t[n],i+=i<<10,i^=i>>>6;return i=(i+=i<<3)^i>>>11,i+=i<<15,i|0};function m(){this.C=[],this.O=[],this.Q=[],this.Pt=[],this.p=[],this.yt=[],this.Dt=[],this.at=[],this.Pi=new bs,this.Yr=255,this.On=0,this.Vi=0,this.Fn=!0,this.un=!1,this.name="",this.di=0,this.Ki=0,this.Si=0,this.Ji=0,this.Wi=0,this.Qi=0,this.Xi=0,this.Yi=0,this.bt=0,this.hn=0}m.il=jl.L(1024);m.a=function(t){var i=t.T();return i==255?(i=new m,i.nl(t),i):m.uu()[i]};m.uu=function(){if(m.hi==null){m.hi=[];var t=new m,i;for(t.Rn("Classic",420,200,370,170,64,75),m.hi.push(t),t=new m,t.Rn("Easy",420,200,370,170,90,75),m.hi.push(t),t=new m,t.Rn("Small",420,200,320,130,55,70),m.hi.push(t),t=new m,t.Rn("Big",600,270,550,240,80,80),m.hi.push(t),t=new m,t.Rn("Rounded",420,200,370,170,64,75,75),m.hi.push(t),t=new m,t.Oh("Hockey",420,204,398,182,68,120,75,100),m.hi.push(t),t=new m,t.Oh("Big Hockey",600,270,550,240,90,160,75,150),m.hi.push(t),t=new m,t.Rn("Big Easy",600,270,550,240,95,80),m.hi.push(t),t=new m,t.Rn("Big Rounded",600,270,550,240,80,75,100),m.hi.push(t),t=new m,t.Rn("Huge",750,350,700,320,100,80),m.hi.push(t),t=0,i=m.hi.length;t<i;){var n=t++;m.hi[n].Yr=n}}return m.hi};m.rl=function(t,i){var n=i[t.trait];if(n)for(var r=0,e=Object.keys(n);r<e.length;r++){var s=e[r];t[s]==null&&(t[s]=n[s])}};m.el=function(t){if(t==63)return["all"];var i=[];return t&2&&i.push("red"),t&4&&i.push("blue"),t&1&&i.push("ball"),t&8&&i.push("redKO"),t&16&&i.push("blueKO"),t&32&&i.push("wall"),t&64&&i.push("kick"),t&128&&i.push("score"),t&268435456&&i.push("c0"),t&536870912&&i.push("c1"),t&1073741824&&i.push("c2"),t&-2147483648&&i.push("c3"),i};m.fn=function(t){t=T(t,Array);for(var i=0,n=0;n<t.length;)switch(t[n++]){case"all":i|=63;break;case"ball":i|=1;break;case"blue":i|=4;break;case"blueKO":i|=16;break;case"c0":i|=268435456;break;case"c1":i|=536870912;break;case"c2":i|=1073741824;break;case"c3":i|=-2147483648;break;case"kick":i|=64;break;case"red":i|=2;break;case"redKO":i|=8;break;case"score":i|=128;break;case"wall":i|=32}return i};m.ji=function(t,i,n,r){n!=r&&(t[i]=m.el(n))};m.ur=function(t,i,n){i!=n&&(t.color=m.sl(i))};m.sl=function(t){return t|=0,0>t?"transparent":_l.Xs(t)};m.ts=function(t){if(t=="transparent")return-1;if(typeof t=="string")return Il.parseInt("0x"+t);if(t instanceof Array)return((t[0]|0)<<16)+((t[1]|0)<<8)+(t[2]|0);throw new ui(Xn(Yn.BadColorError))};m.Rh=function(t){var i={x:t.e.x,y:t.e.y};return m.I(i,"bCoef",t.h,1),m.ji(i,"cMask",t.u,63),m.ji(i,"cGroup",t.f,32),i};m.ul=function(t){var i=new U;i.e.x=T(t.x,Number),i.e.y=T(t.y,Number);var n=t.bCoef;return n!=null&&(i.h=T(n,Number)),n=t.cMask,n!=null&&(i.u=m.fn(n)),t=t.cGroup,t!=null&&(i.f=m.fn(t)),i};m.Ph=function(t){var i=new U;i.e.x=T(t.x,Number),i.e.y=T(t.y,Number);var n=t.bCoef;return n!=null&&(i.h=T(n,Number)),n=t.cMask,n!=null&&(i.u=T(n,Q)),t=t.cGroup,t!=null&&(i.f=T(t,Q)),i};m.hl=function(t,i){var n={v0:t.Z.id,v1:t.z.id};m.I(n,"bias",t.Wt,i.Wt),m.I(n,"bCoef",t.h,i.h);var r=t.getCurveDegrees();return m.I(n,"curve",r,0),r!=0&&(n.curveF=t.dt),m.I(n,"vis",t.Nt,i.Nt),m.ji(n,"cMask",t.u,i.u),m.ji(n,"cGroup",t.f,i.f),m.ur(n,t.N,i.N),n};m.fl=function(t,i,n){var[r,e]=t.findVertexIndicesOfSegmentObj(i),s={v0:r,v1:e};m.I(s,"bias",i.Wt,n.Wt),m.I(s,"bCoef",i.h,n.h);var u=i.getCurveDegrees();return m.I(s,"curve",u,0),u!=0&&(s.curveF=i.dt),m.I(s,"vis",i.Nt,n.Nt),m.ji(s,"cMask",i.u,n.u),m.ji(s,"cGroup",i.f,n.f),m.ur(s,i.N,n.N),s};m.ol=function(t,i){var n=new z,r=T(t.v1,Q);n.Z=i[T(t.v0,Q)],n.z=i[r],r=t.bias;var e=t.bCoef,s=t.curve,u=t.curveF,h=t.vis,l=t.cMask,o=t.cGroup,v=t.color;return r!=null&&(n.Wt=T(r,Number)),e!=null&&(n.h=T(e,Number)),u!=null?n.dt=T(u,Number):s!=null&&n.Ai(T(s,Number)),h!=null&&(n.Nt=T(h,Boolean)),l!=null&&(n.u=m.fn(l)),o!=null&&(n.f=m.fn(o)),v!=null&&(n.N=m.ts(v)),n};m.Ah=function(t,i){var n=new z,r=T(t.v1,Q);n.Z=i[T(t.v0,Q)],n.z=i[r],r=t.bias;var e=t.bCoef,s=t.curve,u=t.curveF,h=t.vis,l=t.cMask,o=t.cGroup,v=t.color;return r!=null&&(n.Wt=T(r,Number)),e!=null&&(n.h=T(e,Number)),u!=null?n.dt=T(u,Number):s!=null&&n.Ai(T(s,Number)),h!=null&&(n.Nt=T(h,Boolean)),l!=null&&(n.u=T(l,Q)),o!=null&&(n.f=T(o,Q)),v!=null&&(n.N=T(v,Q)),n};m.ll=function(t){var i=new z,n=t.v1;i.Z=t.v0,i.z=n,n=t.bias;var r=t.bCoef,e=t.curve,s=t.curveF,u=t.vis,h=t.cMask,l=t.cGroup,o=t.color;return n!=null&&(i.Wt=T(n,Number)),r!=null&&(i.h=T(r,Number)),s!=null?i.dt=T(s,Number):e!=null&&i.Ai(T(e,Number)),u!=null&&(i.Nt=T(u,Boolean)),h!=null&&(i.u=T(h,Q)),l!=null&&(i.f=T(l,Q)),o!=null&&(i.N=T(o,Q)),i};m.Mh=function(t){var i={d0:t.d0,d1:t.d1,length:t.minLength>=t.maxLength?t.minLength:[t.minLength,t.maxLength]};return m.ur(i,t.color,0),m.I(i,"strength",t.strength,1/0),i};m.cl=function(t,i){var n=new Ji,r=T(t.d0,Q),e=T(t.d1,Q),s=t.color,u=t.strength,h=t.length;if(r>=i.length||0>r)throw new ui(null);if(e>=i.length||0>e)throw new ui(null);return n.Zt=r,n.$t=e,h==null?(r=i[r],h=i[e],r==null||h==null?n.It=n.Bt=100:(e=r.e,h=h.e,r=e.x-h.x,e=e.y-h.y,n.It=n.Bt=Math.sqrt(r*r+e*e))):h instanceof Array?(n.Bt=T(h[0],Number),n.It=T(h[1],Number)):n.It=n.Bt=T(h,Number),n.Mi=u==null||u=="rigid"?1/0:T(u,Number),s!=null&&(n.N=m.ts(s)),n};m.dh=function(t,i){var n=new Ji,r=T(t.d0,Q),e=T(t.d1,Q),s=t.color,u=t.strength,h=t.length;if(r>=i.length||0>r)throw new ui(null);if(e>=i.length||0>e)throw new ui(null);return n.Zt=r,n.$t=e,h==null?(r=i[r],h=i[e],r==null||h==null?n.It=n.Bt=100:(e=r.e,h=h.e,r=e.x-h.x,e=e.y-h.y,n.It=n.Bt=Math.sqrt(r*r+e*e))):h instanceof Array?(n.Bt=T(h[0],Number),n.It=T(h[1],Number)):n.It=n.Bt=T(h,Number),n.Mi=u==null||u=="rigid"?1/0:T(u,Number),s!=null&&(n.N=T(s,Q)),n};m.vl=function(t){var i=new Ji,n=t.d0,r=t.d1,e=t.color,s=t.strength,u=t.length;return i.d0Obj=n,i.d1Obj=r,u==null?(u=r,n==null||u==null?i.It=i.Bt=100:(r=n.e,u=u.e,n=r.x-u.x,r=r.y-u.y,i.It=i.Bt=Math.sqrt(n*n+r*r))):u instanceof Array?(i.Bt=T(u[0],Number),i.It=T(u[1],Number)):i.It=i.Bt=T(u,Number),i.Mi=s==null||s=="rigid"?1/0:T(s,Number),e!=null&&(i.N=T(e,Q)),i};m.Eh=function(t){var i={normal:[t.b.x,t.b.y],dist:t.st};return m.I(i,"bCoef",t.h,1),m.ji(i,"cMask",t.u,63),m.ji(i,"cGroup",t.f,32),i};m.pl=function(t){var i=new D,n=T(t.normal,Array),r=T(n[0],Number);n=T(n[1],Number);var e=i.b,s=Math.sqrt(r*r+n*n);return e.x=r/s,e.y=n/s,i.st=T(t.dist,Number),r=t.bCoef,n=t.cMask,t=t.cGroup,r!=null&&(i.h=T(r,Number)),n!=null&&(i.u=m.fn(n)),t!=null&&(i.f=m.fn(t)),i};m.jh=function(t){var i=new D,n=T(t.normal,Array),r=T(n[0],Number);n=T(n[1],Number);var e=i.b,s=Math.sqrt(r*r+n*n);return e.x=r/s,e.y=n/s,i.st=T(t.dist,Number),r=t.bCoef,n=t.cMask,t=t.cGroup,r!=null&&(i.h=T(r,Number)),n!=null&&(i.u=T(n,Q)),t!=null&&(i.f=T(t,Q)),i};m._h=function(t){return{p0:[t.ni.x,t.ni.y],p1:[t.ri.x,t.ri.y],team:t.R==pi.red?"red":"blue"}};m.ip=function(t){var i=new Qn,n=T(t.p0,Array),r=T(t.p1,Array),e=i.ni;switch(e.x=n[0],e.y=n[1],n=i.ri,n.x=r[0],n.y=r[1],t.team){case"blue":t=pi.blue;break;case"red":t=pi.red;break;default:throw new ui(Xn(Yn.BadTeamError))}return i.R=t,i};m.Ih=function(t){var i={};return m.I(i,"bCoef",t.h,.5),m.I(i,"invMass",t.U,.5),m.I(i,"damping",t.Y,.96),m.I(i,"acceleration",t.mn,.1),m.I(i,"kickingAcceleration",t.gn,.07),m.I(i,"kickingDamping",t.kn,.96),m.I(i,"kickStrength",t.qn,5),m.ji(i,"cGroup",t.f,0),(t.P.x!=0||t.P.y!=0)&&(i.gravity=[t.P.x,t.P.y]),m.I(i,"radius",t.B,15),m.I(i,"kickback",t.Cn,0),i};m.wl=function(t){var i=new bs,n=t.bCoef,r=t.invMass,e=t.damping,s=t.acceleration,u=t.kickingAcceleration,h=t.kickingDamping,l=t.kickStrength,o=t.gravity,v=t.cGroup,y=t.radius;return t=t.kickback,n!=null&&(i.h=T(n,Number)),r!=null&&(i.U=T(r,Number)),e!=null&&(i.Y=T(e,Number)),s!=null&&(i.mn=T(s,Number)),u!=null&&(i.gn=T(u,Number)),h!=null&&(i.kn=T(h,Number)),l!=null&&(i.qn=T(l,Number)),o!=null&&(n=i.P,r=T(o[1],Number),n.x=T(o[0],Number),n.y=r),v!=null&&(i.f=m.fn(v)),y!=null&&(i.B=T(y,Number)),t!=null&&(i.Cn=T(t,Number)),i};m.Bh=function(t,i){var n={};return(t.e.x!=i.e.x||t.e.y!=i.e.y)&&(n.pos=[t.e.x,t.e.y]),(t.A.x!=i.A.x||t.A.y!=i.A.y)&&(n.speed=[t.A.x,t.A.y]),(t.P.x!=i.P.x||t.P.y!=i.P.y)&&(n.gravity=[t.P.x,t.P.y]),m.I(n,"radius",t.B,i.B),m.I(n,"bCoef",t.h,i.h),m.I(n,"invMass",t.U,i.U),m.I(n,"damping",t.Y,i.Y),m.ur(n,t.N,i.N),m.ji(n,"cMask",t.u,i.u),m.ji(n,"cGroup",t.f,i.f),n};m.Gh=function(t,i){var n=t.pos,r=t.speed,e=t.gravity,s=t.radius,u=t.bCoef,h=t.invMass,l=t.damping,o=t.color,v=t.cMask,y=t.cGroup;if(n!=null){var C=i.e;C.x=n[0],C.y=n[1]}return r!=null&&(n=i.A,n.x=r[0],n.y=r[1]),e!=null&&(r=i.P,r.x=e[0],r.y=e[1]),s!=null&&(i.B=T(s,Number)),u!=null&&(i.h=T(u,Number)),h!=null&&(i.U=T(h,Number)),l!=null&&(i.Y=T(l,Number)),o!=null&&(i.N=m.ts(o)),v!=null&&(i.u=m.fn(v)),y!=null&&(i.f=m.fn(y)),i};m.hu=function(t,i){var n=t.pos,r=t.speed,e=t.gravity,s=t.radius,u=t.bCoef,h=t.invMass,l=t.damping,o=t.color,v=t.cMask,y=t.cGroup;if(n!=null){var C=i.e;C.x=n[0],C.y=n[1]}return r!=null&&(n=i.A,n.x=r[0],n.y=r[1]),e!=null&&(r=i.P,r.x=e[0],r.y=e[1]),s!=null&&(i.B=T(s,Number)),u!=null&&(i.h=T(u,Number)),h!=null&&(i.U=T(h,Number)),l!=null&&(i.Y=T(l,Number)),o!=null&&(i.N=T(o,Q)),v!=null&&(i.u=T(v,Q)),y!=null&&(i.f=T(y,Q)),i};m.I=function(t,i,n,r){n!=r&&(t[i]=n)};m.prototype={is:function(){var t=new vi;return t.N=16777215,t.u=63,t.f=193,t.B=10,t.Y=.99,t.U=1,t.h=.5,t},$:function(t){if(t.o(this.Yr),!this.fu()){t.si(this.name),t.G(this.Si),t.g(this.Wi),t.g(this.Qi),t.g(this.Xi),t.g(this.Yi),t.g(this.hn),t.G(this.Ji),t.g(this.di),t.g(this.Ki),t.g(this.bt),this.Pi.$(t),t.Ft(this.On),t.o(this.Vi),t.o(this.Fn?1:0),t.o(this.un?1:0),t.o(this.C.length);for(var i=0,n=this.C.length;i<n;){var r=i++,e=this.C[r];e.id=r,e.$(t)}for(t.o(this.O.length),i=0,n=this.O;i<n.length;)n[i++].$(t);for(t.o(this.Q.length),i=0,n=this.Q;i<n.length;)n[i++].$(t);for(t.o(this.Pt.length),i=0,n=this.Pt;i<n.length;)n[i++].$(t);for(t.o(this.p.length),i=0,n=this.p;i<n.length;)n[i++].$(t);for(t.o(this.yt.length),i=0,n=this.yt;i<n.length;)n[i++].$(t);for(t.o(this.Dt.length),i=0,n=this.Dt;i<n.length;)r=n[i],++i,t.g(r.x),t.g(r.y);for(t.o(this.at.length),i=0,n=this.at;i<n.length;)r=n[i],++i,t.g(r.x),t.g(r.y)}},nl:function(t){function i(){for(var s=[],u=t.T(),h=0;h<u;){++h;var l=new Wn(0,0);l.x=t.m(),l.y=t.m(),s.push(l)}return s}this.name=t.ei(),this.Si=t.M(),this.Wi=t.m(),this.Qi=t.m(),this.Xi=t.m(),this.Yi=t.m(),this.hn=t.m(),this.Ji=t.M(),this.di=t.m(),this.Ki=t.m(),this.bt=t.m(),this.Pi.a(t),this.On=t.At(),this.Vi=t.T(),this.Fn=t.T()!=0,this.un=t.T()!=0,this.C=[];for(var n=t.T(),r=0;r<n;){var e=new U;e.a(t),e.id=r++,this.C.push(e)}for(this.O=[],n=t.T(),r=0;r<n;)++r,e=new z,e.a(t,this.C),this.O.push(e);for(this.Q=[],n=t.T(),r=0;r<n;)++r,e=new D,e.a(t),this.Q.push(e);for(this.Pt=[],n=t.T(),r=0;r<n;)++r,e=new Qn,e.a(t),this.Pt.push(e);for(this.p=[],n=t.T(),r=0;r<n;)++r,e=new vi,e.a(t),this.p.push(e);for(this.yt=[],n=t.T(),r=0;r<n;)++r,e=new Ji,e.a(t),this.yt.push(e);this.Dt=i(),this.at=i(),this.calculateNormals()},calculateNormals:function(){for(var t=0,i=this.O;t<i.length;)i[t++].calculateNormals()},fu:function(){return this.Yr!=255},hr:function(t,i,n){return t=t[i],t!=null?T(t,Number):n},yl:function(t,i,n){return t=t[i],t!=null?T(t,Boolean):n},ql:function(){return JSON.stringify(this.Cl())},Cl:function(){for(var t={},i=0,n=[],r=0,e=this.C,s,u,h,l,o,v,y,C;r<e.length;)s=e[r],++r,s.id=i++,n.push(m.Rh(s));for(r=new z,i=[],e=0,s=this.O;e<s.length;)i.push(m.hl(s[e++],r));for(r=[],e=0,s=this.Q;e<s.length;)r.push(m.Eh(s[e++]));for(e=[],s=0,u=this.Pt;s<u.length;)e.push(m._h(u[s++]));for(s=m.Ih(this.Pi),h=new vi,u=[],l=0,o=this.p;l<o.length;)u.push(m.Bh(o[l++],h));for(h=[],l=0,o=this.yt;l<o.length;)h.push(m.Mh(o[l++]));for(l=[],o=0,v=this.Dt;o<v.length;)y=v[o],++o,l.push([y.x,y.y]);for(o=[],v=0,y=this.at;v<y.length;)C=y[v],++v,o.push([C.x,C.y]);switch(n={name:this.name,width:this.di,height:this.Ki,bg:t,vertexes:n,segments:i,planes:r,goals:e,discs:u,playerPhysics:s,ballPhysics:"disc0"},m.I(n,"maxViewWidth",this.On,0),m.I(n,"cameraFollow",this.Vi==1?"player":"",""),m.I(n,"spawnDistance",this.bt,200),h.length!=0&&(n.joints=h),l.length!=0&&(n.redSpawnPoints=l),o.length!=0&&(n.blueSpawnPoints=o),m.I(n,"kickOffReset",this.un?"full":"partial","partial"),this.Si){case 1:i="grass";break;case 2:i="hockey";break;default:i="none"}return m.I(t,"type",i,"none"),m.I(t,"width",this.Wi,0),m.I(t,"height",this.Qi,0),m.I(t,"kickOffRadius",this.Xi,0),m.I(t,"cornerRadius",this.Yi,0),m.ur(t,this.Ji,7441498),m.I(t,"goalLine",this.hn,0),n},gl:function(t){function i(h){var l=T(h[0],Number);return h=T(h[1],Number),new Wn(l,h)}function n(h,l,o,v){v==null&&(v=!1);var y=e[l];if((!v||y!=null)&&(v=T(y,Array),v!=null))for(y=0;y<v.length;){var C=v[y];++y;try{m.rl(C,u),h.push(o(C))}catch{throw new ui(new El(Xn(Yn.StadiumParseError,l,h.length)))}}}var r=this,e=Ml.parse(t);this.C=[],this.O=[],this.Q=[],this.Pt=[],this.p=[],this.yt=[],this.name=T(e.name,String),this.di=T(e.width,Number),this.Ki=T(e.height,Number),this.On=this.hr(e,"maxViewWidth",0)|0,e.cameraFollow=="player"&&(this.Vi=1),this.bt=200,t=e.spawnDistance,t!=null&&(this.bt=T(t,Number)),t=e.bg;var s;switch(t.type){case"grass":s=1;break;case"hockey":s=2;break;default:s=0}this.Si=s,this.Wi=this.hr(t,"width",0),this.Qi=this.hr(t,"height",0),this.Xi=this.hr(t,"kickOffRadius",0),this.Yi=this.hr(t,"cornerRadius",0),this.Ji=7441498,t.color!=null&&(this.Ji=m.ts(t.color)),this.hn=this.hr(t,"goalLine",0),this.Fn=this.yl(e,"canBeStored",!0),this.un=e.kickOffReset=="full";var u=e.traits||{};if(t=e.ballPhysics,t!="disc0"&&(t!=null?(t=m.Gh(t,this.is()),t.f|=192,this.p.push(t)):this.p.push(this.is())),n(this.C,"vertexes",m.ul),n(this.O,"segments",function(h){return m.ol(h,r.C)}),n(this.Pt,"goals",m.ip),n(this.p,"discs",function(h){return m.Gh(h,new vi)}),n(this.Q,"planes",m.pl),n(this.yt,"joints",function(h){return m.cl(h,r.p)},!0),n(this.Dt,"redSpawnPoints",i,!0),n(this.at,"blueSpawnPoints",i,!0),t=e.playerPhysics,t!=null&&(this.Pi=m.wl(t)),this.C.length>255||this.O.length>255||this.Q.length>255||this.Pt.length>255||this.p.length<1||this.p.length>255)throw new ui(Xn(Yn.StadiumLimitsExceededError));this.calculateNormals()},ml:function(){var t=m.il;return t.l=0,this.$(t),Bl(t._t())},Rn:function(t,i,n,r,e,s,u,h){h==null&&(h=0),this.name=t,this.p.push(this.is()),this.di=i,this.Ki=n,this.Si=1,this.Ji=7441498,this.Wi=r,this.Qi=e,this.Xi=u,this.Yi=h,this.bt=.75*r,this.bt>400&&(this.bt=400),t=new D;var l=t.b,o,v,y,C;l.x=0,l.y=1,t.st=-n,t.h=0,this.Q.push(t),t=new D,l=t.b,l.x=0,l.y=-1,t.st=-n,t.h=0,this.Q.push(t),t=new D,l=t.b,l.x=1,l.y=0,t.st=-i,t.h=0,this.Q.push(t),t=new D,l=t.b,l.x=-1,l.y=0,t.st=-i,t.h=0,this.Q.push(t),this.ns(r,1,s,13421823,pi.blue),this.ns(-r,-1,s,16764108,pi.red),this.Vh(u,n),i=new D,n=i.b,n.x=0,n.y=1,i.st=-e,i.u=1,this.Q.push(i),i=new D,n=i.b,n.x=0,n.y=-1,i.st=-e,i.u=1,this.Q.push(i),i=new U,n=i.e,n.x=-r,n.y=-e,i.u=0,n=new U,u=n.e,u.x=r,u.y=-e,n.u=0,u=new U,t=u.e,t.x=r,t.y=-s,u.u=0,t=new U,l=t.e,l.x=r,l.y=s,t.u=0,l=new U,o=l.e,o.x=r,o.y=e,l.u=0,o=new U,v=o.e,v.x=-r,v.y=e,o.u=0,v=new U,y=v.e,y.x=-r,y.y=s,v.u=0,y=new U,C=y.e,C.x=-r,C.y=-s,y.u=0,s=new z,s.Z=n,s.z=u,s.u=1,s.Nt=!1,C=new z,C.Z=t,C.z=l,C.u=1,C.Nt=!1;var k=new z;k.Z=o,k.z=v,k.u=1,k.Nt=!1;var f=new z;f.Z=y,f.z=i,f.u=1,f.Nt=!1,this.C.push(i),this.C.push(n),this.C.push(u),this.C.push(t),this.C.push(l),this.C.push(o),this.C.push(v),this.C.push(y),this.O.push(s),this.O.push(C),this.O.push(k),this.O.push(f),this.Lh(r,e,h),this.calculateNormals()},Oh:function(t,i,n,r,e,s,u,h,l){this.name=t,this.p.push(this.is()),this.di=i,this.Ki=n,this.Si=2,this.Wi=r,this.Qi=e,this.Xi=h,this.Yi=l,this.hn=u,this.bt=.75*(r-u),400<this.bt&&(this.bt=400),t=new D;var o=t.b;o.x=0,o.y=1,t.st=-n,t.h=0,this.Q.push(t),t=new D,o=t.b,o.x=0,o.y=-1,t.st=-n,t.h=0,this.Q.push(t),t=new D,o=t.b,o.x=1,o.y=0,t.st=-i,t.h=0,this.Q.push(t),t=new D,o=t.b,o.x=-1,o.y=0,t.st=-i,t.h=0,this.Q.push(t),this.ns(r-u,1,s,13421823,pi.blue,63),this.ns(-r+u,-1,s,16764108,pi.red,63),this.Vh(h,n),i=new D,n=i.b,n.x=0,n.y=1,i.st=-e,i.u=1,this.Q.push(i),i=new D,n=i.b,n.x=0,n.y=-1,i.st=-e,i.u=1,this.Q.push(i),i=new D,n=i.b,n.x=1,n.y=0,i.st=-r,i.u=1,this.Q.push(i),i=new D,n=i.b,n.x=-1,n.y=0,i.st=-r,i.u=1,this.Q.push(i),this.Lh(r,e,l),this.calculateNormals()},ns:function(t,i,n,r,e,s,u){u==null&&(u=32),s==null&&(s=1);var h=new U,l=h.e,o,v,y,C,k;for(l.x=t+8*i,l.y=-n,l=new U,o=l.e,o.x=t+8*i,o.y=n,v=new U,o=v.e,o.x=h.e.x+22*i,o.y=h.e.y+22,y=new U,o=y.e,o.x=l.e.x+22*i,o.y=l.e.y-22,o=new z,o.Z=h,o.z=v,o.Ai(90*i),C=new z,C.Z=y,C.z=v,k=new z,k.Z=y,k.z=l,k.Ai(90*i),i=this.C.length,this.C.push(h),this.C.push(l),this.C.push(v),this.C.push(y),h=i,i=this.C.length;h<i;)l=h++,this.C[l].u=s,this.C[l].f=u,this.C[l].h=.1;for(i=this.O.length,this.O.push(o),this.O.push(C),this.O.push(k),h=i,i=this.O.length;h<i;)l=h++,this.O[l].u=s,this.O[l].f=u,this.O[l].h=.1;s=new vi,u=s.e,u.x=t,u.y=-n,s.U=0,s.B=8,s.N=r,this.p.push(s),s=new vi,u=s.e,u.x=t,u.y=n,s.U=0,s.B=8,s.N=r,this.p.push(s),r=new Qn,s=r.ni,s.x=t,s.y=-n,s=r.ri,s.x=t,s.y=n,r.R=e,this.Pt.push(r)},Vh:function(t,i){var n=new U,r=n.e,e,s,u;r.x=0,r.y=-i,n.h=.1,n.f=24,n.u=6,r=new U,e=r.e,e.x=0,e.y=-t,r.h=.1,r.f=24,r.u=6,e=new U,s=e.e,s.x=0,s.y=t,e.h=.1,e.f=24,e.u=6,s=new U,u=s.e,u.x=0,u.y=i,s.h=.1,s.f=24,s.u=6,u=new z,u.Z=n,u.z=r,u.f=24,u.u=6,u.Nt=!1,u.h=.1;var h=new z;h.Z=e,h.z=s,h.f=24,h.u=6,h.Nt=!1,h.h=.1;var l=new z;l.Z=r,l.z=e,l.f=8,l.u=6,l.Nt=!1,l.Ai(180),l.h=.1;var o=new z;o.Z=e,o.z=r,o.f=16,o.u=6,o.Nt=!1,o.Ai(180),o.h=.1,this.C.push(n),this.C.push(r),this.C.push(e),this.C.push(s),this.O.push(u),this.O.push(h),this.O.push(l),this.O.push(o)},Lh:function(t,i,n){if(!(0>=n)){var r=new U,e=r.e,s,u,h,l,o,v,y;e.x=-t+n,e.y=-i,r.u=0,e=new U,s=e.e,s.x=-t,s.y=-i+n,e.u=0,s=new U,u=s.e,u.x=-t+n,u.y=i,s.u=0,u=new U,l=u.e,l.x=-t,l.y=i-n,u.u=0,l=new U,o=l.e,o.x=t-n,o.y=i,l.u=0,o=new U,h=o.e,h.x=t,h.y=i-n,o.u=0,h=new U,v=h.e,v.x=t-n,v.y=-i,h.u=0,v=new U,y=v.e,y.x=t,y.y=-i+n,v.u=0,t=new z,t.Z=r,t.z=e,t.u=1,t.Nt=!1,t.h=1,t.Ai(-90),i=new z,i.Z=s,i.z=u,i.u=1,i.Nt=!1,i.h=1,i.Ai(90),n=new z,n.Z=l,n.z=o,n.u=1,n.Nt=!1,n.h=1,n.Ai(-90),y=new z,y.Z=h,y.z=v,y.u=1,y.Nt=!1,y.h=1,y.Ai(90),this.C.push(r),this.C.push(e),this.C.push(s),this.C.push(u),this.C.push(l),this.C.push(o),this.C.push(h),this.C.push(v),this.O.push(t),this.O.push(i),this.O.push(n),this.O.push(y)}},copy:function(){var t=new m,i=this;t.Yr=i.Yr,t.name=i.name,t.Si=i.Si,t.Wi=i.Wi,t.Qi=i.Qi,t.Xi=i.Xi,t.Yi=i.Yi,t.hn=i.hn,t.Ji=i.Ji,t.di=i.di,t.Ki=i.Ki,t.bt=i.bt;var n=t.Pi,r=i.Pi;return n.h=r.h,n.U=r.U,n.Y=r.Y,n.mn=r.mn,n.gn=r.gn,n.kn=r.kn,n.qn=r.qn,n.P.x=r.P.x,n.P.y=r.P.y,n.f=r.f,n.B=r.B,n.Cn=r.Cn,t.On=i.On,t.Vi=i.Vi,t.Fn=i.Fn,t.un=i.un,t.C=i.C.map((e,s)=>{var u=new U;return u.e.x=e.e.x,u.e.y=e.e.y,u.h=e.h,u.u=e.u,u.f=e.f,u.id=s,u}),t.O=i.O.map(e=>{var s=new z,u=e.Z,h=e.z,l=-1,o=-1;return i.C.forEach((v,y)=>{v==u?l=y:v==h&&(o=y)}),s.Z=t.C[l],s.z=t.C[o],s.Wt=e.Wt,s.dt=e.dt,s.N=e.N,s.Nt=e.Nt,s.h=e.h,s.u=e.u,s.f=e.f,s}),t.Q=i.Q.map(e=>{var s=new D;return s.b.x=e.b.x,s.b.y=e.b.y,s.st=e.st,s.h=e.h,s.u=e.u,s.f=e.f,s}),t.Pt=i.Pt.map(e=>{var s=new Qn;return s.ni.x=e.ni.x,s.ni.y=e.ni.y,s.ri.x=e.ri.x,s.ri.y=e.ri.y,s.R=e.R,s}),t.p=i.p.map(e=>{var s=new vi;return s.e.x=e.e.x,s.e.y=e.e.y,s.A.x=e.A.x,s.A.y=e.A.y,s.P.x=e.P.x,s.P.y=e.P.y,s.B=e.B,s.h=e.h,s.U=e.U,s.Y=e.Y,s.N=e.N,s.u=e.u,s.f=e.f,s}),t.yt=i.yt.map(e=>{var s=new Ji;return s.Zt=e.Zt,s.$t=e.$t,s.Bt=e.Bt,s.It=e.It,s.Mi=e.Mi,s.N=e.N,s}),t.Dt=i.Dt.map(e=>new Wn(e.x,e.y)),t.at=i.at.map(e=>new Wn(e.x,e.y)),t.calculateNormals(),t}};Object.defineProperty(m.prototype,"isCustom",{get:function(){return!this.fu()}});dl(m,["vertices","segments","planes","goals","discs","joints","redSpawnPoints","blueSpawnPoints","playerPhysics","defaultStadiumId","maxViewWidth","cameraFollow","canBeStored","fullKickOffReset","name","width","height","bgType","bgColor","bgWidth","bgHeight","bgKickOffRadius","bgCornerRadius","spawnDistance","bgGoalLine"],[]);Ds.NY=m});var iu=O((my,tu)=>{var{pako:as,E:Gl}=P(),{Event:Xr,gt:Vl}=B(),Ll=F(),Fl=$n(),{F:Ul,w:Hl,extend:Kl}=j();function Gt(){this.V=0,this.S=null,this.i=0}Gt.create=function(t){var i=new Gt;return i.S=t,i};Gt.prototype=Kl(Xr.prototype,{apply:function(t){if(t.Ni(this.i,8)){var i=t.getPlayer(this.i);t.s==null&&(t.S=this.S,t.$r?.(i,this.S))}},ht:function(t){var i=Hl.L();this.S.$(i),i=as.deflateRaw(i._t()),t.Ft(i.byteLength),t.Yt(i)},ft:function(t){t=as.inflateRaw(t.Lt(t.At())),this.S=Fl.a(new Ul(new DataView(t.buffer,t.byteOffset,t.byteLength)))},copy:function(){return Vl(Gt.create(this.S?.copy()),this)},it:Gt});Object.defineProperty(Gt.prototype,"eventType",{get(){return Ll.SetStadium}});Gt.pt=Xr.qt({vt:!1,lt:!1,nu:{ru:10,eu:2e3}});Xr.Ct(Gt);Gl(Gt,[null,"stadium","byId"],[]);tu.NY=Gt});var ru=O((ky,nu)=>{var{E:Jl}=P(),{Event:$r,gt:Wl}=B(),Ql=F(),{extend:Xl}=j(),Yr=ot();function Vt(){this.V=0,this._=0,this.R=null,this.i=0}Vt.create=function(t,i){var n=new Vt;return n._=t,n.R=i,n};Vt.prototype=Xl($r.prototype,{apply:function(t){var i=t.getPlayer(this._);if(i!=null){var n=t.getPlayer(this.i),r=t.Ni(this.i,1);(r=r||i==n&&!t.on&&t.s==null)&&i.R!=this.R&&(t.rs(n,i,this.R),t.Zr?.(this._,this.R.id,this.i))}},ht:function(t){t.G(this._),t.o(this.R.id)},ft:function(t){this._=t.M(),t=t.Pr(),this.R=t==1?Yr.red:t==2?Yr.blue:Yr.spec},copy:function(){return Wl(Vt.create(this._,this.R),this)},it:Vt});Object.defineProperty(Vt.prototype,"eventType",{get(){return Ql.SetPlayerTeam}});Vt.pt=$r.qt({vt:!1,lt:!1});$r.Ct(Vt);Jl(Vt,[null,"playerId","team","byId"],[]);nu.NY=Vt});var su=O((Ny,eu)=>{var{E:Yl}=P(),{Event:Zr,gt:$l}=B(),Zl=F(),{extend:zl}=j();function Lt(){this.V=0,this.ii=0,this.i=0}Lt.create=function(t){var i=new Lt;return i.ii=t,i};Lt.prototype=zl(Zr.prototype,{apply:function(t){t.Ni(this.i,2)&&(t.on=this.ii,t.zr?.(this.ii,this.i))},ht:function(t){t.o(this.ii?1:0)},ft:function(t){this.ii=t.T()!=0},copy:function(){return $l(Lt.create(this.ii),this)},it:Lt});Object.defineProperty(Lt.prototype,"eventType",{get(){return Zl.SetTeamsLock}});Lt.pt=Zr.qt({vt:!1,lt:!1});Zr.Ct(Lt);Yl(Lt,[null,"newValue","byId"],[]);eu.NY=Lt});var hu=O((Sy,uu)=>{var{E:xl}=P(),{Event:zr,gt:bl}=B(),Dl=F(),{extend:al}=j();function Ft(){this.V=0,this._=0,this.value=0,this.i=0}Ft.create=function(t,i){var n=new Ft;return n._=t,n.value=i,n};Ft.prototype=al(zr.prototype,{apply:function(t){if(t.Ni(this.i,4)){var i=t.getPlayer(this.i),n=t.getPlayer(this._);n!=null&&n.id!=0&&n.wi!=this.value&&(n.wi=this.value,t.xr?.(i,n))}},ht:function(t){t.G(this._),t.o(this.value?1:0)},ft:function(t){this._=t.M(),this.value=t.T()!=0},copy:function(){return bl(Ft.create(this._,this.value),this)},it:Ft});Object.defineProperty(Ft.prototype,"eventType",{get(){return Dl.SetPlayerAdmin}});Ft.pt=zr.qt({vt:!1,lt:!1});zr.Ct(Ft);xl(Ft,[null,"playerId","value","byId"],[]);uu.NY=Ft});var ou=O((Ty,fu)=>{var{E:tc}=P(),{Event:xr,gt:ic}=B(),nc=F(),{extend:rc}=j(),at=ot();function Ut(){this.V=0,this.i=0}Ut.create=function(){return new Ut};Ut.prototype=rc(xr.prototype,{apply:function(t){if(t.Ni(this.i,1)){for(var i=t.getPlayer(this.i),n=t.d,r=[],e=0,s=0,u=0;u<n.length;){var h=n[u];++u,h.R==at.spec&&r.push(h),h.R==at.red?++e:h.R==at.blue&&++s}n=r.length;var l;n!=0&&(s==e?2>n||(t.rs(i,r[0],at.red),t.rs(i,r[1],at.blue),t.fr?.(r[0].id,at.red.id,r[1].id,at.blue.id,this.i)):(l=s>e?at.red:at.blue,t.rs(i,r[0],l),t.fr?.(r[0].id,l.id,null,null,this.i)))}},ht:function(){},ft:function(){},copy:function(){return ic(Ut.create(),this)},it:Ut});Object.defineProperty(Ut.prototype,"eventType",{get(){return nc.AutoTeams}});Ut.pt=xr.qt({vt:!1,lt:!1});xr.Ct(Ut);tc(Ut,[null,"byId"],[]);fu.NY=Ut});var cu=O((Oy,lu)=>{var{E:ec}=P(),{Event:br,gt:sc}=B(),uc=F(),{extend:hc}=j();function Ht(){this.V=0,this.value=!1,this.i=0}Ht.create=function(t){var i=new Ht;return i.value=t,i};Ht.prototype=hc(br.prototype,{apply:function(t){var i=t.getPlayer(this.i);i!=null&&this.value!=i.Ei&&(i.Ei=this.value,t.br?.(i))},ht:function(t){t.o(this.value?1:0)},ft:function(t){this.value=t.T()!=0},copy:function(){return sc(Ht.create(this.value),this)},it:Ht});Object.defineProperty(Ht.prototype,"eventType",{get(){return uc.SetPlayerSync}});Ht.pt=br.qt({vt:!1,lt:!1});br.Ct(Ht);ec(Ht,[null,"value","byId"],[]);lu.NY=Ht});var pu=O((Ry,vu)=>{var{E:fc}=P(),{Event:Dr,gt:oc}=B(),lc=F(),{extend:cc}=j();function Kt(){this.V=0,this.values=null,this.i=0}Kt.prototype=cc(Dr.prototype,{apply:function(t){if(this.i==0){var i=t;t=t.d;for(var n=0,r=t.length;n<r;){var e=n++;if(e>=this.values.length)break;t[e].rr=this.values[e]}i.Dr?.(this.values)}},ht:function(t){t.Ut(this.values.length);for(var i=0,n=this.values;i<n.length;)t.Ut(n[i++])},ft:function(t){this.values=[];for(var i=t.Kt(),n=0;n<i;)++n,this.values.push(t.Kt())},copy:function(){var t=new Kt,i=this.values;t.values=[];for(var n=i.length,r=0;r<n;r++)t.values.push(i[r]);return oc(t,this)},it:Kt});Kt.create=function(t){for(var i=new Kt,n=t.t.d,r=[],e=0;e<n.length;){var s=t.Un.get(n[e++].id);r.push(s==null?t.t.Fh&&t.t.Fh():s.rr)}return i.values=r,i};Object.defineProperty(Kt.prototype,"eventType",{get(){return lc.Ping}});Kt.pt=Dr.qt({vt:!1,lt:!1});Dr.Ct(Kt);fc(Kt,[null,"values","byId"],[]);vu.NY=Kt});var yu=O((Py,wu)=>{var{E:vc}=P(),{Event:ar,gt:pc}=B(),wc=F(),{extend:yc,In:qc}=j();function Jt(){this.V=0,this.value=null,this.i=0}Jt.create=function(t){var i=new Jt;return i.value=t,i};Jt.prototype=yc(ar.prototype,{apply:function(t){var i=t.getPlayer(this.i);i!=null&&(i.mt=this.value,t.ar?.(this.i,this.value))},ht:function(t){t.si(this.value)},ft:function(t){this.value=t.ei(),this.value!=null&&(this.value=qc(this.value,2))},copy:function(){return pc(Jt.create(this.value),this)},it:Jt});Object.defineProperty(Jt.prototype,"eventType",{get(){return wc.SetAvatar}});Jt.pt=ar.qt({vt:!1,lt:!1});ar.Ct(Jt);vc(Jt,[null,"value","byId"],[]);wu.NY=Jt});var zn=O((Ay,qu)=>{var{E:Cc}=P(),gc=Y(),{Ht:mc,q:kc}=$();function Zn(){this.te=0,this.pi=16777215,this._i=[]}Zn.prototype={$:function(t){t.o(this.te),t.G(this.pi),t.o(this._i.length),this._i.forEach(i=>{t.G(i)})},a:function(t){this.te=t.T(),this.pi=t.M();var i=t.T();if(i>3)throw new kc(mc(gc.TeamColorsReadError));this._i=[];for(var n=0;n<i;n++)this._i.push(t.M())},copy:function(){var t=new Zn;return t.te=this.te,t.pi=this.pi,t._i=this._i.slice(),t}};Cc(Zn,["angle","text","inner"],[]);qu.NY=Zn});var mu=O((My,gu)=>{var{E:Nc}=P(),{Event:ie,gt:Sc}=B(),Tc=Y(),{q:Oc,Ht:Rc}=$(),Pc=F(),{extend:Ac}=j(),{K:te}=ci(),Wi=ot(),Cu=zn();function yt(){this.V=0,this.R=null,this.Hn=null,this.i=0}yt.create=function(t,i){var n=new yt;return n.R=t,n.Hn=i,n};yt.prototype=Ac(ie.prototype,{apply:function(t){t.Ni(this.i,2)&&this.R!=Wi.spec&&(t.Ii[this.R.id]=this.Hn,t.ie?.(this.R.id,this.Hn,this.i))},ht:function(t){t.o(this.R.id),this.Hn.$(t)},ft:function(t){var i=t.Pr();this.R=i==1?Wi.red:i==2?Wi.blue:Wi.spec,this.Hn=new Cu,this.Hn.a(t)},copy:function(){return Sc(yt.create(this.R,this.Hn?.copy()),this)},it:yt});Object.defineProperty(yt.prototype,"eventType",{get(){return Pc.SetTeamColors}});yt.createFromData=function(t,i,...n){var r=new Cu,e=Wi.i[t];if(!e)throw new Oc(Rc(Tc.ChangeTeamColorsInvalidTeamIdError));r._i=[e.N];var s=yt.create(e,r),u=n.length;if(u<1)return s;if(u>4&&(u=4),r.te=256*te.parseInt(i)/360|0,r.pi=te.parseInt("0x"+n[0]),1<u){r._i=[];for(var h=1,l=u;h<l;)r._i.push(te.parseInt("0x"+n[h++]))}return s};yt.pt=ie.qt({vt:!1,lt:!1});ie.Ct(yt);Nc(yt,[null,"team","colors","byId"],[]);gu.NY=yt});var Nu=O((dy,ku)=>{var{E:Mc}=P(),{Event:ne,gt:dc}=B(),Ec=F(),{extend:jc}=j();function Wt(){this.V=0,this.$i=null,this.Kn=!0,this.i=0}Wt.create=function(t,i){for(var n=new Wt,r=new Set,e=0,s,u;e<t.length;)r.add(t[e++]);for(t=[],e=0,r=r.values(),s=r.next();!s.done&&(u=s.value,s=r.next(),t.push(u),++e,!(e>=40)););return n.$i=t,n.Kn=i,n};Wt.prototype=jc(ne.prototype,{apply:function(t){if(this.i==0){for(var i=new Map,n=0,r=t.d;n<r.length;){var e=r[n];++n,i.set(e.id,e)}for(n=[],r=0,e=this.$i;r<e.length;){var s=e[r];++r;var u=i.get(s);u!=null&&(i.delete(s),n.push(u))}for(r=[],i=i.values(),e=i.next();!e.done;)s=e.value,e=i.next(),r.push(s);t.d=this.Kn?n.concat(r):r.concat(n),t.ne?.(this.$i,this.Kn)}},ht:function(t){t.o(this.Kn?1:0),t.o(this.$i.length);for(var i=0,n=this.$i;i<n.length;)t.G(n[i++])},ft:function(t){this.Kn=t.T()!=0;var i=t.T();this.$i=[];for(var n=0;n<i;)++n,this.$i.push(t.M())},copy:function(){var t=new Wt;t.Kn=this.Kn;var i=this.$i;t.$i=[];for(var n=i.length,r=0;r<n;r++)t.$i.push(i[r]);return dc(t,this)},it:Wt});Object.defineProperty(Wt.prototype,"eventType",{get(){return Ec.ReorderPlayers}});Wt.pt=ne.qt({vt:!1,lt:!1});ne.Ct(Wt);Mc(Wt,[null,"playerIdList","moveToTop","byId"],[]);ku.NY=Wt});var Tu=O((Ey,Su)=>{var{E:_c}=P(),{Event:re,gt:Ic}=B(),Bc=F(),{extend:Gc}=j();function Qt(){this.V=0,this.min=0,this.re=0,this.ee=0,this.i=0}Qt.create=function(t,i,n){var r=new Qt;return r.min=t,r.re=i,r.ee=n,r};Qt.prototype=Gc(re.prototype,{apply:function(t){t.Ni(this.i,2)&&t.kl(t.getPlayer(this.i),this.min,this.re,this.ee)},ht:function(t){t.G(this.min),t.G(this.re),t.G(this.ee)},ft:function(t){this.min=t.M(),this.re=t.M(),this.ee=t.M()},copy:function(){return Ic(Qt.create(this.min,this.re,this.ee),this)},it:Qt});Object.defineProperty(Qt.prototype,"eventType",{get(){return Bc.SetKickRateLimit}});Qt.pt=re.qt({vt:!1,lt:!1});re.Ct(Qt);_c(Qt,[null,"min","rate","burst","byId"],[]);Su.NY=Qt});var Pu=O((jy,Ru)=>{var{E:Vc}=P(),{Event:ee,gt:Lc}=B(),Fc=F(),{extend:Uc,In:Ou}=j();function Xt(){this.V=0,this.mt="",this._=0,this.i=0}Xt.create=function(t,i){var n=new Xt;return n.mt=i!=null?Ou(i,2):null,n._=t,n};Xt.prototype=Uc(ee.prototype,{apply:function(t){t=t.getPlayer(this._),t!=null&&this.i==0&&(t.Vn=this.mt,t.se?.(this._,this.mt))},ht:function(t){t.si(this.mt),t.G(this._)},ft:function(t){this.mt=t.ei(),this._=t.M(),this.mt!=null&&(this.mt=Ou(this.mt,2))},copy:function(){return Lc(Xt.create(this._,this.mt),this)},it:Xt});Object.defineProperty(Xt.prototype,"eventType",{get(){return Fc.SetHeadlessAvatar}});Xt.pt=ee.qt({vt:!1,lt:!1});ee.Ct(Xt);Vc(Xt,[null,"avatar","playerId","byId"],[]);Ru.NY=Xt});var Mu=O((_y,Au)=>{var{E:Hc}=P(),{Event:se,gt:Kc}=B(),Jc=F(),{extend:Wc}=j();function it(){this.V=0,this.id=0,this.type=!1,this.nt=null,this.Xt=null,this.i=0}it.create=function(t,i,n){var r=new it;for(r.id=t,r.type=i,r.nt=[n.x,n.y,n.xspeed,n.yspeed,n.xgravity,n.ygravity,n.radius,n.bCoeff,n.invMass,n.damping],r.Xt=[n.color,n.cMask,n.cGroup],t=0,i=r.nt.length;t<i;){n=t++;var e=r.nt[n];e!=null&&(it.Uh[0]=e,r.nt[n]=it.Uh[0])}for(t=0,i=r.Xt.length;t<i;)n=t++,e=r.Xt[n],e!=null&&(it.Hh[0]=e,r.Xt[n]=it.Hh[0]);return r};it.prototype=Wc(se.prototype,{apply:function(t){if(this.i==0){var i=t.s,n=t;if(i!=null){if(this.type){if(t=t.getPlayer(this.id),t==null)return;t=t.H}else t=i.c.p[this.id];t!=null&&(this.nt[0]!=null&&(t.e.x=this.nt[0]),this.nt[1]!=null&&(t.e.y=this.nt[1]),this.nt[2]!=null&&(t.A.x=this.nt[2]),this.nt[3]!=null&&(t.A.y=this.nt[3]),this.nt[4]!=null&&(t.P.x=this.nt[4]),this.nt[5]!=null&&(t.P.y=this.nt[5]),this.nt[6]!=null&&(t.B=this.nt[6]),this.nt[7]!=null&&(t.h=this.nt[7]),this.nt[8]!=null&&(t.U=this.nt[8]),this.nt[9]!=null&&(t.Y=this.nt[9]),this.Xt[0]!=null&&(t.N=this.Xt[0]),this.Xt[1]!=null&&(t.u=this.Xt[1]),this.Xt[2]!=null&&(t.f=this.Xt[2]),n.ue?.(this.id,this.type,this.nt,this.Xt))}}},ht:function(t){t.G(this.id),t.o(this.type?1:0);var i=t.l;t.Ft(0);for(var n=0,r=1,e=0,s=this.nt;e<s.length;){var u=s[e];++e,u!=null&&(n|=r,t.Ws(u)),r<<=1}for(e=0,s=this.Xt;e<s.length;)u=s[e],++e,u!=null&&(n|=r,t.G(u)),r<<=1;r=t.l,t.l=i,t.Ft(n),t.l=r},ft:function(t){this.id=t.M(),this.type=t.T()!=0;var i=t.At();this.nt=[];for(var n=0;10>n;){var r=n++;this.nt[r]=null,i&1&&(this.nt[r]=t.Ks()),i>>>=1}for(this.Xt=[],n=0;3>n;)r=n++,this.Xt[r]=null,i&1&&(this.Xt[r]=t.M()),i>>>=1},copy:function(){var t=new it;t.id=this.id,t.type=this.type;var i=this.nt;t.nt=[];for(var n=i.length,r=0;r<n;r++)t.nt.push(i[r]);for(i=this.Xt,t.Xt=[],n=i.length,r=0;r<n;r++)t.Xt.push(i[r]);return Kc(t,this)},it});Object.defineProperty(it.prototype,"eventType",{get(){return Jc.SetDiscProperties}});it.Uh=new Float32Array(1);it.Hh=new Int32Array(1);it.pt=se.qt({vt:!1,lt:!1});se.Ct(it);Hc(it,[null,"id","type","data1","data2","byId"],[]);Au.NY=it});var Eu=O((Iy,du)=>{var{E:Qc}=P(),{Event:ue,gt:Xc}=B(),Yc=F(),{extend:$c}=j();function Yt(){this.V=0,this.type=0,this.data=null,this.i=0}Yt.create=function(t,i){var n=new Yt;return n.type=t,n.data=i,n};Yt.prototype=$c(ue.prototype,{apply:function(t){this.i!=0&&!t.getPlayer(this.i)||t.he?.(this.type,this.data,this.i)},ht:function(t){t.kt(this.type),t.ci(JSON.stringify(this.data))},ft:function(t){this.type=t.ut(),this.data=JSON.parse(t.li())},copy:function(){return Xc(Yt.create(this.type,JSON.parse(JSON.stringify(this.data))),this)},it:Yt});Object.defineProperty(Yt.prototype,"eventType",{get(){return Yc.CustomEvent}});Yt.pt=ue.qt({vt:!1,lt:!1});ue.Ct(Yt);Qc(Yt,[null,"type","data","byId"],[]);du.NY=Yt});var Iu=O((By,_u)=>{var{pako:ju,E:Zc}=P(),{Event:he,gt:zc}=B(),xc=F(),{F:bc,w:Dc,extend:ac}=j();function $t(){this.V=0,this.type=0,this.data=null,this.i=0}$t.create=function(t,i){var n=new $t;return n.type=t,n.data=i,n};$t.prototype=ac(he.prototype,{apply:function(t){this.i!=0&&!t.getPlayer(this.i)||t.fe?.(this.type,this.data,this.i)},ht:function(t){var i=Dc.L();i.kt(this.type),i.Yt(this.data),i=ju.deflateRaw(i._t()),t.kt(i.byteLength),t.Yt(i)},ft:function(t){t=ju.inflateRaw(t.Lt(t.ut()));var i=new bc(new DataView(t.buffer,t.byteOffset,t.byteLength));this.type=i.ut(),this.data=i.Lt()},copy:function(){var t=new Uint8Array;return t.set(this.data),zc($t.create(this.type,t),this)},it:$t});Object.defineProperty($t.prototype,"eventType",{get(){return xc.BinaryCustomEvent}});$t.pt=he.qt({vt:!1,lt:!1});he.Ct($t);Zc($t,[null,"type","data","byId"],[]);_u.NY=$t});var Gu=O((Gy,Bu)=>{var{E:tv}=P(),{Event:fe,gt:iv}=B(),nv=F(),{extend:rv}=j();function Zt(){this.V=0,this.id=0,this.data=null,this.i=0}Zt.create=function(t,i){var n=new Zt;return n.id=t,n.data=i,n};Zt.prototype=rv(fe.prototype,{apply:function(t){if(this.i==0){var i=t.getPlayer(this.id);i!=null&&(i.su=this.data,t.oe?.(this.id,this.data,this.i))}},ht:function(t){t.kt(this.id),t.ci(JSON.stringify(this.data))},ft:function(t){this.id=t.ut(),this.data=JSON.parse(t.li())},copy:function(){return iv(Zt.create(this.id,JSON.parse(JSON.stringify(this.data))),this)},it:Zt});Object.defineProperty(Zt.prototype,"eventType",{get(){return nv.SetPlayerIdentity}});Zt.pt=fe.qt({vt:!1,lt:!1});fe.Ct(Zt);tv(Zt,[null,"id","data","byId"],[]);Bu.NY=Zt});var hi=O((Vy,xn)=>{xn.NY=xn.Nl||(xn.Nl={ou:As(),le:ds(),Kh:js(),es:Is(),lu:Gs(),ce:Fs(),ve:Hs(),ss:Js(),us:Qs(),hs:Ys(),fs:Zs(),pe:iu(),we:ru(),os:su(),cu:hu(),ls:ou(),cs:cu(),vu:pu(),pu:yu(),wu:mu(),Jh:Nu(),yu:Tu(),qu:Pu(),Cu:Mu(),CustomEvent:Eu(),BinaryCustomEvent:Iu(),vs:Gu()})});var Fu=O((Ly,Lu)=>{var{E:ev}=P(),{Point:sv,xs:Vu,zs:uv}=mi(),st=ot();function ut(){this.ui=-1,this.tt=null,this.xt=0,this.Zi=0,this.Ti=0,this.Oi=0,this.Pn=st.red,this.t=0,this.Ri=0,this.c=new Vu,this.Mt=0,this.Gt=5,this.S=null,this.ot=null}ut.Wh=function(){for(var t=[],i=0;i<256;i++)t.push(new sv(0,0));return t}();ut.Qh=function(){for(var t=[],i=0;i<256;i++)t.push(0);return t}();ut.Di=function(t,i,n){t.ot=i.ot.Ci(n),t.Gt=i.Gt,t.Mt=i.Mt,t.c=i.c.Ci(n),t.Ri=i.Ri,t.t=i.t,t.Oi=i.Oi,t.Ti=i.Ti,t.Zi=i.Zi,t.xt=i.xt,t.S=i.S,t.Pn=i.Pn};ut.prototype={Sl:function(t){this.ot=t,this.Gt=t.Gt,this.Mt=t.Mt,this.S=t.S,this.c=Vu.Uo(t.S),this.Xh()},Yh:function(t){t.R==st.spec?this.c.Ch(t,this.ot.Tn):this.c.Fo(t,this.S,this.ot.ye)},Tl:function(t,i){return this.S.Pt.find(n=>n._o(t,i))?.R||st.spec},ze:function(t){var i=this;if(i.xt>0)i.xt<120&&i.xt--;else{var n=i.S.Pi,r=i.ot.d;switch(i.ot.qe?.(),r.forEach(e=>{var{H:s}=e;if(s){if(e.Tt&16||(e.gi=!1),e.Fi>0&&e.Fi--,e.Ui<i.ot.An&&e.Ui++,e.gi&&e.Fi<=0&&e.Ui>=0){var u=!1;i.c.p.forEach(h=>{h!=s&&h.f&64&&i.c.kickBall(s,h,n)&&(u=!0)}),u&&(i.ot.Ce?.(e),e.gi=!1,e.Fi=i.ot.ln,e.Ui-=i.ot.zi)}i.c.Lo(e,n)}}),c=0,i.c.p.forEach((e,s)=>{e.f&128&&(ut.Qh[c]=s,s=ut.Wh[c],s.x=e.e.x,s.y=e.e.y,c++)}),i.c.ze(t,i.ot),i.t){case 0:{r.forEach(e=>{e.H&&(e.H.u=39|i.Pn.u)}),i.c.p[0].Bo()&&(i.t=1,i.ot.ge?.());break}case 1:{for(i.Zi+=.016666666666666666,r.forEach(e=>{e.H&&(e.H.u=39)}),d=st.spec,r=i.c.p,t=0;t<c&&d==st.spec;t++)d=i.Tl(r[ut.Qh[t]].e,ut.Wh[t]);d!=st.spec?(i.t=2,i.Ri=150,i.Pn=d,d==st.red?i.Ti++:i.Oi++,i.ot.me?.(d==st.red?st.blue:st.red),i.ot.Ol?.(d.id)):i.Mt>0&&i.Zi>=60*i.Mt&&i.Oi!=i.Ti&&(i.ot.ke?.(),i.$h());break}case 2:{i.Ri--,i.Ri<=0&&(i.Gt>0&&(i.Oi>=i.Gt||i.Ti>=i.Gt)||i.Mt>0&&i.Zi>=60*i.Mt&&i.Oi!=i.Ti?i.$h():(i.Xh(),i.ot.Ne?.()));break}case 3:{i.Ri--,i.Ri<=0&&i.ot.s!=null&&(i.ot.s=null,i.ot.d.forEach(e=>{e.H&&i.ot.Tn?.(e),e.H=null,e.ki=0}),i.ot.sr?.(null));break}}}},$h:function(){this.Ri=300,this.t=3,this.ot.Se?.(this.Oi>this.Ti?st.red:st.blue)},Xh:function(){var t=this,{p:i,un:n,Dt:r,at:e,bt:s}=t.S,u=t.c.p,h=n?i.length:1,l,o;t.t=0;for(var v=0;v<h;v++)i[v].yh(u[v]);var y=[0,0,0];t.ot.d.forEach(C=>{t.Yh(C);var{id:k,vh:f}=C.R;if(k!=0){var{e:p}=C.H;l=y[k],o=k==1?r:e,o.length==0?(o=l+1>>1,l&1||(o=-o),p.x=s*f,p.y=55*o):(l>=o.length&&(l=o.length-1),l=o[l],p.x=l.x,p.y=l.y),C.ki=++y[k]}})},$:function(t){this.c.$(t),t.G(this.Ri),t.G(this.t),t.G(this.Oi),t.G(this.Ti),t.g(this.Zi),t.G(this.xt),t.o(this.Pn.id)},a:function(t,i){this.c.a(t),this.Ri=t.M(),this.t=t.M(),this.Oi=t.M(),this.Ti=t.M(),this.Zi=t.m(),this.xt=t.M();var n=t.Pr();this.Pn=n==1?st.red:n==2?st.blue:st.spec,this.ot=i,this.Gt=i.Gt,this.Mt=i.Mt,this.S=i.S,this.c.C=this.S.C,this.c.O=this.S.O,this.c.Q=this.S.Q,this.c.yt=this.S.yt},Ci:function(t){return t!=this.ui&&(this.tt||(this.tt=new ut),this.ui=t,ut.Di(this.tt,this,t)),this.tt},copy:function(t){var i=new ut;return i.c.p=this.c.p.map(n=>{var r=new uv;return r.e.x=n.e.x,r.e.y=n.e.y,r.A.x=n.A.x,r.A.y=n.A.y,r.P.x=n.P.x,r.P.y=n.P.y,r.B=n.B,r.h=n.h,r.U=n.U,r.Y=n.Y,r.N=n.N,r.u=n.u,r.f=n.f,r._=n._,r}),i.Ri=this.Ri,i.t=this.t,i.Oi=this.Oi,i.Ti=this.Ti,i.Zi=this.Zi,i.xt=this.xt,i.Pn=this.Pn,i.ot=t||this.ot,i.Gt=i.ot.Gt,i.Mt=i.ot.Mt,i.S=i.ot.S,i.c.C=i.S.C,i.c.O=i.S.O,i.c.Q=i.S.Q,i.c.yt=i.S.yt,i}};ut.prototype.advance=ut.prototype.ze;ev(ut,[null,"ext","pauseGameTickCounter","timeElapsed","blueScore","redScore","goalConcedingTeam","state","goalTickCounter","physicsState","timeLimit","scoreLimit","stadium",null],[]);Lu.NY=ut});var Ri=O((Fy,Qu)=>{var{E:hv}=P(),{D:fv,F:ov,w:Uu,Integer:oe,fh:x}=j(),{Point:lv,xe:cv,be:bn}=mi(),{ce:vv,ve:pv,we:Hu}=hi(),I=$n(),fi=ot(),Ku=Jn(),Ju=zn(),Wu=Fu();function wi(){this.ui=-1,this.tt=null,this.S=I.uu()[0],this.ln=2,this.zi=0,this.An=1,this.Mt=3,this.Gt=3,this.on=!1,this.s=null,this.d=[],this.name="",this.Ii=[null,new Ju,new Ju],this.Ii[1]._i.push(fi.red.N),this.Ii[2]._i.push(fi.blue.N)}wi.Di=function(t,i,n){if(t.name=i.name,i.d==null)t.d=null;else{t.d==null&&(t.d=[]);for(var r=t.d,e=i.d,s=e.length,u;r.length>s;)r.pop();for(s=0,u=e.length;s<u;){var h=s++;r[h]=e[h].Ci(n)}}t.s=i.s==null?null:i.s.Ci(n),t.on=i.on,t.Gt=i.Gt,t.Mt=i.Mt,t.An=i.An,t.zi=i.zi,t.ln=i.ln,t.S=i.S,t.Ii=i.Ii};wi.prototype={ao:function(t){if(this.s==null){this.s=new Wu;for(var i=0,n=this.d;i<n.length;){var r=n[i];++i,r.H=null,r.ki=0}this.s.Sl(this),this.Te?.(t)}},rs:function(t,i,n){if(i.R!=n&&(i.R=n,fv.remove(this.d,i),this.d.push(i),!!this.s)){this.s.c.Ch(i,this.Tn),this.s.Yh(i);for(var r=0,e=!1,s,u;!e;)for(++r,e=!0,s=0,u=this.d;s<u.length;){var h=u[s];if(++s,h!=i&&h.R==i.R&&h.ki==r){e=!1;break}}i.ki=r}},getPlayer:function(t){for(var i=0,n=this.d;i<n.length;){var r=n[i];if(++i,r.id==t)return r}return null},ct:function(t){this.s!=null&&this.s.ze(t)},$:function(t){t.si(this.name),t.o(this.on?1:0),t.G(this.Gt),t.G(this.Mt),t.Js(this.An),t.o(this.zi),t.o(this.ln),this.S.$(t),t.o(this.s!=null?1:0),this.s!=null&&this.s.$(t),t.o(this.d.length);for(var i=0,n=this.d;i<n.length;)n[i++].ht(t);this.Ii[1].$(t),this.Ii[2].$(t)},a:function(t){this.name=t.ei(),this.on=t.T()!=0,this.Gt=t.M(),this.Mt=t.M(),this.An=t.Hs(),this.zi=t.T(),this.ln=t.T(),this.S=I.a(t);var i=t.T()!=0,n,r;for(this.s=null,i&&(this.s=new Wu,this.s.a(t,this)),i=this.s==null?null:this.s.c.p,n=t.T(),r=this.d;r.length>n;)r.pop();for(r=0;r<n;){var e=new Ku;e.ft(t,i),this.d[r++]=e}this.Ii[1].a(t),this.Ii[2].a(t)},Zh:function(){var t=0,i=Uu.L();for(this.$(i),i=i.So();4<=i.v.byteLength-i.l;)t^=i.M();return t},Rl:function(){var t=Uu.L(4);return t.G(this.Zh()),t.We()},bo:function(t){t=new ov(new DataView(t)).M(),this.zh?.(this.Zh()!=t)},xh:function(t){this.Ol=t},Ni:function(t){return t==0?!0:(t=this.getPlayer(t),!!(t!=null&&t.wi))},kl:function(t,i,n,r){this.ln=0>i?0:255<i?255:i,this.zi=0>n?0:255<n?255:n,r=0>r?0:100<r?100:r,this.An=this.zi*r,this.Oe?.(t,this.ln,this.zi,r)},Ci:function(t){return t!=this.ui&&(this.tt||(this.tt=new wi),this.ui=t,wi.Di(this.tt,this,t)),this.tt},copy:function(){var t=new wi;return t.name=this.name,t.on=this.on,t.Gt=this.Gt,t.Mt=this.Mt,t.An=this.An,t.zi=this.zi,t.ln=this.ln,t.S=this.S?.copy(),t.s=this.s?.copy(t),t.d=[],this.d.forEach((i,n)=>{var r=new Ku;if(r.wi=i.wi,r.ki=i.ki,r.mt=i.mt,r.Vn=i.Vn,r.Ei=i.Ei,r.Ot=i.Ot,r.er=i.er,r.name=i.name,r.Tt=i.Tt,r.id=i.id,r.gi=i.gi,r.Ui=i.Ui,r.Fi=i.Fi,r.R=i.R,r.Qt=i.Qt,r.Sn=i.Sn,r.sn=i.sn,t.s&&i.H){var e=i.H._,s=t.s.c.p.findIndex(u=>u._==e);s>-1&&(r.H=t.s.c.p[s])}t.d[n]=r}),this.Ii.forEach((i,n)=>{t.Ii[n]=i?.copy()}),t},exportStadium:function(){if(this.s){var{S:t,c:i}=this.s,n=new cv,r=new bn,e={},s=t.Dt.map(o=>[o.x,o.y]),u=t.at.map(o=>[o.x,o.y]),h=i.yt.map(I.Mh);I.I(e,"type",t.Si==1?"grass":t.Si==2?"hockey":"none","none"),I.I(e,"width",t.Wi,0),I.I(e,"height",t.Qi,0),I.I(e,"kickOffRadius",t.Xi,0),I.I(e,"cornerRadius",t.Yi,0),I.ur(e,t.Ji,7441498),t.Si==2&&I.I(e,"goalLine",t.hn,0);var l={name:t.name,width:t.di,height:t.Ki,vertexes:i.C.map((o,v)=>{var y=I.Rh(o);return y.id=v,y}),segments:i.O.map(o=>I.fl(this,o,n)),planes:i.Q.map(I.Eh),goals:t.Pt.map(I._h),discs:i.p.map(o=>I.Bh(o,r)),bg:e,playerPhysics:I.Ih(t.Pi),ballPhysics:"disc0"};return I.I(l,"maxViewWidth",t.On,0),I.I(l,"cameraFollow",t.Vi==1?"player":"",""),I.I(l,"spawnDistance",t.bt,200),h.length>0&&(l.joints=h),s.length>0&&(l.redSpawnPoints=s),u.length>0&&(l.blueSpawnPoints=u),I.I(l,"kickOffReset",t.un?"full":"partial","partial"),!t.Fn&&(l.canBeStored=!1),l}},createVertex:function(t){return I.Ph(t)},createSegment:function(t){var i=I.Ah(t,this.s.c.C);return i.calculateNormals(),i},createSegmentFromObj:function(t){var i=I.ll(t,this.s.c.C);return i.calculateNormals(),i},createGoal:function(t){return I.ip(t)},createPlane:function(t){return I.jh(t)},createDisc:function(t){return I.hu(t,new bn).Vo()},createJoint:function(t){return I.dh(t,this.s.c.p)},createJointFromObj:function(t){return I.vl(t,this.s.c.p)},addVertex:function(t){this.s.c.C.push(this.createVertex(t))},addSegment:function(t){this.s.c.O.push(this.createSegment(t))},addGoal:function(t){this.s.S.Pt.push(this.createGoal(t))},addPlane:function(t){this.s.c.Q.push(this.createPlane(t))},addDisc:function(t){var i=this.createDisc(t),n=this.s.c.p.findIndex(s=>s._!=null);n<0&&(n=this.s.c.p.length),this.s.c.p.splice(n,0,i);for(var r=this.s.c.yt,e=this.s.c.p.length-2;e>=n;e--)r.forEach(s=>{s.Zt==e&&s.Zt++,s.$t==e&&s.$t++})},addJoint:function(t){this.s.c.yt.push(this.createJoint(t))},addSpawnPoint:function(t){var i;t.team=="red"?i=this.s.S.Dt:t.team=="blue"&&(i=this.s.S.at),i&&i.push(new lv(t.x,t.y))},addPlayer:function(t){var{team:i,id:n,name:r,avatar:e,flag:s}=t,u=i=="spec"?fi.spec:i=="red"?fi.red:i=="blue"?fi.blue:null;if(u){var h=vv.create(n,r,s,e,"fakeConn","fakeAuth");h.i=0,h.apply(this),i!="spec"&&(h=Hu.create(n,u),h.i=0,h.apply(this),this.updateDiscObj(this.getPlayer(n).H,t))}},findVertexIndicesOfSegmentObj:function(t){var i=t.Z,n=t.z,r=-1,e=-1;return this.s.c.C.forEach((s,u)=>{s==i?r=u:s==n&&(e=u)}),[r,e]},findVertexIndicesOfSegment:function(t){return this.findVertexIndicesOfSegmentObj(this.s.c.O[t])},updateVertex:function(t,i){var n=this.s.c.C[t];if(n){var r=I.Ph(i);i.hasOwnProperty("x")&&(n.e.x=r.e.x),i.hasOwnProperty("y")&&(n.e.y=r.e.y),i.hasOwnProperty("bCoef")&&(n.h=r.h),i.hasOwnProperty("cMask")&&(n.u=r.u),i.hasOwnProperty("cGroup")&&(n.f=r.f),this.s.c.O.forEach(e=>{(e.z==n||e.Z==n)&&e.calculateNormals()})}},updateSegment:function(t,i){var n=this.s.c.O[t];if(n){var r=I.Ah(i,this.s.c.C);(i.hasOwnProperty("v0")||i.hasOwnProperty("curve"))&&(n.Z=r.Z),(i.hasOwnProperty("v1")||i.hasOwnProperty("curve"))&&(n.z=r.z),(i.hasOwnProperty("bias")||i.hasOwnProperty("curve"))&&(n.Wt=r.Wt),(i.hasOwnProperty("curveF")||i.hasOwnProperty("curve"))&&(n.dt=r.dt),i.hasOwnProperty("vis")&&(n.Nt=r.Nt),i.hasOwnProperty("color")&&(n.N=r.N),i.hasOwnProperty("bCoef")&&(n.h=r.h),i.hasOwnProperty("cMask")&&(n.u=r.u),i.hasOwnProperty("cGroup")&&(n.f=r.f),n.calculateNormals()}},updateGoal:function(t,i){var n=this.s.S.Pt[t];if(n){var r=I.ip(i);i.hasOwnProperty("p0")&&(n.ni=r.ni),i.hasOwnProperty("p1")&&(n.ri=r.ri),i.hasOwnProperty("team")&&(n.R=r.R)}},updatePlane:function(t,i){var n=this.s.c.Q[t];if(n){var r=I.jh(i);i.hasOwnProperty("normal")&&(n.b=r.b),i.hasOwnProperty("dist")&&(n.st=r.st),i.hasOwnProperty("bCoef")&&(n.h=r.h),i.hasOwnProperty("cMask")&&(n.u=r.u),i.hasOwnProperty("cGroup")&&(n.f=r.f)}},updateDisc:function(t,i){this.updateDiscObj(this.s.c.p[t],i)},updateDiscObj:function(t,i){if(t){var n=I.hu(i,new bn);i.hasOwnProperty("pos")&&(t.e=n.e),i.hasOwnProperty("speed")&&(t.A=n.A),i.hasOwnProperty("gravity")&&(t.P=n.P),i.hasOwnProperty("radius")&&(t.B=n.B),i.hasOwnProperty("invMass")&&(t.U=n.U),i.hasOwnProperty("damping")&&(t.Y=n.Y),i.hasOwnProperty("color")&&(t.N=n.N),i.hasOwnProperty("bCoef")&&(t.h=n.h),i.hasOwnProperty("cMask")&&(t.u=n.u),i.hasOwnProperty("cGroup")&&(t.f=n.f)}},updateJoint:function(t,i){var n=this.s.c.yt[t];if(n){var r=I.dh(i,this.s.c.p);i.hasOwnProperty("d0")&&(n.Zt=r.Zt),i.hasOwnProperty("d1")&&(n.$t=r.$t),i.hasOwnProperty("color")&&(n.N=r.N),i.hasOwnProperty("strength")&&(n.Mi=r.Mi),i.hasOwnProperty("length")&&(n.It=r.It,n.Bt=r.Bt)}},updateSpawnPoint:function(t,i,n){var r,e;if(i=="red"?r=this.s.S.Dt:i=="blue"&&(r=this.s.S.at),n.team=="red"?e=this.s.S.Dt:n.team=="blue"&&(e=this.s.S.at),!(!r||!e)){var s;r==e?s=r[t]:s=r.splice(t,1)[0],s&&(n.hasOwnProperty("x")&&(s.x=n.x),n.hasOwnProperty("y")&&(s.y=n.y),r!=e&&e.push(s))}},updatePlayer:function(t,i){var n=this.getPlayer(t);if(n){var r=null;if(i.hasOwnProperty("team")&&(r=i.team=="spec"?fi.spec:i.team=="red"?fi.red:i.team=="blue"?fi.blue:null),i.hasOwnProperty("name")&&(n.name=i.name),i.hasOwnProperty("flag")&&(n.Ot=i.flag),i.hasOwnProperty("avatar")&&(n.mt=i.avatar),r!=null){var e=Hu.create(t,r);e.i=0,e.apply(this)}n.H!=null&&this.updateDiscObj(n.H,i)}},removeVertex:function(t){var i=this.s.c.C.splice(t,1)[0];if(i){var n=this.s.c.O,r=[];n.forEach((e,s)=>{(e.z==i||e.Z==i)&&r.unshift(s)}),r.forEach(e=>n.splice(e,1))}},removeSegment:function(t){this.s.c.O.splice(t,1)},removeGoal:function(t){this.s.S.Pt.splice(t,1)},removePlane:function(t){this.s.c.Q.splice(t,1)},removeDisc:function(t){this.s.c.p.splice(t,1);var i=this.s.c.yt,n=[];i.forEach((e,s)=>{(e.Zt==t||e.$t==t)&&n.unshift(s)}),n.forEach(e=>i.splice(e,1));for(var r=t+1;r<=this.s.c.p.length;r++)i.forEach(e=>{e.Zt==r&&e.Zt--,e.$t==r&&e.$t--})},removeJoint:function(t){this.s.c.yt.splice(t,1)},removeSpawnPoint:function(t,i){var n;i=="red"?n=this.s.S.Dt:i=="blue"&&(n=this.s.S.at),n&&n.splice(t,1)},removePlayer:function(t){var i=pv.create(t,null,!0);i.i=0,i.apply(this)},updateStadiumPlayerPhysics:function(t){var i=this.s?.S.Pi;if(i){var n=I.hu(t,new bn);t.hasOwnProperty("radius")&&(i.B=n.B),t.hasOwnProperty("gravity")&&(i.P=n.P),t.hasOwnProperty("invMass")&&(i.U=n.U),t.hasOwnProperty("bCoef")&&(i.h=n.h),t.hasOwnProperty("cGroup")&&(i.f=n.f),t.hasOwnProperty("damping")&&(i.Y=n.Y),t.hasOwnProperty("kickingDamping")&&(i.kn=x(t.kickingDamping,Number)),t.hasOwnProperty("acceleration")&&(i.mn=x(t.acceleration,Number)),t.hasOwnProperty("kickingAcceleration")&&(i.gn=x(t.kickingAcceleration,Number)),t.hasOwnProperty("kickStrength")&&(i.qn=x(t.kickStrength,Number)),t.hasOwnProperty("kickback")&&(i.Cn=x(t.kickback,Number))}},updateStadiumBg:function(t){var i=this.s?.S;i&&(t.hasOwnProperty("type")&&(i.Si=x(t.type,oe)),t.hasOwnProperty("width")&&(i.Wi=x(t.width,Number)),t.hasOwnProperty("height")&&(i.Qi=x(t.height,Number)),t.hasOwnProperty("kickOffRadius")&&(i.Xi=x(t.kickOffRadius,Number)),t.hasOwnProperty("cornerRadius")&&(i.Yi=x(t.cornerRadius,Number)),t.hasOwnProperty("color")&&(i.Ji=x(t.color,oe)),t.hasOwnProperty("goalLine")&&(i.hn=x(t.goalLine,Number)))},updateStadiumGeneral:function(t){var i=this.s?.S;i&&(t.hasOwnProperty("name")&&(i.name=x(t.name,String)),t.hasOwnProperty("width")&&(i.di=x(t.width,Number)),t.hasOwnProperty("height")&&(i.Ki=x(t.height,Number)),t.hasOwnProperty("maxViewWidth")&&(i.On=x(t.maxViewWidth,Number)),t.hasOwnProperty("cameraFollow")&&(i.Vi=x(t.cameraFollow,oe)),t.hasOwnProperty("spawnDistance")&&(i.bt=x(t.spawnDistance,Number)),t.hasOwnProperty("kickOffReset")&&(i.un=x(t.kickOffReset,Boolean)),t.hasOwnProperty("canBeStored")&&(i.Fn=x(t.canBeStored,Boolean)))},runSteps:function(t){this.ct(t)}};hv(wi,[null,"ext","stadium","kickRate_min","kickRate_rate","kickRate_max","timeLimit","scoreLimit","teamsLocked","gameState","players","name","teamColors"],[]);Qu.NY=wi});var ve=O((Uy,Dn)=>{var{setInterval:wv,clearInterval:yv,requestAnimationFrame:qv,cancelAnimationFrame:Cv,performance:$u,pako:an,E:gv}=P(),{Event:tr}=B(),{Ht:Xu,uo:le,q:Qi}=$(),Zu=Ti(),{F:Pi,w:Ai,extend:mv}=j(),zu=Ri(),Yu=Y();function xu(t,i){if(this.bh=0,this.Et=i,this.Dh=t?.k,this.Jn=Ai.L(1e3),this.Re=Ai.L(16384),this.r=t,!!t){var n=this,r=t.k;t.t.$(this.Re),t.vi=function(s){var u=t.k;n.Re.Ut(u-r),r=u,n.Re.Ft(s.i),tr.Nn(s,n.Re)},this.Jn.Ft(0);var e=this.Dh;t.t.xh(function(s){var u=t.k;n.Jn.Ut(u-e),n.Jn.o(s),n.bh++,e=u})}}xu.prototype={stop:function(){this.r.vi=null,this.r.t.xh(null),this.Jn.v.setUint16(0,this.bh,this.Jn.jt),this.Jn.Yt(this.Re._t());var t=an.deflateRaw(this.Jn._t()),i=Ai.L(t.byteLength+32);return i.Mr("HBR2"),i.kt(this.Et),i.kt(this.r.k-this.Dh),i.Yt(t),i._t()}};function bu(t,i,n,r){this.ps=0,this.or=-1,this.ah=0,this.gu=0,this.xi=0,this.mu=0,Zu.call(this,i);var e=new Pi(new DataView(t.buffer),!1);if(e.ut()!=1212305970)throw new Qi("");var s=e.ut();if(s!=n)throw new Qi(new le(s));this.tf=e.ut();var u=an.inflateRaw(e.Lt());this.cn=new Pi(new DataView(u.buffer,u.byteOffset,u.byteLength)),this.Pl(this.cn),u=this.cn.Lt(),this.cn=new Pi(new DataView(u.buffer,u.byteOffset,u.byteLength),!1),this.ws(),this.gu=$u.now(),this.nn=-1,this.callbacks=r,this.lr=null,this.ku=null}bu.prototype=mv(Zu.prototype,{Pl:function(t){for(var i=t.At(),n=0;n<i;n++)t.Kt(),t.T()},nf:function(){var t=this.cn;t.v.byteLength>t.l?(t=this.cn.Kt(),this.mu+=t,t=this.cn.At(),this.ys=tr.ai(this.cn,!0),this.ys.i=t):this.ys=null},j:function(){},en:function(t=0){this.ct();var i=this.t.Ci(++this.kh);return i.ct(this.ah),i},ct:function(){var t=$u.now(),i=t-this.gu;this.gu=t;var n=!1,r=!1;this.or>=0?(this.xi+=1e4,this.xi>this.or&&(this.xi=this.or,this.or=-1,n=!0)):this.xi+=i*this.ps;var e=this.tf*this.iu;for(this.xi>e&&(this.xi=e,r=!0),i=this.xi*this.rn,e=i|0,this.ah=i-e;this.k<e;){for(;this.ys!=null&&this.mu==this.k;)i=this.ys,i.apply(this.t),this.vi?.(i),this.nf();this.k++,this.t.ct(1)}n&&(this.lr.assignCallbacks(),this.ku?.onDestinationTimeReached?.()),r&&(this.ps=0,this.lr.clearCallbacks(),this.ku?.onEnd?.())},rf:function(t){this.lr.clearCallbacks(),this.or=t,this.xi>t&&this.ws()},ws:function(){this.mu=0,this.cn.l=0,this.k=0,this.xi=0,this.t.a(this.cn),this.nf()}});function kv(t,i,n){var r=0,e=n?.requestAnimationFrame||qv,s=n?.cancelAnimationFrame||Cv,u=i?.render,h=u&&function(){0<t.or||u()},l=function(){r=e(l),t.ct(),u&&h()};r=e(l),this.clearCallbacks=function(){t.t.nr=null,t.t.Hr=null,t.t.Ce=null,t.t.me=null,t.t.Se=null,t.t.Wr=null,t.t.Te=null,t.t.qe=null,t.t.ge=null,t.t.dr=null,t.t.Er=null,t.t.jr=null,t.t._r=null,t.t.Dn=null,t.t.fr=null,t.t.Xr=null,t.t.Qr=null,t.t.ar=null,t.t.ye=null,t.t.Tn=null,t.t.se=null,t.t.ne=null,t.t.Zr=null,t.t.ie=null,t.t.zr=null,t.t.he=null,t.t.fe=null,t.t.oe=null,t.t.ue=null,t.t.Dr=null,t.t.Br=null,t.t.ke=null,t.t.Ne=null,t.t.Ur=null,t.t.Lr=null,t.t.sr=null,t.t.$r=null,t.t.br=null,t.t.xr=null,t.t.Oe=null,t.t.Jr=null,t.t.Fr=null},this.assignCallbacks=function(){t.t.nr==null&&(t.t.nr=o=>{i.onPlayerInputChange?.(o.id,o.Tt)},t.t.Hr=o=>{i.onPlayerJoin?.(o)},t.t.Ce=o=>{i.onPlayerBallKick?.(o?.id)},t.t.me=o=>{i.onTeamGoal?.(o?.id)},t.t.Se=o=>{i.onGameEnd?.(o.id)},t.t.Wr=(o,v,y)=>{!y&&i.onGamePauseChange?.(v,o?.id)},t.t.Te=function(o){i.onGameStart?.(o?.id)},t.t.qe=()=>{i.onGameTick?.()},t.t.ge=()=>{i.onKickOff?.()},t.t.dr=(o,v,y,C)=>{i.onCollisionDiscVsDisc?.(o,v._,y,C._)},t.t.Er=(o,v,y)=>{i.onCollisionDiscVsPlane?.(o,v._,y)},t.t.jr=(o,v,y)=>{i.onCollisionDiscVsSegment?.(o,v._,y)},t.t._r=(o,v,y,C)=>{i.Al?.(o,v._,y,C)},t.t.Dn=(o,v,y)=>{i.Ml?.(o,v,y)},t.t.fr=(o,v,y,C,k)=>{i.onAutoTeams?.(o,v,y,C,k)},t.t.Xr=(o,v)=>{i.onTimeLimitChange?.(o,v)},t.t.Qr=(o,v)=>{i.onScoreLimitChange?.(o,v)},t.t.ye=o=>{i.onPlayerDiscCreated?.(o)},t.t.Tn=o=>{i.onPlayerDiscDestroyed?.(o)},t.t.ar=(o,v)=>{i.onPlayerAvatarChange?.(o,v)},t.t.se=(o,v)=>{i.onPlayerHeadlessAvatarChange?.(o,v)},t.t.ne=(o,v)=>{i.onPlayersOrderChange?.(o,v)},t.t.Zr=(o,v,y)=>{i.onPlayerTeamChange?.(o,v,y)},t.t.ie=(o,v,y)=>{i.onTeamColorsChange?.(o,v,y)},t.t.zr=(o,v)=>{i.onTeamsLockChange?.(o,v)},t.t.he=(o,v,y)=>{i.onCustomEvent?.(o,v,y)},t.t.fe=(o,v,y)=>{i.onBinaryCustomEvent?.(o,v,y)},t.t.oe=(o,v,y)=>{i.onIdentityEvent?.(o,v,y)},t.t.ue=(o,v,y,C)=>{i.onSetDiscProperties?.(o,v,y,C)},t.t.Dr=o=>{i.onPingData?.(o)},t.t.Br=o=>{i.onHandicapChange?.(o)},t.t.ke=()=>{i.onTimeIsUp?.()},t.t.Ne=()=>{i.onPositionsReset?.()},t.t.Ur=function(o,v){i.onPlayerChat?.(o.id,v)},t.t.Lr=function(o,v,y,C){i.onAnnouncement?.(o,v,y,C)},t.t.sr=function(o){i.onGameStop?.(o?.id)},t.t.$r=function(o,v){i.onStadiumChange?.(v,o?.id)},t.t.br=function(o){i.onPlayerSyncChange?.(o?.id,o?.Ei)},t.t.xr=function(o,v){i.onPlayerAdminChange?.(v?.id,v?.wi,o?.id)},t.t.Oe=function(o,v,y,C){i.onKickRateLimitChange?.(v,y,C,o?.id)},t.t.Jr=function(o,v,y,C){o.H&&i.onPlayerDiscDestroyed?.(o),i.onPlayerLeave?.(o,v,y,C?.id)},t.t.Fr=function(o,v){i.onPlayerChatIndicatorChange?.(o?.id,!v)})},this.rt=function(){s(r),this.clearCallbacks()},this.ws=()=>{t.ws()}}function Nv(t,i,n){var r,e=new zu;try{r=new bu(t,e,3,i),r.lr=new kv(r,i,n)}catch(h){var s=h instanceof Qi?h.zt:h;throw s instanceof le?Xu(Yu.ReplayFileVersionMismatchError):Xu(Yu.ReplayFileReadError)}var u={state:e,extrapolate:h=>r.en(h),getSpeed:()=>r.ps,setSpeed:h=>{r.lr.assignCallbacks(),r.ps=h},getTime:()=>r.xi,length:()=>r.iu*r.tf,setTime:h=>{r.rf(h)},getCurrentFrameNo:()=>r.k,setCurrentFrameNo:h=>{r.rf(r.iu*h)},destroy:()=>{r.lr.rt()}};return Object.defineProperty(u,"gameState",{get(){return u.state.s}}),Object.defineProperty(u,"currentPlayerId",{get(){return r.nn}}),r.ku=u,u}function ce(){this.r=new zu,this.bi=[],this.vn=[],this.cr=0,this.Et=3}function Sv(t){var i=new ce,n=0,r=new Pi(new DataView(t.buffer),!1);if(r.ut()!=1212305970)throw new Qi("");var e=r.ut();if(e!=3)throw new Qi(new le(e));i.cr=r.ut();var s=an.inflateRaw(r.Lt()),u=new Pi(new DataView(s.buffer,s.byteOffset,s.byteLength)),h=null,l;for(e=u.At(),s=0,l=0;l<e;l++)s+=u.Kt(),i.vn.push({frameNo:s,teamId:u.T()});for(s=u.Lt(),u=new Pi(new DataView(s.buffer,s.byteOffset,s.byteLength),!1),i.r.a(u);u.l<u.v.byteLength;)e=u.Kt(),n+=e,e=u.At(),h=tr.ai(u,!0),h.i=e,h.frameNo=n,i.bi.push(h);return i}function Tv(t,i){if(t){var{r:n,bi:r,cr:e}=t,s=i?.beginFrameNo||0;s<0&&(s=0);var u=i?.endFrameNo||e-1;if(u>=e&&(u=e-1),!(u<s)){for(var h=0,l=0,o=r[0];l<s;){for(;l==o?.frameNo;)o.apply(n),o=r[++h];l++,n.ct(1)}r=r.filter(v=>v.frameNo>=s&&v.frameNo<=u),r.forEach(v=>{v.frameNo-=s}),t.bi=r,t.vn=t.vn.filter(v=>v.frameNo>=s&&v.frameNo<=u),t.vn.forEach(v=>{v.frameNo-=s}),t.cr=u-s+1}}}function Ov(t,i){if(!t)return Promise.resolve();var{r:n,bi:r,cr:e}=t,s=i?.beginFrameNo||0;s<0&&(s=0);var u=i?.endFrameNo||e-1;if(u>=e&&(u=e-1),u<s)return Promise.resolve();var h=0,l=0,o=r[0];return new Promise((v,y)=>{var C;C=wv(()=>{if(l>=s){yv(C),r=r.filter(k=>k.frameNo>=s&&k.frameNo<=u),r.forEach(k=>{k.frameNo-=s}),t.bi=r,t.vn=t.vn.filter(k=>k.frameNo>=s&&k.frameNo<=u),t.vn.forEach(k=>{k.frameNo-=s}),t.cr=u-s+1,v();return}for(;l==o?.frameNo;)o.apply(n),o=r[++h];l++,n.ct(1)},0)})}function Rv(t){var i=Ai.L(16384),n=0;t.r.$(i),t.bi.forEach(h=>{var l=h.frameNo;l<n||(i.Ut(l-n),n=l,i.Ft(h.i),tr.Nn(h,i))});var r=Ai.L(1e3);r.Ft(t.vn.length);var e=0;t.vn.forEach(h=>{r.Ut(h.frameNo-e),r.o(h.teamId),e=h.frameNo}),r.Yt(i._t());var s=an.deflateRaw(r._t()),u=Ai.L(s.byteLength+32);return u.Mr("HBR2"),u.kt(t.Et),u.kt(t.cr),u.Yt(s),u._t()}gv(ce,["roomData","events","goalMarkers","totalFrames","version"],[]);Dn.NY=Dn.dl||(Dn.dl={ReplayData:ce,read:Nv,readAll:Sv,writeAll:Rv,trim:Tv,trimAsync:Ov,ef:xu})});var pe=O((Ky,ir)=>{var{requestAnimationFrame:Pv,cancelAnimationFrame:Av,performance:nh,E:Hy}=P(),Du=Y(),Mv=ot(),{Ht:au,Ke:dv,q:Ev}=$(),{extend:jv}=j(),{ou:_v,le:Iv,es:Bv,lu:Gv,ce:Vv,ve:th,ss:Lv,us:Fv,hs:Uv,fs:ih,pe:Hv,we:Kv,os:Jv,cu:Wv,ls:Qv,cs:Xv,vu:Yv,pu:$v,yu:Zv,wu:zv,qu:xv,Cu:bv,CustomEvent:Dv,BinaryCustomEvent:av,vs:t0}=hi(),rh=Ti(),i0=Ri();function eh(t){rh.call(this,t),this.bi=[],this.A=1,this.vr=nh.now(),this.frozen=!1}eh.prototype=jv(rh.prototype,{j:function(){},en:function(t=0){return this.t},ct:function(){var t=this.bi;this.bi=[];for(var i=((nh.now()-this.vr)*this.rn*this.A|0)-this.k,n=0;n<i;n++)this.k+=1,this.frozen||this.t.ct(1);t.forEach(r=>{r.apply(this.t)})},receiveEvent:function(t){this.bi.push(t)},setSpeed:function(t){if(!(t<0)){if(t==0){this.frozen=!0;return}this.k=this.k*t/this.A|0,this.A=t,this.frozen=!1}},runSteps:function(t){this.frozen&&this.t.ct(t)}});function sh(t,i,n){var r=0,e=n?.requestAnimationFrame||Pv,s=n?.cancelAnimationFrame||Av,u=i?.render,h=function(){r=e(h),t.ct(),u?.()};function l(){r=e(h),t.t.nr=v=>{i.onPlayerInputChange?.(v.id,v.Tt)},t.t.Hr=v=>{i.onPlayerJoin?.(v)},t.t.Ce=v=>{i.onPlayerBallKick?.(v?.id)},t.t.me=v=>{i.onTeamGoal?.(v?.id)},t.t.Se=v=>{i.onGameEnd?.(v.id)},t.t.Wr=(v,y,C)=>{!C&&i.onGamePauseChange?.(y,v?.id)},t.t.Te=function(v){i.onGameStart?.(v?.id)},t.t.qe=()=>{i.onGameTick?.()},t.t.ge=()=>{i.onKickOff?.()},t.t.dr=(v,y,C,k)=>{i.onCollisionDiscVsDisc?.(v,y._,C,k._)},t.t.Er=(v,y,C)=>{i.onCollisionDiscVsPlane?.(v,y._,C)},t.t.jr=(v,y,C)=>{i.onCollisionDiscVsSegment?.(v,y._,C)},t.t._r=(v,y,C,k)=>{i.Al?.(v,y._,C,k)},t.t.Dn=(v,y,C)=>{i.Ml?.(v,y,C)},t.t.fr=(v,y,C,k,f)=>{i.onAutoTeams?.(v,y,C,k,f)},t.t.Xr=(v,y)=>{i.onTimeLimitChange?.(v,y)},t.t.Qr=(v,y)=>{i.onScoreLimitChange?.(v,y)},t.t.ye=v=>{i.onPlayerDiscCreated?.(v)},t.t.Tn=v=>{i.onPlayerDiscDestroyed?.(v)},t.t.ar=(v,y)=>{i.onPlayerAvatarChange?.(v,y)},t.t.se=(v,y)=>{i.onPlayerHeadlessAvatarChange?.(v,y)},t.t.ne=(v,y)=>{i.onPlayersOrderChange?.(v,y)},t.t.Zr=(v,y,C)=>{i.onPlayerTeamChange?.(v,y,C)},t.t.ie=(v,y,C)=>{i.onTeamColorsChange?.(v,y,C)},t.t.zr=(v,y)=>{i.onTeamsLockChange?.(v,y)},t.t.he=(v,y,C)=>{i.onCustomEvent?.(v,y,C)},t.t.fe=(v,y,C)=>{i.onBinaryCustomEvent?.(v,y,C)},t.t.oe=(v,y,C)=>{i.onIdentityEvent?.(v,y,C)},t.t.ue=(v,y,C,k)=>{i.onSetDiscProperties?.(v,y,C,k)},t.t.Dr=v=>{i.onPingData?.(v)},t.t.Br=v=>{i.onHandicapChange?.(v)},t.t.ke=()=>{i.onTimeIsUp?.()},t.t.Ne=()=>{i.onPositionsReset?.()},t.t.Ur=function(v,y){i.onPlayerChat?.(v.id,y)},t.t.Lr=function(v,y,C,k){i.onAnnouncement?.(v,y,C,k)},t.t.sr=function(v){i.onGameStop?.(v?.id)},t.t.$r=function(v,y){i.onStadiumChange?.(y,v?.id)},t.t.br=function(v){i.onPlayerSyncChange?.(v?.id,v?.Ei)},t.t.xr=function(v,y){i.onPlayerAdminChange?.(y?.id,y?.wi,v?.id)},t.t.Oe=function(v,y,C,k){i.onKickRateLimitChange?.(y,C,k,v?.id)},t.t.Jr=function(v,y,C,k){v.H&&i.onPlayerDiscDestroyed?.(v),i.onPlayerLeave?.(v,y,C,k?.id)},t.t.Fr=function(v,y){i.onPlayerChatIndicatorChange?.(v?.id,!y)}}function o(){s(r),t.t.nr=null,t.t.Hr=null,t.t.Ce=null,t.t.me=null,t.t.Se=null,t.t.Wr=null,t.t.Te=null,t.t.qe=null,t.t.ge=null,t.t.dr=null,t.t.Er=null,t.t.jr=null,t.t._r=null,t.t.Dn=null,t.t.fr=null,t.t.Xr=null,t.t.Qr=null,t.t.ar=null,t.t.ye=null,t.t.Tn=null,t.t.se=null,t.t.ne=null,t.t.Zr=null,t.t.ie=null,t.t.zr=null,t.t.he=null,t.t.fe=null,t.t.oe=null,t.t.ue=null,t.t.Dr=null,t.t.Br=null,t.t.ke=null,t.t.Ne=null,t.t.Ur=null,t.t.Lr=null,t.t.sr=null,t.t.$r=null,t.t.br=null,t.t.xr=null,t.t.Oe=null,t.t.Jr=null,t.t.Fr=null}l(),this.rt=function(){o()},this.sf=function(v){o(),t.t=v,l()}}function n0(t,i){var n=new i0,r=new eh(n),e=new sh(r,t,i),s;return s={state:n,extrapolate:u=>r.en(u),takeSnapshot:function(){return n.copy()},useSnapshot:function(u){var h=u.copy();e.sf(h),n=h,s.state=h},playerJoin:function(u,h,l,o,v,y){var C=Vv.create(u,h,l,o,v,y);C.i=0,r.receiveEvent(C)},playerLeave:function(u){var h=r.t.getPlayer(u);if(h){var l=th.create(u,null,!0);l.i=0,r.receiveEvent(l)}},playerInput:function(u,h){var l=Bv.create(u);l.i=h,r.receiveEvent(l)},playerChat:function(u,h){var l=Gv.create(u);l.i=h,r.receiveEvent(l)},setKeyState:function(u){s.playerInput(u,i?.controlledPlayerId||0)},setPlayerChatIndicator:function(u,h){var l=Iv.create(u);l.i=h,r.receiveEvent(l)},setPlayerAvatar:function(u,h,l){if(u){var o=xv.create(l,h);o.i=0}else{var v=$v.create(h);v.i=l}r.receiveEvent(v)},setCurrentStadium:function(u,h,l){try{var o=Hv.create(u);o.i=h,r.receiveEvent(o)}catch(v){o=v instanceof Ev?v.zt:v,o instanceof SyntaxError?l(au(Du.StadiumParseSyntaxError,o.lineNumber)):o instanceof dv?l(o.Us):l(au(Du.StadiumParseUnknownError,o))}},sendAnnouncement:function(u,h=-1,l=0,o=1,v,y){var C=_v.create(u,h,l,o);C.i=y,r.receiveEvent(C)},startGame:function(u){var h=Lv.create();h.i=u,r.receiveEvent(h)},stopGame:function(u){var h=Fv.create();h.i=u,r.receiveEvent(h)},setGamePaused:function(u,h){var l=Uv.create(u);l.i=h,r.receiveEvent(l)},setScoreLimit:function(u,h){var l=ih.create(0,u);l.i=h,r.receiveEvent(l)},setTimeLimit:function(u,h){var l=ih.create(1,u);l.i=h,r.receiveEvent(l)},setTeamsLock:function(u,h){var l=Jv.create(u);l.i=h,r.receiveEvent(l)},autoTeams:function(u){var h=Qv.create();h.i=u,r.receiveEvent(h)},setPlayerTeam:function(u,h,l){var o=Mv.i[h];if(o){var v=Kv.create(u,o);v.i=l,r.receiveEvent(v)}},setKickRateLimit:function(u,h,l,o){var v=Zv.create(u,h,l);v.i=o,r.receiveEvent(v)},setTeamColors:function(u,h,l,o){var v=zv.createFromData(u,h,...l);v.i=o,r.receiveEvent(v)},setPlayerAdmin:function(u,h,l){var o=Wv.create(u,h);o.i=l,r.receiveEvent(o)},kickPlayer:function(u,h,l,o){var v=th.create(u,h,l);v.i=o,r.receiveEvent(v)},setPlayerSync:function(u,h){var l=Xv.create(u);l.i=h,r.receiveEvent(l)},sendPingData:function(u,h){for(var l=new Yv,o=[],v=0;v<r.t.d.length;v++)o.push(u(r.t.d[v]));l.values=o,l.i=h,r.receiveEvent(l)},setDiscProperties:function(u,h,l,o){var v=bv.create(u,h,l);v.i=o,r.receiveEvent(v)},sendCustomEvent:function(u,h,l){var o=Dv.create(u,h);o.i=l,r.receiveEvent(o)},sendBinaryCustomEvent:function(u,h,l){var o=av.create(u,h);o.i=l,r.receiveEvent(o)},setPlayerIdentity:function(u,h,l){var o=t0.create(u,h);o.i=l,r.receiveEvent(o)},executeEvent:function(u){r.receiveEvent(u)},setSimulationSpeed:function(u){r.setSpeed(u)},runSteps:function(u){r.runSteps(u)},destroy:e.rt},Object.defineProperty(s,"gameState",{get(){return n.s}}),Object.defineProperty(s,"currentPlayerId",{get(){return 0}}),Object.defineProperty(s,"currentFrameNo",{get(){return r.k}}),s}ir.NY=ir.El||(ir.El={Sandbox:sh,createSandbox:n0})});var nr=O((Wy,oh)=>{var{httpUrl:Jy,XMLHttpRequest:r0}=P(),{q:uh}=$();function fh(t,i,n,r,e){return new Promise(function(s,u){var h=new r0;h.open(i,t),h.responseType=n,h.onload=function(){h.status>=200&&h.status<300?h.response!=null?s(h.response):u(null):u("status: "+h.status)},h.onerror=function(l){u(l)},e!=null&&h.setRequestHeader("Content-type",e),h.send(r)})}function hh(t,i){return fh(t,"GET",i,null)}var e0={jl:hh,_l:function(t){return hh(t,"json").then(function(i){if(i.error!=null)throw new uh(i.error);return i.data})},Il:function(t,i,n){return fh(t,"POST","json",i,n).then(function(r){if(r.error!=null)throw new uh(r.error);return r.data})}};oh.NY=e0});var ye=O((Qy,rr)=>{var{E:ch}=P(),{In:lh}=j();function we(){this.Et=0,this.name="",this.Ot="",this.qs=0,this.Cs=0,this.fi=!1,this.Nu=0,this.d=0}we.prototype={uf:function(){this.name=lh(this.name,40),this.Ot=lh(this.Ot,3)},$:function(t){this.uf(),t.jt=!0,t.Ft(this.Et),t.sh(this.name),t.sh(this.Ot),t.Ws(this.qs),t.Ws(this.Cs),t.o(this.fi?1:0),t.o(this.Nu),t.o(this.d),t.jt=!1},a:function(t){t.jt=!0,this.Et=t.At(),this.name=t.eh(),this.Ot=t.eh(),this.qs=t.Ks(),this.Cs=t.Ks(),this.fi=t.T()!=0,this.Nu=t.T(),this.d=t.T(),t.jt=!1,this.uf()}};function vh(){this.data=null,this.id="",this.st=1/0}ch(we,["version","name","flag","lat","lon","password","maxPlayers","players"],[]);ch(vh,["data","id","dist"],[]);rr.NY=rr.Bl||(rr.Bl={RoomDataDetails:we,RoomData:vh})});var Ce=O((Xy,yh)=>{var{crypto:Mi}=P(),s0=Y(),{F:ph,w:u0}=j(),{Ht:h0,q:di}=$(),qe={name:"ECDSA",namedCurve:"P-256"},wh={name:"ECDSA",hash:{name:"SHA-256"}};function f0(t,i,n){try{return Mi.subtle.importKey("jwk",{crv:"P-256",ext:!0,key_ops:["sign"],kty:"EC",d:n,x:t,y:i},qe,!0,["sign"])}catch(r){return Promise.reject(r instanceof di?r.zt:r)}}function o0(t,i){try{return Mi.subtle.importKey("jwk",{crv:"P-256",ext:!0,key_ops:["verify"],kty:"EC",x:t,y:i},qe,!0,["verify"])}catch(n){return Promise.reject(n instanceof di?n.zt:n)}}function yi(){this.x=null,this.y=null,this.Su=null,this.privateKey=null}yi.Gl=function(){try{return Mi.subtle.generateKey(qe,!0,["sign","verify"]).then(function(t){var i=t.privateKey;return Mi.subtle.exportKey("jwk",i).then(function(n){var r=new yi;return r.x=n.x,r.y=n.y,r.Su=n.d,r.privateKey=i,r})})}catch(t){return Promise.reject(t instanceof di?t.zt:t)}};yi.Vl=function(t){var i=t.split(".");if(i.length!=4||i[0]!="idkey")return Promise.reject(h0(s0.AuthFromKeyInvalidIdFormatError));var n=i[1],r=i[2],e=i[3];return f0(n,r,e).then(function(s){var u=new yi;return u.x=n,u.y=r,u.Su=e,u.privateKey=s,u})};yi.Ll=function(t,i){try{var n=new ph(new DataView(t.buffer,t.byteOffset,t.byteLength),!1);n.T();var r=n.Lt(n.At()),e=n.Lt(),s=new ph(new DataView(r.buffer,r.byteOffset,r.byteLength),!1),u=s.li(),h=s.li(),l=s.Lt();if(l.byteLength!=i.byteLength)return Promise.reject(null);for(var o=0;o<l.byteLength;o++)if(l[o]!=i[o])return Promise.reject(null);return o0(u,h).then(function(v){return Mi.subtle.verify(wh,v,e,r)}).then(function(v){if(!v)throw new di(null);return u})}catch(v){return Promise.reject(v instanceof di?v.zt:v)}};yi.prototype={Fl:function(){return"idkey."+this.x+"."+this.y+"."+this.Su},Ul:function(t){try{var i=u0.L(1024);i.o(1);var n=i.l;i.Ft(0);var r=i.l;i.ci(this.x),i.ci(this.y),i.Yt(t);var e=i.l-r;return i.v.setUint16(n,e,i.jt),Mi.subtle.sign(wh,this.privateKey,new Uint8Array(i.v.buffer,i.v.byteOffset+r,e)).then(function(s){return i.Qe(s),i._t()})}catch(s){return Promise.reject(s instanceof di?s.zt:s)}}};yh.NY=yi});var Xi=O((Yy,er)=>{var{httpUrl:mh}=P(),qh=Y(),{Ht:Ch,Ke:l0,q:c0}=$(),{F:gh,oh:v0,In:p0}=j(),kh=$n(),Nh=nr(),{RoomDataDetails:w0,RoomData:y0}=ye(),{lh:q0,ch:C0,J:g0}=ci(),Sh=Ce();function m0(){try{return Sh.Gl().then(t=>[t.Fl(),t])}catch(t){return Promise.reject(t)}}function k0(t){try{return Sh.Vl(t)}catch(i){return Promise.reject(i)}}function N0(t){return"rgba("+[(t&16711680)>>>16,(t&65280)>>>8,t&255].join()+",255)"}function S0(t){var i=t.match(/rgba?[ \t]*\([ \t]*(\d+),[ \t]*(\d+),[ \t]*(\d+)[ \t]*\)/);if(!(i.length<4)){var n=parseInt(i[1]),r=parseInt(i[2]),e=parseInt(i[3]);if(!(n>255||r>255||e>255))return n<<16|r<<8|e}}function T0(t){var i;if(t?.includes(".")){if(i=t.split("."),i.length>4)return;for(;i.length<4;)i.splice(0,0,"");return i.reduce((s,u,h)=>{if(s!=null){var l=parseInt(u.length>0?u:"0");return isNaN(l)||l<0||l>255?null:(s|=l<<24-h*8,s)}},0)}if(t?.includes(":")){i=t.split(":");var n=t.indexOf("::");if(n!=t.lastIndexOf("::"))return;if(n>=0){var r=i.length;if(r>9)return;n=i.findIndex(s=>s.length==0),(n==0||n==r-2&&i[r-1].length==0)&&(i.splice(n,1),r--),i[n]="0";for(var e=0;e<8-r;e++)i.splice(n+1,0,"0")}return i.length!=8?void 0:i.reduce((s,u,h)=>{if(s!=null){var l=parseInt(u,16);if(!(isNaN(l)||l<0||l>65535))return s|=BigInt(l)<<112n-BigInt(h)*16n,s}},0n)}}function O0(t){var i=t?.__proto__.constructor.name,n,r;if(i=="BigInt"){var e={Pe:-1,o:0},s={Pe:-1,o:0};for(r=[],n=0;n<8;n++){var u=t&65535n;u==0?(s.o==0&&(s.Pe=7-n),s.o++,s.o>e.o&&(e.o=s.o,e.Pe=s.Pe)):s.o=0,r.splice(0,0,u.toString(16)),t>>=16n}e.o>0&&(n=e.Pe-e.o+1,r.splice(n,e.o-1),r[n]="");var h=r.join(":");return h.length==0?h="::":h.charAt(h.length-1)==":"?h+=":":h.charAt(0)==":"&&(h=":"+h),h}else if(i=="Number"){for(r=[],n=0;n<4;n++)r.splice(0,0,""+(t&255)),t>>=8;return r.join(".")}}function R0(t){if(t.length==43){for(var i=0n,n=0,r=252;n<43;n++,r-=6){var e=t.charCodeAt(n);if(e==45)e=0;else if(e==95)e=63;else if(e>=48&&e<=57)e-=47;else if(e>=65&&e<=90)e-=54;else if(e>=97&&e<=122)e-=60;else return;i|=BigInt(e)<<BigInt(r)}return i}}function P0(t){var i=t?.__proto__.constructor.name;if(i=="BigInt"){for(var n="",r=0;r<43;r++){if(i=Number(t&63n),i==0)i=45;else if(i==63)i=95;else if(i>=1&&i<=10)i+=47;else if(i>=11&&i<=36)i+=54;else if(i>=37&&i<=62)i+=60;else return;n=String.fromCharCode(i)+n,t>>=6n}return n}}function A0(t,i,n){return!((t^i)&n)}function M0(t){return t.fu()?null:g0.Xs(t.ml(),8)}function d0(t,i,n){return(n?16:0)|(t>0?8:t<0?4:0)|(i>0?2:i<0?1:0)}function E0(t){return{dirX:((t&8)>0)-((t&4)>0),dirY:((t&2)>0)-((t&1)>0),kick:(t&16)>0}}var j0=()=>Nh.jl(mh+"api/list","arraybuffer").then(t=>{t=new gh(new DataView(t),!1),t.T();for(var i=[];t.v.byteLength-t.l!=0;){var n=t.bn(t.At()),r=t.rh(t.At());try{var e=new w0;e.a(new gh(new DataView(r),!1));var s=new y0;s.data=e,s.id=n,i.push(s)}catch{}}return i});function _0(t,i){let n=Math.PI/180;for(var r=t.lat,e=t.lon,s=0;s<i.length;s++){var u=i[s],{qs:h,Cs:l}=u.data,o=Math.cos(n*(h-r)),v=Math.cos(n*(h+r));u.st=6378*Math.acos((o-v+(o+v)*Math.cos(n*(l-e)))/2),isFinite(u.st)||(u.st=22e3)}}var I0=()=>Nh._l(mh+"api/geo").then(t=>({lat:t.lat,lon:t.lon,flag:t.code.toLowerCase()})),B0=(t,i,n=!0)=>!t&&n?null:(typeof t=="string"&&(t=JSON.parse(t)),{lat:t?.lat||i?.lat||40,lon:t?.lon||i?.lon||40,flag:t?.flag||i?.flag||"tr"});function G0(){return kh.uu()}function V0(t,i){try{var n=new kh;return n.gl(t),n}catch(e){var r=e instanceof c0?e.zt:e;r instanceof SyntaxError?i(Ch(qh.StadiumParseSyntaxError,r.lineNumber)):r instanceof l0?i(r.Us):i(Ch(qh.StadiumParseUnknownError,r))}}function L0(t){return t.ql()}function Th(t,i=1){if(i<=0){t();return}Promise.resolve().then(()=>{Th(t,i-1)})}er.NY=er.Hl||(er.Hl={generateAuth:m0,authFromKey:k0,getRoomList:j0,calculateAllRoomDistances:_0,numberToColor:N0,colorToNumber:S0,ipToNumber:T0,numberToIp:O0,authToNumber:R0,numberToAuth:P0,compareBits:A0,keyState:d0,reverseKeyState:E0,runAfterGameTick:Th,getGeo:I0,parseGeo:B0,stadiumChecksum:M0,parseStadium:V0,exportStadium:L0,getDefaultStadiums:G0,promiseWithTimeout:v0,trimStringIfLonger:p0,hexStrToNumber:q0,byteArrayToIp:C0})});var Mh=O(($y,sr)=>{var{Event:Oh}=B(),{ou:F0,le:U0,Kh:H0,es:K0,lu:J0,ce:W0,ve:Q0,ss:X0,us:Y0,hs:$0,fs:Rh,pe:Z0,we:z0,os:x0,cu:b0,ls:D0,cs:a0,vu:t1,pu:i1,wu:n1,Jh:r1,yu:e1,qu:s1,Cu:Ph,CustomEvent:u1,BinaryCustomEvent:h1,vs:f1}=hi(),Ah=ot();sr.NY=sr.Kl||(sr.Kl={create:t=>{var i=Oh.Ds.get(t);if(i){var n=Object.create(i.prototype);return n.V=0,n}},createFromStream:t=>Oh.ai(t,!0),checkConsistency:t=>H0.create(t),sendAnnouncement:(t,i=-1,n=0,r=1)=>F0.create(t,i,n,r),sendChatIndicator:t=>U0.create(t?0:1),sendInput:t=>K0.create(t),sendChat:t=>J0.create(t),joinRoom:(t,i,n,r,e,s)=>W0.create(t,i,n,r,e,s),setHeadlessAvatar:(t,i)=>s1.create(t,i),kickBanPlayer:(t,i,n)=>Q0.create(t,i,n),reorderPlayers:(t,i)=>r1.create(t,i),startGame:()=>X0.create(),stopGame:()=>Y0.create(),pauseResumeGame:t=>$0.create(t),setScoreLimit:t=>Rh.create(0,t),setTimeLimit:t=>Rh.create(1,t),setStadium:t=>Z0.create(t),setPlayerTeam:(t,i)=>{var n=Ah.i[i];if(n)return z0.create(t,n)},setTeamsLock:t=>x0.create(t),setPlayerAdmin:(t,i)=>b0.create(t,i),autoTeams:()=>D0.create(),setPlayerSync:t=>a0.create(t),ping:t=>t1.create(t),setAvatar:t=>i1.create(t),setTeamColors:(t,i)=>{var n=Ah.i[t];if(n)return n1.create(n,i)},setKickRateLimit:(t,i,n)=>e1.create(t,i,n),setDiscProperties:(t,i)=>Ph.create(t,!1,i),setPlayerDiscProperties:(t,i)=>Ph.create(t,!0,i),customEvent:(t,i)=>u1.create(t,i),binaryCustomEvent:(t,i)=>h1.create(t,i),setPlayerIdentity:(t,i)=>f1.create(t,i)})});var Se=O((Zy,Fh)=>{var{setTimeout:dh,pako:Eh}=P(),Ei=Y(),{Event:jh}=B(),{Ht:ji,Ke:o1,q:l1}=$(),{w:ge}=j(),Yi=ot(),{bs:c1}=Mr(),{ou:v1,le:_h,es:p1,lu:me,ce:w1,ve:ke,ss:y1,us:q1,hs:C1,fs:Ih,pe:g1,we:m1,os:k1,cu:Bh,ls:N1,cs:S1,pu:Ne,Jh:T1,yu:Gh,wu:Vh,qu:O1,Cu:Lh,CustomEvent:R1,BinaryCustomEvent:P1,vs:A1}=hi();function M1(t,i,n,r,e){var s=i.renderer,u=r;if(Object.defineProperty(this,"config",{get(){return u}}),Object.defineProperty(this,"sdp",{get(){return i.isHost?null:i.n?.r.et.Rt.remoteDescription.sdp}}),Object.defineProperty(this,"isHost",{get(){return i.isHost}}),Object.defineProperty(this,"currentPlayerId",{get(){return i.n?.r.nn}}),Object.defineProperty(this,"currentPlayer",{get(){var f=i.n?.r.nn;return i.n?.r.t.d.filter(p=>p.id==f)[0]}}),Object.defineProperty(this,"state",{get(){return i.n?.r?.t}}),Object.defineProperty(this,"stateExt",{get(){return i.n?.r?.t?.tt}}),Object.defineProperty(this,"gameState",{get(){return i.roomState?.s}}),Object.defineProperty(this,"gameStateExt",{get(){return i.roomState?.s?.tt}}),Object.defineProperty(this,"currentFrameNo",{get(){return i.n?.r?.k}}),Object.defineProperty(this,"banList",{get(){return i.n?.r?.Vt?.banList?.getList()}}),Object.defineProperty(this,"token",{get(){return i.n?.r?.Vt?.Ae},set(f){var p=i.n?.r?.Vt;p&&(p.Ae=f,p.gs(),i.n.pr=null,p.Tu=dh(()=>{p.ms(),this._onRoomTokenChange?.(p.Ae)},2*p.hf))}}),Object.defineProperty(this,"requireRecaptcha",{get(){return i.n?.r?.Vt?.Ou},set(f){i.n?.r?.Vt?.Ru(f)}}),Object.defineProperty(this,"name",{get:function(){return i.n?.r?.t.name}}),Object.defineProperty(this,"password",{get:function(){return i.n?.r?.fi}}),Object.defineProperty(this,"geo",{get:function(){return i.n?.r?.Me}}),Object.defineProperty(this,"maxPlayerCount",{get:function(){var f=i.n?.r?.wr;return f==null?null:f+1}}),Object.defineProperty(this,"fakePassword",{get:function(){return i.n?.r?.yr}}),Object.defineProperty(this,"fixedPlayerCount",{get:function(){return i.n?.r?.de}}),Object.defineProperty(this,"showInRoomList",{get:function(){return i.n?.r?.ks}}),Object.defineProperty(this,"unlimitedPlayerCount",{get:function(){return i.n?.r?.qr}}),Object.defineProperty(this,"link",{get:function(){return i.n?.pr}}),Object.defineProperty(this,"timeLimit",{get:function(){return i.n?.r.t.Mt}}),Object.defineProperty(this,"scoreLimit",{get:function(){return i.n?.r.t.Gt}}),Object.defineProperty(this,"redScore",{get:function(){var f=i.roomState?.s;return(f?.tt||f)?.Oi}}),Object.defineProperty(this,"blueScore",{get:function(){var f=i.roomState?.s;return(f?.tt||f)?.Ti}}),Object.defineProperty(this,"timeElapsed",{get:function(){var f=i.roomState?.s;return(f?.tt||f)?.Zi}}),Object.defineProperty(this,"stadium",{get:function(){return i.n?.r.t.S}}),Object.defineProperty(this,"players",{get:function(){return i.n?.r.t.d}}),this.Mn=-1,this.libraries=n||[],this.librariesMap=this.libraries.reduce((f,p)=>(f[p.name]=p,f),{}),this.renderer=s,i.ff){let f=function(w,g,N){for(var S=0,R=0;S<w.length&&R<g.length;){for(;S<w.length&&R<g.length&&w[S]==g[R]&&w[S]!=N;)S++,R++;if(w[S]==N)break;for(;S<w.length&&R<g.length&&w[S]!=g[R]&&w[S]!=N;)S++;if(w[S]==N)break}g[R]!=N&&g.splice(R,0,N)},p=function(w){Object.defineProperty(h,w,{get(){return u[w]},set(g){u[w]=g}})},q=function(w){p(w+"Before"),p(w),p(w+"After")};var y=f,C=p,k=q;this.plugins=e||[],this.pluginsMap=this.plugins.reduce((w,g)=>(w[g.name]=g,w),{}),this.activePlugins=this.plugins.filter(w=>w.active);var h=this;this.setConfig=function(w){var g=u;g.finalize?.(),g.room=null,w=w||{},w.room=h,w.initialize?.(),h.client.config=w,u=w,h._onConfigUpdate?.(g,w)},this.mixConfig=function(w){Object.keys(w).forEach(g=>{var N=w[g];if(typeof N=="function"){var S=u[g];S?typeof S=="function"&&(u[g]=function(...R){S(...R),N(...R)}):u[g]=N}})},this.setRenderer=function(w){s&&(s.finalize?.(),s.room=null),w&&(w.room=h,w.initialize?.());var g=s;h.renderer=w,h.client.renderer=w,i.renderer=w,s=w,h._onRendererUpdate?.(g,w)},this.setPluginActive=function(w,g){var N=h.plugins.filter(R=>R.name==w)[0],S;if(!(!N||N.active==g))if(g){if(S=h.activePlugins.findIndex(R=>R.name==w),S>=0)return;f(h.plugins,h.activePlugins,N),N.active=g,h._onPluginActiveChange?.(N)}else{if(S=h.activePlugins.findIndex(R=>R.name==w),S<0)return;N.active=g,h._onPluginActiveChange?.(N),h.activePlugins.splice(S,1)}},this._modifyPlayerData=function(w,g,N,S,R,E){var M=[g,N,S],b;return u.modifyPlayerDataBefore&&([M,b]=u.modifyPlayerDataBefore(w,M[0],M[1],M[2],R,E)),b!==!1&&(h.activePlugins.forEach(tt=>{tt.modifyPlayerData&&M&&(M=tt.modifyPlayerData(w,M[0],M[1],M[2],R,E,b))}),u.modifyPlayerData&&M&&(M=u.modifyPlayerData(w,M[0],M[1],M[2],R,E,b)),u.modifyPlayerDataAfter&&M&&(M=u.modifyPlayerDataAfter(w,M[0],M[1],M[2],R,E,b))),M},q("modifyPlayerData"),this._modifyPlayerPing=function(w,g){var N;return u.modifyPlayerPingBefore&&([g,N]=u.modifyPlayerPingBefore(w,g)),N!==!1&&(h.activePlugins.forEach(S=>{S.modifyPlayerPing&&(g=S.modifyPlayerPing(w,g,N))}),u.modifyPlayerPing&&(g=u.modifyPlayerPing(w,g,N)),u.modifyPlayerPingAfter&&(g=u.modifyPlayerPingAfter(w,g,N))),g},q("modifyPlayerPing"),this._modifyClientPing=function(w){var g;return u.modifyClientPingBefore&&([w,g]=u.modifyClientPingBefore(w)),g!==!1&&(h.activePlugins.forEach(N=>{N.modifyClientPing&&(w=N.modifyClientPing(w,g))}),u.modifyClientPing&&(w=u.modifyClientPing(w,g)),u.modifyClientPingAfter&&(w=u.modifyClientPingAfter(w,g))),w},q("modifyClientPing"),this._modifyFrameNo=function(w){var g;return u.modifyFrameNoBefore&&([w,g]=u.modifyFrameNoBefore(w)),g!==!1&&(h.activePlugins.forEach(N=>{N.modifyFrameNo&&(w=N.modifyFrameNo(w,g))}),u.modifyFrameNo&&(w=u.modifyFrameNo(w,g)),u.modifyFrameNoAfter&&(w=u.modifyFrameNoAfter(w,g))),w},q("modifyFrameNo"),this._onOperationReceived=function(w,g,N,S){var R=u.onBeforeOperationReceived&&u.onBeforeOperationReceived(w,g,N,S),E=R!==!1;return h.activePlugins.forEach(M=>{E&&M.onOperationReceived&&!M.onOperationReceived(w,g,N,S,R)&&(E=!1)}),E&&u.onOperationReceived&&!u.onOperationReceived(w,g,N,S,R)&&(E=!1),E&&u.onAfterOperationReceived&&!u.onAfterOperationReceived(w,g,N,S,R)&&(E=!1),E},p("onBeforeOperationReceived"),p("onOperationReceived"),p("onAfterOperationReceived");var l=function(w,g){h["_on"+w]=function(...N){var S=u["onBefore"+w],R=S&&S(...N);R!==!1&&(h.activePlugins.forEach(E=>{S=E["on"+w],S&&S(...N,R)}),S=u["on"+w],S&&S(...N,R),S=s&&s["on"+w],S&&S(...N,R),S=u["onAfter"+w],S&&S(...N,R))},p("onBefore"+w),p("on"+w),p("onAfter"+w)};c1.forEach(({name:w,metadata:g})=>{l(w,g)})}this.setProperties=function(f){i.isHost&&i.n?.Jl?.(f)},this.setKickRateLimit=function(f,p,q){var w=Gh.create(f,p,q);i.W(w)!=!1&&i.n?.r.j(w)},this.executeEvent=function(f,p){i.W(f,void 0,p)!=!1&&i.n?.r?.j(f)},this.clearEvents=function(){var f=i.n?.r?.tn;f&&(f.list.length=0)},this.sendCustomEvent=function(f,p,q){var w=i.n?.r;if(!(!w?.t||q!=null&&!w.t.getPlayer(q)?.sn)){var g=R1.create(f,p);i.W(g,q)!=!1&&(this.isHost?q!=null?i.Cr.then(function(){w.gr(g,q)}):w.Ns(g,0,!0):w.Pu&&w.j(g))}},this.sendBinaryCustomEvent=function(f,p,q){var w=i.n?.r;if(!(!w?.t||q!=null&&!w.t.getPlayer(q)?.sn)){var g=P1.create(f,p);i.W(g,q)!=!1&&(this.isHost?q!=null?i.Cr.then(function(){w.gr(g,q)}):w.Ns(g,0,!0):w.Pu&&w.j(g))}},this.setPlayerIdentity=function(f,p,q){var w=i.n?.r;if(!(!w?.t||q!=null&&!w.t.getPlayer(q)?.sn)){var g=A1.create(f,p);i.W(g,q)!=!1&&(this.isHost?q!=null?i.Cr.then(function(){w.gr(g,q)}):w.Ns(g,0,!0):w.Pu&&w.j(g))}},this.setHandicap=function(f){i.n?.r.xo(f)},this.clearBan=function(f){i.isHost&&i.n?.r.Wl(f)},this.clearBans=function(){i.isHost&&i.n?.r.Ql()},this.addPlayerBan=function(f){if(i.isHost){var p=i.n?.r.t.d.filter(q=>q.id==f)[0];if(p)return i.n?.r.Xl(p)}},this.addIpBan=function(...f){if(i.isHost)return i.n?.r.Yl(...f)},this.addAuthBan=function(...f){if(i.isHost)return i.n?.r.$l(...f)},this.removeBan=function(f){if(i.isHost)return i.n?.r.Zl(f)},this.setAvatar=function(f){f=f?.substr(0,2)||"",h.client.wt.Bi.setValue("avatar",f);var p=Ne.create(f);i.W(p)!=!1&&i.n?.r.j(p)},this.setPlayerAvatar=function(f,p,q){if(!(!i.isHost&&(q||f!=i.n.r.nn))){var w=q?O1.create(f,p):Ne.create(p);i.W(w,void 0,q?0:f)!=!1&&i.n?.r.j(w)}},this.reorderPlayers=function(f,p){var q=T1.create(f,p);i.W(q)!=!1&&i.n?.r.j(q)},this.setChatIndicatorActive=function(f){var p=_h.create(f?0:1);i.W(p)!=!1&&i.n?.r.j(p)},this.setTeamColors=function(f,p,...q){var w=Vh.createFromData(f,p,...q);i.W(w)!=!1&&i.n?.r.j(w)},this.setUnlimitedPlayerCount=function(f){i.n?.zl?.(f)},this.setFakePassword=function(f){i.n?.xl?.(f)};var o=function(f,p){var q=i.n?.r;if(q){var w=me.create(f);i.W(w,p)!=!1&&(p!=null?i.Cr.then(function(){q.gr(w,p)}):q.j(w))}};this.sendChat=function(f,p){if(i.isHost)o(f,p);else{var q=i.n?.r;if(!q)return;var w=me.create(f);i.W(w)!=!1&&q.j(w)}},this.sendChatIndicator=function(f){i.n?.bl(f)},this.sendAnnouncement=function(f,p,q,w,g){if(i.isHost){var N=i.n?.r;if(N){w={bold:1,italic:2,small:3,"small-bold":4,"small-italic":5}[w],w==null&&(w=0),q==null&&(q=-1),g==null&&(g=1);var S=v1.create(f,q,w,g);i.W(S,p)!=!1&&(p!=null?i.Cr.then(function(){N.gr(S,p)}):N.j(S))}}},this.setDiscProperties=function(f,p){if(i.isHost){var q=i.n?.r;if(q){var w=Lh.create(f,!1,p);i.W(w)!=!1&&q.j(w)}}},this.setPlayerDiscProperties=function(f,p){if(i.isHost){var q=i.n?.r;if(q){var w=Lh.create(f,!0,p);i.W(w)!=!1&&q.j(w)}}},this.getKeyState=function(){return i.keyState},this.setKeyState=function(f){h.Mn<0?i.keyState=f:(f&16)>0&&(i.keyState&16)>0&&!h.currentPlayer?.gi?(i.keyState=f&-17,dh(()=>{i.keyState=f},h.Mn)):i.keyState=f},this.extrapolate=function(f){return i.n?.r?.en(f)},this.startGame=function(){i.n?.Dl()},this.stopGame=function(){i.n?.al()},this.pauseGame=function(){i.n?.tc()},this.autoTeams=function(){i.n?.ic()},this.lockTeams=function(){i.n?.nc(!i.roomState?.on)},this.isGamePaused=function(){return i.roomState?.s?.xt==120},this.resetTeams=function(){Yi.i.forEach((f,p)=>p>0&&i.n?.of(f))},this.startRecording=function(){return i.n?.lf(!0)},this.stopRecording=function(){return i.n?.lf(!1)},this.isRecording=function(){return i.n?.Wn!=null},this.randTeams=function(){i.n?.rc()},this.setSync=function(f){i.n?.r?.t.zh(f)},this.leave=function(){i.n?.Au()},this.setCurrentStadium=function(f,p){try{i.n?.ec(f)}catch(w){var q=w instanceof l1?w.zt:w;q instanceof SyntaxError?p(ji(Ei.StadiumParseSyntaxError,q.lineNumber)):q instanceof o1?p(q.Us):p(ji(Ei.StadiumParseUnknownError,q))}},this.setTimeLimit=function(f){i.n?.sc(f)},this.setScoreLimit=function(f){i.n?.uc(f)},this.changeTeam=function(f){i.n?.cf(i.n?.r.nn,Yi.i[f])},this.resetTeam=function(f){i.n?.of(Yi.i[f])},this.setPlayerTeam=function(f,p){i.n?.cf(f,Yi.i[p])},this.setPlayerAdmin=function(f,p){var q=Bh.create(f,p);i.W(q)!=!1&&i.n?.r?.j(q)},this.kickPlayer=function(f,p,q){var w=ke.create(f,p||"",q);i.W(w)!=!1&&i.n?.r?.j(w)},this.fakePlayerJoin=function(f,p,q,w,g,N){var S=w1.create(f,p,q,w,g,N);i.W(S)!=!1&&i.n?.r?.j(S)},this.fakePlayerLeave=function(f){var p=i.n?.r.t.getPlayer(f);if(p){var q=ke.create(f,null,!0);return i.W(q)!=!1&&i.n?.r?.j(q),{id:p.id,name:p.name,flag:p.Ot,avatar:p.mt,conn:p.Sn,auth:p.Qt}}};function v(f,p){i.W(p,void 0,f)!=!1&&i.n?.r?.j(p)}this.fakeSendPlayerInput=function(f,p){v(p,p1.create(f))},this.fakeSendPlayerChat=function(f,p){v(p,me.create(f))},this.fakeSetPlayerChatIndicator=function(f,p){v(p,_h.create(f?0:1))},this.fakeSetPlayerAvatar=function(f,p){v(p,Ne.create(f))},this.fakeSetStadium=function(f,p){v(p,g1.create(f))},this.fakeStartGame=function(f){v(f,y1.create())},this.fakeStopGame=function(f){v(f,q1.create())},this.fakeSetGamePaused=function(f,p){v(p,C1.create(f))},this.fakeSetScoreLimit=function(f,p){v(p,Ih.create(0,f))},this.fakeSetTimeLimit=function(f,p){v(p,Ih.create(1,f))},this.fakeSetTeamsLock=function(f,p){v(p,k1.create(f))},this.fakeAutoTeams=function(f){v(f,N1.create())},this.fakeSetPlayerTeam=function(f,p,q){var w=Yi.i[p];w&&v(q,m1.create(f,w))},this.fakeSetKickRateLimit=function(f,p,q,w){v(w,Gh.create(f,p,q))},this.fakeSetTeamColors=function(f,p,q,w){v(w,Vh.createFromData(f,p,...q))},this.fakeSetPlayerAdmin=function(f,p,q){v(q,Bh.create(f,p))},this.fakeKickPlayer=function(f,p,q,w){v(w,ke.create(f,p,q))},this.fakeSetPlayerSync=function(f,p){v(p,S1.create(f))},this.getPlayer=function(f){return i.n?.r.t.d.filter(p=>p.id==f)[0]},this.getBall=function(f=!0){var p=i.roomState?.s;return(f?p?.tt:p)?.c.p[0]},this.getDiscs=function(f=!0){var p=i.roomState?.s;return(f?p?.tt:p)?.c.p},this.getDisc=function(f,p=!0){var q=i.roomState?.s;return(p?q?.tt:q)?.c.p[f]},this.getPlayerDisc=function(f,p=!0){var q=i.roomState?.s,w=(p?q?.tt:q)?.c.p,g=i.roomState?.S.p;if(!(!w||!g)){for(var N=g.length;N<w.length;N++)if(w[N]._==f)return w[N]}},this.getPlayerDisc_exp=function(f){return i.roomState?.d.filter(p=>p.id==f)[0]?.H},this.takeSnapshot=function(){var f=i.n?.r?.t;if(f)return f.copy()},this.exportStadium=function(){var f=i.n?.r?.t;if(f)return f.exportStadium()},this.createVertex=function(f){var p=i.n?.r?.t;if(p)return p.createVertex(f)},this.createSegment=function(f){var p=i.n?.r?.t;if(p)return p.createSegment(f)},this.createSegmentFromObj=function(f){var p=i.n?.r?.t;if(p)return p.createSegmentFromObj(f)},this.createGoal=function(f){var p=i.n?.r?.t;if(p)return p.createGoal(f)},this.createPlane=function(f){var p=i.n?.r?.t;if(p)return p.createPlane(f)},this.createDisc=function(f){var p=i.n?.r?.t;if(p)return p.createDisc(f)},this.createJoint=function(f){var p=i.n?.r?.t;if(p)return p.createJoint(f)},this.createJointFromObj=function(f){var p=i.n?.r?.t;if(p)return p.createJointFromObj(f)},this.addVertex=function(f){var p=i.n?.r?.t;if(p)return p.addVertex(f)},this.addSegment=function(f){var p=i.n?.r?.t;if(p)return p.addSegment(f)},this.addGoal=function(f){var p=i.n?.r?.t;if(p)return p.addGoal(f)},this.addPlane=function(f){var p=i.n?.r?.t;if(p)return p.addPlane(f)},this.addDisc=function(f){var p=i.n?.r?.t;if(p)return p.addDisc(f)},this.addJoint=function(f){var p=i.n?.r?.t;if(p)return p.addJoint(f)},this.addSpawnPoint=function(f){var p=i.n?.r?.t;if(p)return p.addSpawnPoint(f)},this.addPlayer=function(f){var p=i.n?.r?.t;if(p)return p.addPlayer(f)},this.findVertexIndicesOfSegmentObj=function(f){var p=i.n?.r?.t;if(p)return p.findVertexIndicesOfSegmentObj(f)},this.findVertexIndicesOfSegment=function(f){var p=i.n?.r?.t;if(p)return p.findVertexIndicesOfSegment(f)},this.updateVertex=function(f,p){var q=i.n?.r?.t;if(q)return q.updateVertex(f,p)},this.updateSegment=function(f,p){var q=i.n?.r?.t;if(q)return q.updateSegment(f,p)},this.updateGoal=function(f,p){var q=i.n?.r?.t;if(q)return q.updateGoal(f,p)},this.updatePlane=function(f,p){var q=i.n?.r?.t;if(q)return q.updatePlane(f,p)},this.updateDisc=function(f,p){var q=i.n?.r?.t;if(q)return q.updateDisc(f,p)},this.updateDiscObj=function(f,p){var q=i.n?.r?.t;if(q)return q.updateDiscObj(f,p)},this.updateJoint=function(f,p){var q=i.n?.r?.t;if(q)return q.updateJoint(f,p)},this.updateSpawnPoint=function(f,p,q){var w=i.n?.r?.t;if(w)return w.updateSpawnPoint(f,p,q)},this.updatePlayer=function(f,p){var q=i.n?.r?.t;if(q)return q.updatePlayer(f,p)},this.removeVertex=function(f){var p=i.n?.r?.t;if(p)return p.removeVertex(f)},this.removeSegment=function(f){var p=i.n?.r?.t;if(p)return p.removeSegment(f)},this.removeGoal=function(f){var p=i.n?.r?.t;if(p)return p.removeGoal(f)},this.removePlane=function(f){var p=i.n?.r?.t;if(p)return p.removePlane(f)},this.removeDisc=function(f){var p=i.n?.r?.t;if(p)return p.removeDisc(f)},this.removeJoint=function(f){var p=i.n?.r?.t;if(p)return p.removeJoint(f)},this.removeSpawnPoint=function(f,p){var q=i.n?.r?.t;if(q)return q.removeSpawnPoint(f,p)},this.removePlayer=function(f){var p=i.n?.r?.t;if(p)return p.removePlayer(f)},this.updateStadiumPlayerPhysics=function(f){var p=i.n?.r?.t;if(p)return p.updateStadiumPlayerPhysics(f)},this.updateStadiumBg=function(f){var p=i.n?.r?.t;if(p)return p.updateStadiumBg(f)},this.updateStadiumGeneral=function(f){var p=i.n?.r?.t;if(p)return p.updateStadiumGeneral(f)},this.updatePlugin=function(f,p){var q=h.plugins[f];if(!q)throw ji(Ei.PluginNotFoundError,f);var{name:w,active:g}=q;if(w!=p.name)throw ji(Ei.PluginNameChangeNotAllowedError);g&&h.setPluginActive(w,!1),q.finalize?.(),q.room=null,h.plugins[f]=p,h.pluginsMap[w]=p,p.room=h,p.initialize?.(),h._onPluginUpdate?.(q,p),g&&(p.active=!1,h.setPluginActive(w,!0))},this.updateLibrary=function(f,p){var q=h.libraries[f];if(!q)throw ji(Ei.LibraryNotFoundError,f);var{name:w}=q;if(w!=p.name)throw ji(Ei.LibraryNameChangeNotAllowedError);q.finalize?.(),q.room=null,h.libraries[f]=p,h.librariesMap[w]=p,p.room=h,p.initialize?.(),h._onLibraryUpdate?.(q,p)},t?.(this),i.ff&&(this.libraries.forEach(f=>{f.room=h,f.initialize?.()}),u.room=h,u.initialize?.(),s&&(s.room=h,s.initialize?.()),this.plugins.forEach(f=>{f.room=h,f.initialize?.()}),this.activePlugins.forEach(f=>{h._onPluginActiveChange?.(f)})),this.startStreaming=({immediate:f=!0,onClientCount:p,emitData:q})=>{var w=i.n?.r;if(!(!i.isHost||h.isRecording()||!w||w.vi)){var g=new Map,N=ge.L(16384),S=0;return{onSuccess:()=>{w.vi=function(R){if(f){N.o(2),N.kt(w.k),N.Ft(R.i),jh.Nn(R,N),q?.(N._t()),N.l=0;return}var E=g.get(w.k);E||(E=[],g.set(w.k,E)),E.push(R)}},onDataReceived:R=>{R=new DataView(R.buffer,R.byteOffset,R.byteLength);var E=R.getUint8(0),M=R.getUint16(1);switch(E){case 0:{S=M,p?.(M);break}case 1:{E=ge.L(),E.o(1),E.Ft(M),M=ge.L(),i.n.r.hc(M),E.Yt(Eh.deflateRaw(M._t())),q?.(E._t());break}}},interval:()=>{for(var R=g.keys(),E=R.next(),M=w.k;!E.done;){var b=E.value,tt=g.get(b);N.Ft(M-b),N.Ft(tt.length),tt.forEach(nt=>{N.Ft(nt.i),jh.Nn(nt,N)}),E=R.next()}g.clear();var ft=N._t();if(N.l=0,S!=0){ft=Eh.deflateRaw(ft);var W=new Uint8Array(ft.byteLength+5),G=new DataView(W.buffer,W.byteOffset,W.byteLength);G.setUint8(0,0),G.setUint32(1,M),W.set(ft,5),q?.(W)}}}}},this.stopStreaming=()=>{var f=i.n?.r;!i.isHost||h.isRecording()||!f?.vi||(f.vi=null)}}Fh.NY=M1});var Te=O((zy,ur)=>{var{backend:Uh,qi:d1,yn:E1,Ls:j1,E:_1}=P(),{parseGeo:I1}=Xi();function B1(t,i){return(Uh.secure?"https":"http")+"://"+Uh.hostname+"/play?c="+t+(i?"&p=1":"")}function G1(t){var i=t?.Bi;!i&&(i=t.Bi={}),i.setValue=(s,u)=>{i[s]=u,i.onValueSet?.(s,u)};var n=i.crappy_router||!1;n!=i.crappy_router&&i.setValue("crappy_router",n),n=i.player_name||"abc",n!=i.player_name&&i.setValue("player_name",n),n=i.avatar||null,n!=i.avatar&&i.setValue("avatar",n);var r={lat:40,lon:40,flag:"tr"};if(!i.geo)i.setValue("geo",r);else{var e=i.geo;n=I1(e,r),(e.lat!=n.lat||e.lon!=n.lon||e.flag!=n.flag)&&i.setValue("geo",n)}}function V1(t){var i=t.wt={customClientIds:new Set,n:null,roomState:null,dv:null,isHost:!1,Cr:Promise.resolve(),keyState:0,renderer:t.renderer,Bi:t.Bi,ff:!t.vf,onOperationReceived:function(n,r,e){var s=t.room._onOperationReceived;if(!s)return!0;var u=n.eventType;return u==null?!0:s(u,n,r,e)},W:function(n,r,e){if(i.isHost)return n.i=e||0,n.De=r,i.onOperationReceived(n,i.n?.r.k,null)}};return t.wt=i,i}function Hh(){this.Et=9,this.qi=null,this.yn=null,this.vf=!1,this.Mn=-1,this.renderer=null,this.config={},this.libraries=[],this.plugins=[],this.Mu=null,this.du=null,this.Eu=null,this.ju=null,this.pf=null,this.wf=null,this.Ss=null,this.mr=null,this.Ee=null,this.Bi=null}function L1(t){var i=new Hh;return i.Et=t.version==null?j1:t.version,i.qi=t.proxyAgent||d1,i.yn=t.identityToken||E1,i.vf=t.noPluginMechanism,i.Mn=t.kickTimeout||-1,i.renderer=t.renderer,i.config=t.config||{},i.libraries=t.libraries||[],i.plugins=t.plugins||[],i.Mu=t.preInit,i.du=t.onSuccess,i.Eu=t.onFailure,i.ju=t.onLeave,i.pf=t.onConnectionStateChange,i.wf=t.onReverseConnection,i.Ss=t.onRequestRecaptcha,i.mr=t.cancel,i.Ee=t.useRecaptchaToken,i.Bi=t.storage,G1(i),i}_1(Hh,["version","proxyAgent","identityToken","noPluginMechanism","kickTimeout","renderer","config","libraries","plugins","preInit","onSuccess","onFailure","onLeave","onConnectionStateChange","onReverseConnection","onRequestRecaptcha","cancel","useRecaptchaToken","storage"],[]);ur.NY=ur.fc||(ur.fc={roomLink:B1,yf:V1,qf:L1})});var Pe=O((xy,hr)=>{var{setTimeout:F1,clearTimeout:Wh,console:Oe,performance:Re}=P(),{q:U1}=$(),Kh=Y(),{nh:Jh}=Ci(),H1=t=>(Oe.warn(Jh(Kh.NoProxyIdentityProblem)||"NoProxyIdentityProblem"),t=Jh(Kh.NoProxyIdentitySolution),t&&Oe.warn(t));function Qh(t){this.oc=1e4,this.Qn=!0;var i=this;t.Cf(),this.Rt=t.Rt,this.dn=t.dn,this.je=t.je,this.Xn=t.Xn,this.gf=Re.now();var n=null;n=function(){var s=i.oc-i.lc();0>=s?i.rt():(Wh(i.mf),s=F1(n,s+1e3),i.mf=s)},n(),this.Rt.oniceconnectionstatechange=function(){var s=i.Rt.iceConnectionState;s!="closed"&&s!="failed"||i.rt()},t=0;for(var r=this.dn;t<r.length;){var e=r[t];++t,e.onmessage=function(s){i.Qn&&(i.gf=Re.now(),i.Ts!=null&&i.Ts(s.data))},e.onclose=function(){i.rt()}}}Qh.prototype={lc:function(){return Re.now()-this.gf},oi:function(t,i){if(this.Qn){var n=this.dn[t];if(n.readyState=="open"){var r=i.We();try{n.send(r)}catch(e){Oe.log(e instanceof U1?e.zt:e)}}}},rt:function(){Wh(this.mf),this.Qn&&(this.Qn=!1,this.Rt.close(),this._e!=null&&this._e())}};hr.NY=hr.cc||(hr.cc={kf:[{name:"ro",reliable:!0,_u:!0},{name:"ru",reliable:!0,_u:!1},{name:"uu",reliable:!1,_u:!1}],Nf:H1,Sf:Qh})});var Ae=O((by,$h)=>{var{setTimeout:Xh,clearTimeout:Yh,console:K1,RTCPeerConnection:J1,E:W1}=P(),{oh:Q1}=j();function $i(t,i,n){this.kr=null,this.Xn=null,this.je=[],this.Tf=0,this.Of=!1,this.Os=[],this.dn=[],this.Rt=i&&new J1({iceServers:i},$i.vc);var r=this;if(this.Iu=new Promise(function(e){r.pc=e}),this.id=t,i)for(this.Rt.onicecandidate=function(e){e.candidate==null?r.pc(r.Os):(e=e.candidate,e.candidate!=null&&e.candidate!=""&&(r.Rs!=null&&r.Rs(e),r.Os.push(e)))},i=0;i<n.length;)this.wc(n[i++])}$i.vc={mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}};$i.prototype={Bu:function(t){t==null&&(t=1e4),Yh(this.kr),this.kr=Xh(this.yc.bind(this),t)},qc:function(t,i){var n=this;this.Rf(this.Rt.setRemoteDescription(t).then(function(){return n.Rt.createAnswer()}),i,500)},Cc:function(){this.Rf(this.Rt.createOffer(),[],1e3)},Rf:function(t,i,n){var r=this;t.then(function(e){return r.Rt.setLocalDescription(e).then(function(){return e})}).then(function(e){function s(){return e}for(var u=0;u<i.length;)r.Pf(i[u++]);return Q1(r.Iu,n).then(s,s)}).then(function(e){r.Gu(e)}).catch(function(e){K1.log(e),r.Ps()})},wc:function(t){var i=this,n={id:this.dn.length,negotiated:!0,ordered:t._u};t.reliable||(n.maxRetransmits=0),t=this.Rt.createDataChannel(t.name,n),t.binaryType="arraybuffer",t.onopen=function(){for(var r=0,e=i.dn;r<e.length;)if(e[r++].readyState!="open")return;i.Yn!=null&&i.Yn()},t.onclose=function(){i.Ps()},t.onmessage=function(){i.Ps()},this.dn.push(t)},Pf:function(t){var i=this;Xh(function(){return i.Rt.addIceCandidate(t)},this.Tf)},yc:function(){this.Ps()},Ps:function(){this.En!=null&&this.En(),this.rt()},rt:function(){this.Cf(),this.Rt.close()},Cf:function(){Yh(this.kr),this.Gu=this.Yn=this.Rs=this.En=null,this.Rt.onicecandidate=null,this.Rt.ondatachannel=null,this.Rt.onsignalingstatechange=null,this.Rt.oniceconnectionstatechange=null;for(var t=0,i=this.dn;t<i.length;){var n=i[t];++t,n.onopen=null,n.onclose=null,n.onmessage=null}}};W1($i,[null,null,null,null,null,null,null,null,null,"id"],[]);$h.NY=$i});var zh=O((Dy,Zh)=>{var{E:Me}=P(),{lh:X1}=ci(),pt=gr(),{ipToNumber:kt,numberToIp:Y1,compareBits:$1}=Xi(),fr=340282366920938463463374607431768211455n;function Zi(){this.ipv6=!1,this.value=null,this.mask=null}Zi.create=function(t,i){if(t==null)return;let n=new Zi,r=t.__proto__.constructor.name;return n.ipv6=r=="BigInt",n.value=t,n.mask=r!=i?.__proto__.constructor.name?n.ipv6?fr:-1:i,n};function oi(){this.id=null,this.type=null,this.value=null}oi.create=function(t,i,n){var r=new oi;return r.id=t,r.type=i,r.value=n,r};oi.prototype={As:function(){var t=new oi;return t.id=this.id,t.type=this.type,t.value=this.value.As?this.value.As():this.value,t}};function _i(){this.Ie=null,this.Vu=null,this.ips=null,this.Qt=null}_i.create=function(t,i,n,r){var e=new _i;return e.Ie=t,e.Vu=i,e.ips=n,e.Qt=r,e};_i.prototype={As:function(){var t=new _i;return t.Ie=this.Ie,t.Vu=this.Vu,t.ips=this.ips,t.Qt=this.Qt,t}};function Z1(t){var i=[],n=1,r=new Set,e=[];this.addPlayer=h=>{var l=t.Un.get(h?.id)?.et;if(!(!l||i.findIndex(v=>v.type==pt.Player&&v.value.Ie==h.id)>-1)){var o=[];return l.Xn&&o.push(X1(l.Xn)),l.je.forEach(v=>{o.includes(v)||o.push(v)}),o.forEach(v=>{var y=kt(v);y&&e.push(Zi.create(y))}),r.add(h.Qt),i.push(oi.create(n,pt.Player,_i.create(h.id,h.name,o,h.Qt))),n++}},this.addIp=(...h)=>h.map(l=>{var o=typeof l;if(o=="string")l={ip:l};else if(o!="object")return;var v=kt(l.ip);if(v==null)return;let y=v.__proto__.constructor.name=="BigInt";var C=kt(l.mask);v.__proto__.constructor.name!=C?.__proto__.constructor.name&&(C=y?fr:-1,l.mask=Y1(C));for(var k=0;k<i.length;k++){let f=i[k];if(f.type==pt.IP&&v==kt(f.value.ip)&&C==kt(f.value.mask))return}return e.push(Zi.create(v,C)),i.push(oi.create(n,pt.IP,l)),n++}),this.addAuth=(...h)=>h.map(l=>{if(!r.has(l))return i.push(oi.create(n,pt.Auth,l)),r.add(l),n++}),this.checkIp=h=>{let l=kt(h);if(l==null)return!1;let o=l.__proto__.constructor.name=="BigInt";for(var v=0;v<e.length;v++){let y=e[v];if(o==y.ipv6&&$1(l,y.value,y.mask))return!0}return!1},this.checkAuth=h=>r.has(h);let s=(h,l)=>{let o=kt(h);if(o==null)return;let v=o.__proto__.constructor.name=="BigInt";var y=kt(l);y==null&&(y=v?fr:-1);let C=y==(v?fr:-1);for(var k=[],f=0;f<e.length;f++){let p=e[f];v==p.ipv6&&o==p.value&&y==p.mask&&k.push(f)}for(;k.length>0;)e.splice(k.pop(),1);for(k.length=0,i.forEach((p,q)=>{C&&p.type==pt.Player&&p.value.ips.findIndex(w=>kt(w)==o)>-1?(p.type=pt.Auth,p.value=p.value.Qt):p.type==pt.IP&&o==kt(p.value.ip)&&y==kt(p.value.mask)&&k.push(q)});k.length>0;)i.splice(k.pop(),1)},u=h=>{r.delete(h);var l=[],o=[];for(i.forEach((v,y)=>{v.type==pt.Player&&h==v.value.Qt?(o.splice(o.length,0,...v.value.ips),l.push(y)):v.type==pt.Auth&&h==v.value&&l.push(y)});l.length>0;)i.splice(l.pop(),1);this.addIp(...o)};this.remove=h=>{var l=i.findIndex(y=>y.id==h);if(l<0)return!1;var{type:o,value:v}=i.splice(l,1)[0];switch(o){case pt.Player:v.ips.forEach(y=>{s(y)}),u(v.Qt);break;case pt.IP:s(v.ip,v.mask);break;case pt.Auth:u(v);break}return!0},this.removePlayer=h=>{var l=i.findIndex(v=>v.type==0&&v.value?.Ie==h);if(l<0)return!1;var{value:o}=i.splice(l,1)[0];return o.ips.forEach(v=>{s(v)}),u(o.Qt),!0},this.clear=()=>{r.clear(),e.length=0,i.length=0},this.getList=()=>i.map(h=>h.As())}Me(Zi,["ipv6","value","mask"],[]);Me(oi,["id","type","value"],[]);Me(_i,["pId","pName","ips","auth"],[]);Zh.NY=Z1});var of=O((i2,ff)=>{var nf=Y(),{proxy:zi,backend:xh,yn:ay,setTimeout:xi,clearTimeout:or,setInterval:z1,clearInterval:bh,console:x1,WebSocket:Dh,performance:cr,pako:vr,RTCIceCandidate:ah,RTCSessionDescription:b1,E:t2}=P(),{Event:lr}=B(),{Ht:rf,q:ht}=$(),{ch:D1,J:a1}=ci(),{kf:tp,Nf:ip,Sf:np}=Pe(),rp=Ae(),ef=Ti(),ep=zh(),{D:tf,F:Ii,w:a,kt:sf,extend:sp}=j(),up=nr(),hp=Ce(),{Kh:fp,pe:op,CustomEvent:lp,BinaryCustomEvent:cp,vs:vp}=hi();function bi(t,i,n,r,e){this.haxball=t,this.Ou=!1,this.Nr=!1,this.Ms=!1,this.pn=null,this.id="",this.gc=5e4,this.hf=1e4,this.$n=new Map,this.mc=i,this.kc=n,this.Nc=r,this.Ae=e||"",i&&this.ms()}bi.Af=function(t){try{if(t=t.candidate.split(" "),t[6]!="typ")throw new ht(null);if(t[7]=="srflx")return t[4]}catch{}return null};bi.prototype={rt:function(){if(or(this.Tu),or(this.Sr),this.Sr=null,bh(this.Mf),this.X!=null)try{this.X.onmessage=null,this.X.onerror=null,this.X.onclose=null,this.X.onopen=null,this.X.close(),this.X=null}catch{}this.df()},Lu:function(t){var i=this;if(this.pn!=null||t!=null){if(this.pn!=null&&t!=null&&this.pn.byteLength==t.byteLength){for(var n=new Uint8Array(this.pn),r=new Uint8Array(t),e=!1,s=0,u=this.pn.byteLength;s<u;){var h=s++;if(n[h]!=r[h]){e=!0;break}}if(!e)return}this.pn=t.slice(0),this.Ms=!0,this.X!=null&&this.X.readyState==1&&this.Sr==null&&(this.Fu(),this.Sr=xi(function(){i.Sr=null,i.X.readyState==1&&i.Ms&&i.Fu()},1e4))}},Ru:function(t){function i(){n.X!=null&&n.X.readyState==1&&n.Nr!=n.Ou&&n.Ef(),n.jf=null}var n=this;this.Nr=t,this.jf==null&&(i(),this.jf=xi(i,1e3))},ms:function(t){function i(e){if(e=e.sitekey,e==null)throw new ht(null);if(r.haxball.Ee=s=>{r.haxball.Ee=null,r.ms(s)},!r.haxball.Ss)throw rf(nf.MissingRecaptchaCallbackError);r.haxball.Ss(e)}function n(e){var s=e.url;if(s==null)throw new ht(null);if(e=e.token,e==null)throw new ht(null);zi?.WebSocketUrl&&(s=zi?.WebSocketUrl),!s.endsWith("host")&&(!s.endsWith("/")&&(s+="/"),s+="host");var u=r.haxball.yn;!zi&&u&&(ip(),u=null);var h=u?[u]:[];if(r.haxball.qi||zi?.WebSocketChangeOriginAllowed){var l={};r.haxball.qi&&(l.agent=r.haxball.qi),zi.WebSocketChangeOriginAllowed&&(l.headers={Origin:(xh.secure?"https":"http")+"://"+xh.hostname}),r.X=new Dh(s+"?token="+e,h,l)}else r.X=new Dh(s+"?token="+e,h);r.X.binaryType="arraybuffer",r.X.onopen=function(){r.Sc()},r.X.onclose=function(o){r.gs(o.code!=4001)},r.X.onerror=function(){r.gs(!0)},r.X.onmessage=r.Uu.bind(r)}var r=this;up.Il(this.mc,"token="+(t||this.Ae)+"&rcr=","application/x-www-form-urlencoded").then(function(e){switch(e.action){case"connect":r.haxball.Ee=null,n(e);break;case"recaptcha":i(e)}}).catch(function(e){x1.log(e instanceof ht?e.zt:e),r.haxball.Ee=null,r.gs(!0)})},Sc:function(){var t=this;this.pn!=null&&this.Fu(),this.Nr!=0&&this.Ef(),this.Mf=z1(function(){t.Hu()},4e4)},Uu:function(t){switch(t=new Ii(new DataView(t.data),!1),t.T()){case 1:this.Ku(t);break;case 4:this.Ju(t);break;case 5:this.Tc(t);break;case 6:this.Oc(t);break;case 111:this.Rc(t);break}},Rc:function(t,i){xi(()=>{try{this.haxball.room?.setPlayerIdentity?.(t.ut(),t.Ar())}catch{i&&this.Tr(i,4111)}},3e3)},Ku:function(t){var i=t.ut(),n=D1(t.Lt(t.T())),r,e,s;try{t=new Ii(new DataView(vr.inflateRaw(t.Lt()).buffer),!1),r=t.T()!=0,e=t.li();for(var u=t.Ar(),h=[],l=0;l<u.length;)h.push(new ah(u[l++]));s=h}catch{this.Tr(i,0);return}this.Pc(i,n,e,s,t,r)},Pc:function(t,i,n,r,e,s){var u=this;if(16<=this.$n.size)this.Tr(t,4104);else if(this.banList.checkIp(i))this.Tr(t,4102);else{for(var h=[],l=0;l<r.length;){var o=bi.Af(r[l++]);if(o!=null){if(this.banList.checkIp(o)){this.Tr(t,4102);return}h.push(o)}}if(this._f!=null&&(l=new Ii(e.v),l.l=e.l,e=this._f(l),e!=null)){this.Tr(t,e);return}var v=new rp(t,this.kc,this.Nc);for(s&&(v.Tf=2500),v.je=h,v.Xn="",l=0;l<i.length;l++)v.Xn+=a1.Xs(i.charCodeAt(l));this.$n.set(t,v),v.En=function(){u.wn(0,v,null),u.$n.delete(v.id)},v.Yn=function(){u.$n.delete(v.id),u.wn(0,v,null),u.If!=null&&u.If(new np(v))},v.Gu=function(y){u.Wu(v,y,v.Os,null),v.Iu.then(function(){u.wn(0,v,null)}),v.Rs=function(C){u.Qu(v,C)}},v.Bu(),v.qc(new b1({sdp:n,type:"offer"}),r)}},Ju:function(t){var i=t.ut(),n;try{t=new Ii(new DataView(vr.inflateRaw(t.Lt()).buffer),!1),n=new ah(t.Ar())}catch{return}this.Ac(i,n)},Ac:function(t,i){var n=this.$n.get(t);if(n!=null){var r=bi.Af(i);if(r!=null&&(n.je.push(r),this.banList.checkIp(r)))return;n.Pf(i)}},Tc:function(t){this.id=t.bn(t.T()),this.ds!=null&&this.ds(this.id)},Oc:function(t){this.Ae=t.bn(t.v.byteLength-t.l)},wn:function(t,i,n){if(!i.Of){t==0&&(i.Of=!0),i=i.id;var r=a.L(32,!1);r.o(t),r.kt(i),n!=null&&r.Yt(vr.deflateRaw(n._t())),this.X.send(r.jn())}},Tr:function(t,i){var n=a.L(16,!1);n.o(0),n.kt(t),n.Ft(i),this.X.send(n.jn())},Hu:function(){var t=a.L(1,!1);t.o(8),this.X.send(t.jn())},Fu:function(){this.Ms=!1;var t=a.L(256,!1);t.o(7),this.pn!=null&&t.Qe(this.pn),this.X.send(t.jn())},Ef:function(){var t=a.L(2,!1);t.o(this.haxball.Et),t.o(this.Nr?1:0),this.X.send(t.jn()),this.Ou=this.Nr,this.haxball.room._onRoomRecaptchaModeChange?.(this.Nr)},Wu:function(t,i,n,r){var e=a.L(32,!1);e.ci(i.sdp),e.Xe(n),r!=null&&e.Yt(r._t()),this.wn(1,t,e)},Qu:function(t,i){var n=a.L(32,!1);n.Xe(i),this.wn(4,t,n)},df:function(){for(var t=this.$n.values(),i=t.next(),n;!i.done;)n=i.value,i=t.next(),n.rt();this.$n.clear()},gs:function(t){var i=this;this.df(),or(this.Sr),this.Sr=null,this.Ms=!1,bh(this.Mf),or(this.Tu),t&&(this.Tu=xi(function(){i.ms()},this.hf+Math.random()*this.gc|0))}};function uf(t){this.Bf=new Map,this.Mc=new sf(100,16),this.Be=!1,this.rr=0,this.et=t,t=a.L(8),t.g(Math.random()),this.Ge=t._t()}uf.prototype={oi:function(t,i){i==null&&(i=0),this.et.oi(i,t)}};function hf(t,i){if(this.haxball=t,this.fi=null,this.wr=32,this.Un=new Map,this.yi=[],this.Es=4,this.dc=600,ef.call(this,i?.t),this.Et=i?.Et,this.Ec=1,this.Gf=0,this.qr=!1,this.ks=!0,this.de=null,this.yr=null,this.vr=cr.now(),this.Vt=i&&new bi(t,i.backendUrl,i.Xu,tp,i.Yu),!!i){this.Vt.banList=new ep(this),this.Vt._f=this.jc.bind(this);var n=this;this.Vt.If=function(r){n._c(r)},this.Vt.ds=function(r){n.ds?.(r)}}}hf.prototype=sp(ef.prototype,{rt:function(){this.Vt.rt();for(var t=0,i=this.yi;t<i.length;){var n=i[t++].et;n._e=null,n.Ts=null,n.rt()}},Ic:function(t,i,n,r){var e=this.Un.get(t.id);e!=null&&(r&&this.Vt.banList.addPlayer(t),t=a.L(),t.o(5),t.o(r?1:0),t.ci(i),n==null&&(n=""),t.ci(n),e.oi(t),e.et.rt())},Ql:function(){this.Vt.banList.clear()&&this.haxball.room._onBansClear?.()},Wl:function(t){this.Vt.banList.removePlayer(t)&&this.haxball.room._onBanClear?.(t)},Xl:function(t){return this.Vt.banList.addPlayer(t)},Yl:function(...t){return this.Vt.banList.addIp(...t)},$l:function(...t){return this.Vt.banList.addAuth(...t)},Zl:function(t){return this.Vt.banList.remove(t)},Lu:function(t){this.Vt.Lu(t)},Ru:function(t){this.Vt.Ru(t)},j:function(t){var i=this.k+this.Es+this.mi;t.an.lt||(i=this.k),t.St=i,this.Ir(t),this.js(),0<this.yi.length&&this.Ve(this._s(t),1)},Ns:function(t,i,n){t.i=i;var r;n?(t.apply(this.t),this.Bc(t,1)):0<this.yi.length&&(r=this.k+this.Es+this.mi,t.an.lt||(r=this.k),t.St=r,this.Ir(t),this.js(),this.Ve(this._s(t),1))},gr:function(t,i,n){if(i==0){t.apply(this.t);return}var r=this.Un.get(i);if(r!=null){!n&&(t.i=0);var e=a.L();e.o(6),lr.Nn(t,e),r.oi(e,0)}},ct:function(){var t=((cr.now()-this.vr)*this.rn|0)-this.k;t>0&&this.Nh(t),this.k-this.Vf>=7&&this.js(),this.k-this.Gf>=this.dc&&(this.js(),this.Gc())},en:function(t=0){return this.mi<0&&(this.mi=0),this.Sh((cr.now()-this.vr+t)*this.rn-this.k+this.Es+this.mi)},jc:function(t){if(!this.qr&&this.yi.length>=this.wr)return 4100;try{if(t.At()!=this.Et)throw new ht(null)}catch{return 4103}try{var i=t.ei();if(this.fi!=null&&i!=this.fi)throw new ht(null)}catch{return 4101}},_c:function(t){var i=this;if(!this.qr&&this.yi.length>=this.wr)t.rt();else{var n=new uf(t);this.yi.push(n),t.Ts=function(r){r=new Ii(new DataView(r)),i.Vc(r,n)},t._e=function(){tf.remove(i.yi,n),i.Un.delete(n.id),i.Lc?.(n.id)},t=a.L(1+n.Ge.byteLength),t.o(0),t.Ut(n.Ge.byteLength),t.Yt(n.Ge),n.oi(t)}},_s:function(t){var i=a.L();return i.o(2),this.$u(t,i),i},$u:function(t,i){i.kt(t.St),i.Ut(t.V),i.Ft(t.i),i.kt(t.Bn),lr.Nn(t,i)},js:function(){if(!(0>=this.k-this.Vf)&&this.yi.length!=0){var t=a.L();t.o(3),t.kt(this.k),t.kt(this.Gn),this.Ve(t,2),this.Vf=this.k}},Ve:function(t,i){i==null&&(i=0);for(var n=0,r=this.yi;n<r.length;){var e=r[n];++n,e.Be&&e.oi(t,i)}},Bc:function(t,i){i==null&&(i=0);var n=a.L();n.o(6),lr.Nn(t,n);for(var r=0,e=this.yi;r<e.length;){var s=e[r];++r,s.Be&&this.haxball.wt.customClientIds.has(s.id)&&s.oi(n,0)}},Fc:function(t){var i=a.L();i.o(1);var n=a.L();n.Ft(t.id),n.kt(this.k),n.kt(this.Gn),n.Ut(this.ti),this.t.$(n);for(var r=this.tn.list,e=0,s=r.length;e<s;)this.$u(r[e++],n);i.Yt(vr.deflateRaw(n._t())),t.oi(i)},hc:function(t){t.kt(this.k),t.kt(this.Gn),t.Ut(this.ti),this.t.$(t);var i=this;this.tn.list.forEach(n=>{i.$u(n,t)})},Uc:function(t){xi(()=>{this.t.d.forEach(i=>{i.su&&this.haxball.room?.setPlayerIdentity(i.id,i.su,t.id)})},3e3)},Gc:function(){if(this.Gf=this.k,this.yi.length!=0){var t=fp.create(this.t.Rl());t.St=this.k,t.V=this.ti++,t.i=0,this.Ve(this._s(t))}},Hc:function(t,i){var n=this,r=t.Lt(t.Kt()),e=t.Lt(t.Kt()),s=i.Ge;i.Ge=null,hp.Ll(r,s).catch(function(){return null}).then(function(u){try{if(n.Vt.banList.checkAuth(u))throw new ht(rf(nf.AuthBannedError,u));if(n.yi.indexOf(i)!=-1){i.Ev=u;var h=n.Ec++;i.id=h,n.Un.set(h,i),n.Kc?.(h,new Ii(new DataView(e.buffer,e.byteOffset,e.byteLength),!1),i.et.Xn,u),i.Be=!0,n.Fc(i),n.Uc(i)}}catch(l){n.Lf(i,l instanceof ht?l.zt:l)}})},Vc:function(t,i){this.ct();try{if(!i.Mc.hh())throw new ht(1);var n=t.T();if(i.Be)switch(n){case 1:this.Jc(t,i);break;case 2:this.Wc(t,i);break;default:throw new ht(0)}else if(n==0)this.Hc(t,i);else throw new ht(0);if(0<t.v.byteLength-t.l)throw new ht(2)}catch(r){this.Lf(i,r instanceof ht?r.zt:r)}},Lf:function(t,i){this.haxball.onHostError?.(i,t.id),this.Un.delete(t.id),tf.remove(this.yi,t),t.Be&&this.Ff!=null&&this.Ff(t.id),t.et.rt()},Wc:function(t,i){var n=t.m(),r=this.haxball.room._modifyPlayerPing;r&&(i.rr=r(i.id,t.Kt()));var e=a.L();e.o(4),e.g((cr.now()-this.vr)*this.rn+this.Es),e.g(n),i.oi(e,2)},Jc:function(t,i){var n=t.ut(),r=t.ut(),e=lr.ai(t),s=e.an.nu;if(s!=null){var u=i.Bf.get(s);if(u==null&&(u=new sf(s.ru,s.eu),i.Bf.set(s,u)),!u.hh())throw new ht(3)}if(e.i=i.id,s=this.k,u=this.k+120,e.Bn=r,e.St=n<s?s:n>u?u:n,!(e.__proto__.it==op&&e.S.p.length==0)&&this.haxball.wt.onOperationReceived(e,this.k,n)){if(e.__proto__.it==lp||e.__proto__.it==cp||e.__proto__.it==vp){this.Ns(e,e.i,!0);return}e.mh(this.t)&&(this.Ir(e),this.Ve(this._s(e),1))}}});ff.NY=hf});var de=O((e2,yf)=>{var{clearTimeout:pp,setInterval:wp,clearInterval:yp,requestAnimationFrame:vf,cancelAnimationFrame:qp,performance:n2,E:r2}=P(),zt=ot(),{le:pf,es:lf,ss:Cp,us:gp,hs:mp,fs:cf,pe:kp,we:Bi,os:Np,ls:Sp,cs:Tp}=hi(),{ef:Op}=ve();function wf(t){this.Is=0,this.Qc=0,this.internalData=t?.wt}wf.prototype={ct:function(){var t=this.internalData.keyState;this.Bs!=null&&t!=this.Is&&(this.Is=t,this.Bs(lf.create(t)))},Xc:function(){this.Bs!=null&&this.Is!=0&&(this.Is=this.Qc=0,this.Bs(lf.create(0)))}};function pr(t,i){if(this.haxball=t,this.Yc=null,this.Uf=!1,this.Wn=null,this.Zu=0,this.Tt=new wf(t),this.pr=null,this.Hf=!1,this.r=i,!!i){var n=this;i.t.nr=r=>{t.room._onPlayerInputChange?.(r.id,r.Tt)},i.t.Hr=r=>{t.room._onPlayerJoin?.(r)},i.t.Ce=r=>{t.room._onPlayerBallKick?.(r?.id)},i.t.me=r=>{t.room._onTeamGoal?.(r?.id)},i.t.Se=r=>{t.room._onGameEnd?.(r.id)},i.t.Wr=(r,e,s)=>{!s&&t.room._onGamePauseChange?.(e,r?.id)},i.t.Te=function(r){t.room._onGameStart?.(r?.id)},i.t.qe=()=>{t.room._onGameTick?.()},i.t.ge=()=>{t.room._onKickOff?.()},i.t.dr=(r,e,s,u)=>{t.room._onCollisionDiscVsDisc?.(r,e._,s,u._)},i.t.Er=(r,e,s)=>{t.room._onCollisionDiscVsPlane?.(r,e._,s)},i.t.jr=(r,e,s)=>{t.room._onCollisionDiscVsSegment?.(r,e._,s)},i.t._r=(r,e,s,u)=>{t.room._onCollisionDiscVsVertex?.(r,e._,s,u)},i.t.Dn=(r,e,s)=>{t.room._onModifyJoint?.(r,e,s)},i.t.fr=(r,e,s,u,h)=>{t.room._onAutoTeams?.(r,e,s,u,h)},i.t.Xr=(r,e)=>{t.room._onTimeLimitChange?.(r,e)},i.t.Qr=(r,e)=>{t.room._onScoreLimitChange?.(r,e)},i.t.ye=r=>{t.room._onPlayerDiscCreated?.(r)},i.t.Tn=r=>{t.room._onPlayerDiscDestroyed?.(r)},i.t.ar=(r,e)=>{t.room._onPlayerAvatarChange?.(r,e)},i.t.se=(r,e)=>{t.room._onPlayerHeadlessAvatarChange?.(r,e)},i.t.ne=(r,e)=>{t.room._onPlayersOrderChange?.(r,e)},i.t.Zr=(r,e,s)=>{t.room._onPlayerTeamChange?.(r,e,s)},i.t.ie=(r,e,s)=>{t.room._onTeamColorsChange?.(r,e,s)},i.t.zr=(r,e)=>{t.room._onTeamsLockChange?.(r,e)},i.t.Th=(r,e,s)=>{t.wt.isHost?(r=i.t.getPlayer(r),r&&s==1&&(r.sn=!0,t.wt.customClientIds.add(r.id))):s==0&&(t.wt.customClientIds.add(r),r=i.t.getPlayer(r),r&&(r.sn=!0),i.Pu=!0,r=i.t.getPlayer(e),r&&(r.sn=!0),t.wt.customClientIds.add(e),i.j(pf.create(1,e,1),0,!0))},i.t.he=(r,e,s)=>{t.room._onCustomEvent?.(r,e,s)},i.t.fe=(r,e,s)=>{t.room._onBinaryCustomEvent?.(r,e,s)},i.t.oe=(r,e,s)=>{t.room._onIdentityEvent?.(r,e,s)},i.t.ue=(r,e,s,u)=>{t.room._onSetDiscProperties?.(r,e,s,u)},i.t.Dr=r=>{t.room._onPingData?.(r)},i.t.Fh=()=>t?.room?.hostPing||0,i.t.tl=()=>{n.Tt.Xc()},i.t.Br=r=>{t.room._onHandicapChange?.(r)},i.t.ke=()=>{t.room._onTimeIsUp?.()},i.t.Ne=()=>{t.room._onPositionsReset?.()},i.t.zh=function(r){n.Hf!=r&&(n.Hf=r,r=Tp.create(r),t.wt.W(r)!=!1&&i.j(r))},i.t.Ur=function(r,e){t.room._onPlayerChat?.(r.id,e)},i.t.Lr=function(r,e,s,u){t.room._onAnnouncement?.(r,e,s,u)},i.t.sr=function(r){t.room._onGameStop?.(r?.id)},i.t.$r=function(r,e){t.room._onStadiumChange?.(e,r?.id)},i.t.br=function(r){t.room._onPlayerSyncChange?.(r?.id,r?.Ei)},i.t.xr=function(r,e){t.room._onPlayerAdminChange?.(e?.id,e?.wi,r?.id)},i.t.Oe=function(r,e,s,u){t.room._onKickRateLimitChange?.(e,s,u,r?.id)},i.t.Jr=function(r,e,s,u){r.H&&t.room._onPlayerDiscDestroyed?.(r),n.$c?.(r.id),e!=null&&n.Zc?.(r,e,u!=null?u.name:null,s),t.room._onPlayerLeave?.(r,e,s,u?.id),t.wt.customClientIds.delete(r.id)},i.t.Fr=function(r,e){t.room._onPlayerChatIndicatorChange?.(r?.id,!e)},this.Tt.Bs=function(r){t.wt.W(r)!=!1&&i.j(r)},this.sc=function(r){r=cf.create(1,r),t.wt.W(r)!=!1&&i.j(r)},this.uc=function(r){r=cf.create(0,r),t.wt.W(r)!=!1&&i.j(r)},this.ec=function(r){r=kp.create(r),t.wt.W(r)!=!1&&i.j(r)},this.Dl=function(){var r=Cp.create();t.wt.W(r)!=!1&&i.j(r)},this.al=function(){var r=gp.create();t.wt.W(r)!=!1&&i.j(r)},this.tc=function(){n.zc()},this.cf=function(r,e){if(e){var s=Bi.create(r,e);t.wt.W(s)!=!1&&i.j(s)}},this.of=this.xc.bind(this),this.ic=function(){var r=Sp.create();t.wt.W(r)!=!1&&i.j(r)},this.rc=function(){pr.bc(t,i)},this.nc=function(r){r=Np.create(r),t.wt.W(r)!=!1&&i.j(r)},this.lf=function(r){if(r)return n.Wn!=null?!1:(n.Dc(),t.room._onRoomRecordingChange?.(!0),!0);if(n.Wn==null)return null;var e=n.Wn.stop();return n.Wn=null,t.room._onRoomRecordingChange?.(e),e},this.Kf=this.ac.bind(this),this.Zu=vf(this.Kf),this.tv=wp(function(){i.ct()},50)}}pr.bc=function(t,i){for(var n=i.t.d,r=[],e=0,s=0,u=0;u<n.length;){var h=n[u];++u,h.R==zt.spec&&r.push(h.id),h.R==zt.red?++e:h.R==zt.blue&&++s}u=r.length;var l;u!=0&&(n=function(){return r.splice(Math.random()*r.length|0,1)[0]},u==1?(l=Bi.create(n(),Math.random()<.5?zt.red:zt.blue),t.wt.W(l)!=!1&&i.j(l)):s==e?(l=Bi.create(n(),zt.red),t.wt.W(l)!=!1&&i.j(l),l=Bi.create(n(),zt.blue),t.wt.W(l)!=!1&&i.j(l)):(e=s>e?zt.red:zt.blue,l=Bi.create(n(),e),t.wt.W(l)!=!1&&i.j(l)))};pr.prototype={Dc:function(){this.Wn=new Op(this.r,3)},rt:function(){qp(this.Zu),yp(this.tv),pp(this.Yc)},xc:function(t){for(var i=[],n=0,r=this.r.t.d;n<r.length;){var e=r[n];++n,e.R==t&&i.push(Bi.create(e.id,zt.spec))}for(t=0;t<i.length;){var s=i[t++];this.haxball.wt.W(s)!=!1&&this.r.j(s)}},ac:function(){this.Zu=vf(this.Kf),this.Tt.ct(),this.r.ct(),this.haxball.wt.renderer?.render?.()},bl:function(t){var i;t!=this.Uf&&(i=pf.create(t?0:1),this.haxball.wt.W(i)!=!1&&(this.r.j(i),this.Uf=t))},zc:function(){if(this.r.t.s!=null){var t=mp.create(this.r.t.s.xt!=120);this.haxball.wt.W(t)!=!1&&this.r.j(t)}}};yf.NY=pr});var Nf=O((u2,kf)=>{var{stunServers:Rp,httpUrl:Pp,Ls:s2,setInterval:Ap,clearInterval:Mp,console:qf}=P(),Gi=Y(),{Ht:Vi,q:Di}=$(),{parseGeo:Cf}=Xi(),{w:dp}=j(),{addRoomToList:Ep,removeRoomFromList:jp}=Ci(),_p=Se(),{roomLink:gf,yf:Ip,qf:Bp}=Te(),{RoomDataDetails:Gp}=ye(),Vp=Jn(),{le:Lp,ce:Fp,ve:mf,vu:Up}=hi(),Hp=Ri(),Kp=of(),Jp=de();function Wp(t,i){var n=Bp(i);n.onHostError=t.onError;var r=Ip(n),e=function(){qf.log("internal event: LeaveRoom"),jp(n.room),e=null,s=null,n.plugins&&n.plugins.forEach(f=>{f.finalize?.(),f.room=null}),n.renderer&&(n.renderer.finalize?.(),n.renderer.room=null),n.config.finalize?.(),n.config.room=null,n.libraries.forEach(f=>{f.finalize?.(),f.room=null}),e=null,r.n=null,r.roomState=null,r=null,n.room=null,n.ju?.()},s=function(){qf.log("internal event: CreateRoomSucceeded"),s=null,n.room=new _p(n.Mu,r,n.libraries,n.config,n.plugins),Ep(n.room),n.room.client=n,n.room.Mn=n.Mn,n.room.hostPing=0,n.du?.(n.room);var f=n.room._onPlayerObjectCreated;f&&r.n?.r.t.d.forEach(f)},u=n.Bi,h=null,l=new Hp;l.name=t.name;var o=new Kp(n,{Xu:Rp,backendUrl:Pp+"api/host",t:l,Et:n.Et,Yu:t.token});o.Me=Cf(t.geo,u.geo,!1),o.iv=!!t.noPlayer;function v(){if(o.ks){var f=new Gp;f.Et=n.Et,f.name=l.name,f.d=o.de!=null?o.de:l.d.length,f.Nu=o.wr+1,f.Ot=o.Me.flag,f.fi=o.yr==null?o.fi!=null:o.yr,f.qs=o.Me.lat,f.Cs=o.Me.lon;var p=dp.L(16);f.$(p),f=p.We(),o.Lu(f)}}var y;o.iv||(y=new Vp,y.name=u.player_name,y.wi=!0,y.Ot=o.Me.flag,y.mt=u.avatar,y.sn=!0,l.d.push(y)),o.qr=!!t.unlimitedPlayerCount,o.ks=!!t.showInRoomList,o.de=t.playerCount,o.yr=t.fakePassword==null?null:!!t.fakePassword,o.wr=(t.maxPlayerCount|0)-1,o.fi=t.password==""?null:t.password,v();var C=new Jp(n,o),k=Ap(function(){var f=Up.create(o);r.W(f)!=!1&&o.j(f)},3e3);return o.Ff=function(f){l.getPlayer(f)!=null&&(f=mf.create(f,Vi(Gi.BadActorError).toString(),!1),r.W(f)!=!1&&o.j(f))},o.Kc=function(f,p,q,w){var g=p.li();if(25<g.length)throw new Di(Vi(Gi.PlayerNameTooLongError,q,w,g));var N=p.li();if(3<N.length)throw new Di(Vi(Gi.PlayerCountryTooLongError,q,w,g,N));var S=p.ei();if(S!=null&&2<S.length)throw new Di(Vi(Gi.PlayerAvatarTooLongError,q,w,g,N,S));var R=n.room._modifyPlayerData;if(R){var E=R(f,g,N,S,q,w);if(!E)throw new Di(Vi(Gi.PlayerJoinBlockedByMPDError,q,w,g,N,S));[g,N,S]=E}if(g=Fp.create(f,g,N,S,q,w),r.W(g)==!1)throw new Di(Vi(Gi.PlayerJoinBlockedByORError,g));o.j(g),v(),r.Cr.then(()=>{r.n?.r.gr(Lp.create(0,f,0),f,!0)})},o.Lc=function(f){l.getPlayer(f)!=null&&(f=mf.create(f,null,!1),r.W(f)!=!1&&o.j(f))},o.ds=function(f){h=f,C.pr=gf(f,o.fi!=null),n.room._onRoomLink?.(C.pr)},C.Zc=function(f,p,q,w){o.Ic(f,p,q,w)},C.$c=function(){v()},C.Au=function(){o.rt(),C.rt(),Mp(k),e()},n.mr=C.Au,C.Jl=function(f){if(f){var p={};if(f.hasOwnProperty("name")&&(p.name=l.name=f.name||""),f.hasOwnProperty("password")&&(p.password=o.fi=f.password),f.hasOwnProperty("fakePassword")&&(p.fakePassword=o.yr=f.fakePassword),f.hasOwnProperty("geo")){p.geo=f.geo;var q=Cf(f.geo,u.geo,!1);y&&(y.Ot=q.flag)}f.hasOwnProperty("unlimitedPlayerCount")&&(p.unlimitedPlayerCount=o.qr=!!f.unlimitedPlayerCount),f.hasOwnProperty("showInRoomList")&&(p.showInRoomList=o.ks=!!f.showInRoomList),f.hasOwnProperty("playerCount")&&(p.playerCount=o.de=f.playerCount),f.hasOwnProperty("maxPlayerCount")&&(p.maxPlayerCount=o.wr=f.maxPlayerCount==null?null:f.maxPlayerCount-1),v(),f.hasOwnProperty("password")&&h!=null&&(C.pr=gf(h,o.fi!=null)),n.room._onRoomPropertiesChange?.(p)}},C.zl=function(f){o.qr=f},C.xl=function(f){o.yr=f,v()},r.isHost=!0,r.n=C,r.roomState=l,s(),n}kf.NY=Wp});var jf=O((h2,Ef)=>{var{proxy:ai,backend:Sf,setTimeout:Qp,clearTimeout:Tf,WebSocket:Of,performance:tn,pako:je,RTCIceCandidate:Rf,RTCSessionDescription:Xp}=P(),nn=Y(),{Event:Ee}=B(),{Ht:rn,At:en}=$(),{kf:Yp,Nf:$p,Sf:Zp}=Pe(),zp=Ae(),Af=Ti(),{F:wr,w:qi,Ao:Pf,extend:xp}=j(),bp=dr();function Mf(t,i,n,r,e,s,u,h){this.zu=!1,this.xu=!1,this.qi=u,this.yn=h,!ai&&h&&($p(),h=null);var l=this;this.et=new zp(0,i,r),this.et.En=function(){l.Le(en.no())},this.et.Yn=function(){l.Yn!=null&&l.Yn(new Zp(l.et)),l.et=null,l.Jf()},this.et.Gu=function(o){l.Wf=o,ai?.WebSocketUrl&&(t=ai.WebSocketUrl),!t.endsWith("client")&&(!t.endsWith("/")&&(t+="/"),t+="client");var v=h?[h]:[];if(l.qi||ai?.WebSocketChangeOriginAllowed){var y={};l.qi&&(y.agent=l.qi),ai.WebSocketChangeOriginAllowed&&(y.headers={Origin:(Sf.secure?"https":"http")+"://"+Sf.hostname}),l.X=new Of(t+"?id="+n+(s==null?"":"&token="+s),v,y)}else l.X=new Of(t+"?id="+n+(s==null?"":"&token="+s),v);l.X.binaryType="arraybuffer",l.X.onclose=function(C){l.zu||l.Le(en.eo(C.code))},l.X.onerror=function(){l.zu||l.Le(en.Error())},l.X.onmessage=l.Uu.bind(l),l.X.onopen=function(){l.Qf!=null&&l.Qf(),l.et.Bu(),l.Wu(l.Wf,l.et.Os,e),l.et.Rs=l.Qu.bind(l),l.et.Iu.then(function(){l.wn(0,null)})}},this.et.Cc()}Mf.prototype={nv:function(){this.Le(en.ro())},Jf:function(){try{this.X!=null&&(this.X.onclose=null,this.X.onmessage=null,this.X.onerror=null,this.X.onopen=null,this.X.close(),this.X=null)}catch{}this.et!=null&&(this.et.rt(),this.et=null)},Le:function(t){this.En!=null&&this.En(t),this.Jf()},Uu:function(t){t=new wr(new DataView(t.data));var i=t.T(),n,r,e;switch(0<t.v.byteLength-t.l&&(t=new wr(new DataView(je.inflateRaw(t.Lt()).buffer),!1)),i){case 1:for(i=t.li(),n=t.Ar(),r=[],e=0;e<n.length;)r.push(new Rf(n[e++]));this.Ku(i,r,t);break;case 4:this.Ju(new Rf(t.Ar()))}},Ku:function(t,i){var n=this;this.et.Bu(this.xu?1e4:4e3),this.zu=!0,this.Xf!=null&&this.Xf(),this.et.Rt.setRemoteDescription(new Xp({sdp:t,type:"answer"}),function(){for(var r=0;r<i.length;)n.et.Rt.addIceCandidate(i[r++])},function(){n.Le(en.Error())})},Ju:function(t){this.et.Rt.addIceCandidate(t)},wn:function(t,i){if(this.X!=null){var n=qi.L(32,!1);n.o(t),i!=null&&n.Yt(je.deflateRaw(i._t())),this.X.send(n.jn())}},Wu:function(t,i,n){var r=qi.L(32,!1);r.o(this.xu?1:0),r.ci(t.sdp),r.Xe(i),n!=null&&r.Yt(n._t()),this.wn(1,r)},Qu:function(t){var i=qi.L(32,!1);i.Xe(t),this.wn(4,i)}};function df(t,i,n){this.haxball=t,this.bu=[],this.Du=[],this.Gs=new bp,this.rv=1,this.Yf=0,this.Zn=0,this.au=new Pf(50),this.Vs=new Pf(50),this.ev=1e3,this.th=rn(nn.Empty);var r=this;Af.call(this,n.t),this.ih=n.sv,this.$f=n.uv;var e=null;e=function(s){r.Fe(0);var u=qi.L();u.Ft(n.Et),u.si(n.fi),r.Gi=new Mf(n.backendUrl,n.Xu,i,Yp,u,n.Yu,r.haxball.qi,r.haxball.yn),r.Gi.xu=s,r.Gi.Yn=function(l){r.Gi=null,r.et=l,l.Ts=function(o){o=new wr(new DataView(o)),r.hv(o)},l._e=function(){r.Zn!=3&&r.Ue?.(rn(nn.ConnectionClosed)),r.rt()},l=Qp(function(){r.Ue?.(rn(nn.GameStateTimeout)),r.rt()},1e4),r.kr=l,r.Fe(2,r.et.Rt.remoteDescription.sdp)},r.Gi.Qf=function(){r.Fe(1,r.Gi.Wf.sdp)};var h=!1;r.Gi.Xf=function(){return h=!0},r.Gi.En=function(l){!s&&r.Zn==1&&h?(r.fv?.(),e(!0)):(r.Ue?.(l[0]),r.rt(l[1]||l[0]))}},e(n.Zf!=null&&n.Zf)}df.prototype=xp(Af.prototype,{rt:function(t){this.Gi!=null&&(this.Gi.En=null,this.Gi.nv(),this.Gi=null),Tf(this.kr),this.et!=null&&(this.et._e=null,this.et.rt(),this.et=null),this.th=t??rn(nn.ConnectionClosed),this.Fe(4),this.haxball._onRoomLeave?.(this.th)},Fe:function(t,i){this.Zn!=t&&(this.Zn=t,this.haxball._onConnectionStateChange?.(t,i),this.zn!=null&&this.zn(t))},Qn:function(){return this.Zn==3},ct:function(){this.Qn()&&tn.now()-this.Yf>this.ev&&this.Hu(),this.xn=tn.now()*this.rn+this.au.$e(.5)-this.k,this.zf()},en:function(t=0){return this.Qn()?(0>this.mi&&(this.mi=0),this.Sh((tn.now()+t)*this.rn+this.au.$e(.5)-this.k+this.mi,this.Gs)):this.t},zf:function(){0>this.xn&&(this.xn=0),this.xn>this.ae&&(this.xn=this.ae)},hv:function(t){switch(t.T()){case 0:this.ov(t);break;case 1:this.lv(t);break;case 2:this.cv(t);break;case 3:this.vv(t);break;case 4:this.pv(t);break;case 5:this.wv(t);break;case 6:this.yv(t)}},ov:function(t){var i=this;t=t.Lt(t.Kt());var n=Promise.resolve(null);this.$f!=null&&(n=this.$f.Ul(t)),n.catch(function(){return null}).then(function(r){i.qv(r)})},lv:function(t){for(t=je.inflateRaw(t.Lt()),t=new wr(new DataView(t.buffer,t.byteOffset,t.byteLength)),this.nn=t.At(),this.k=t.ut(),this.Gn=t.ut(),this.ti=t.Kt(),this.xn=10,this.t.a(t);0<t.v.byteLength-t.l;)this.Ir(this.xf(t));Tf(this.kr),this.Fe(3)},qv:function(t){var i=qi.L();i.o(0),t!=null?(i.Ut(t.byteLength),i.Yt(t)):i.Ut(0),i.Ut(this.ih.byteLength),i.Qe(this.ih),this.oi(i),this.ih=null},oi:function(t,i){i==null&&(i=0),this.et.oi(i,t)},xf:function(t){var i=t.ut(),n=t.Kt(),r=t.At(),e=t.ut();return t=Ee.ai(t),t.i=r,t.Bn=e,t.St=i,t.V=n,t},cv:function(t){t=this.xf(t),this.Ir(t),t.i==this.nn&&this.Gs.Zo(t.Bn),this.bf()},yv:function(t){t=Ee.ai(t),t.i=0,t.Bn=0,t.apply(this.t),this.vi?.(t)},vv:function(t){var i=t.ut();t=t.ut(),this.Du.push({frame:i,Cv:t}),this.bf()},bf:function(){if(this.Zn==3){for(var t=0,i=this.Du,n,r;t<i.length;)n=i[t],++t,n.frame<=this.k||n.Cv==this.Gn+this.ti+this.tn.zo(n.frame)&&this.gv(n.frame-this.k);for(t=0,i=this.Du,n=0,r=i.length;n<r;){var e=i[n++];e.frame>this.k&&(i[t]=e,++t)}for(;i.length>t;)i.pop();this.Gs.Yo(this.k)}},wv:function(t){var i=t.T()!=0,n=t.li(),r="";t.v.byteLength>t.l&&(r=t.li()),this.rt(rn(nn.KickedNow,n,i,r))},pv:function(t){var i=t.m();t=t.m();var n=tn.now()-t;this.au.add(i-t*this.rn),this.Vs.add(n);for(var r=i=0,e=this.bu;r<e.length;){var s=e[r];if(++r,s>t)break;this.mv?.(s<t?-1:n),++i}this.bu.splice(0,i)},Hu:function(){var t=tn.now();this.Yf=t,this.bu.push(t);var i=this.Vs.$e(.5)|0,n=this.haxball.room?._modifyClientPing;n&&(i=n(i));var r=qi.L();r.o(2),r.g(t),r.Ut(i),this.oi(r,2)},gv:function(t){this.Nh(t),this.xn-=t,this.zf()},j:function(t){if(this.Zn==3){var i=this.rv++,n=0;this.mi<0&&(this.mi=0),t.an.lt&&(n=this.k+(this.xn|0)+this.mi);var r=this.haxball.room?._modifyFrameNo;r&&(n=r(n));var e=qi.L();e.o(1),e.kt(n),e.kt(i),Ee.Nn(t,e),this.oi(e),t.an.vt&&(t.Bn=i,t.i=this.nn,t.St=n,this.Gs.as(t))}}});Ef.NY=df});var Vf=O((f2,Gf)=>{var{stunServers:Dp,backendUrl:ap,console:li}=P(),_f=Y(),{Ht:If,q:Bf}=$(),{w:tw}=j(),iw=Se(),{addRoomToList:nw,removeRoomFromList:_e}=Ci(),{roomLink:rw,yf:ew,qf:sw}=Te(),uw=Ri(),hw=jf(),fw=de();function ow(t,i){var n=t.id,r=t.password,e=t.token,s=t.authObj;if(!n||!s)throw If(_f.JoinRoomNullIdAuthError);var u=sw(i);r==""&&(r=null);var h=ew(u),l=function(q){li.log("internal event: LeaveRoom",q.toString()),_e(u.room),u._onConnectionStateChange=null,l=null,u.plugins&&u.plugins.forEach(w=>{w.finalize?.(),w.room=null}),u.renderer&&(u.renderer.finalize?.(),u.renderer.room=null),u.config.finalize?.(),u.config.room=null,u.libraries.forEach(w=>{w.finalize?.(),w.room=null}),u._onRoomLeave=null,h.n=null,h.roomState=null,h=null,u.room=null,u.ju?.(q)},o=function(){li.log("internal event: JoinRoomSucceeded"),u._onConnectionStateChange=null,o=null,u.room=new iw(u.Mu,h,u.libraries,u.config,u.plugins),nw(u.room),u.room.client=u,u.room.Mn=u.Mn,u.du?.(u.room);var q=u.room?._onPlayerObjectCreated;q&&h.n?.r.t.d.forEach(q);var w=u.room?._onPlayerDiscCreated;w&&h.n?.r.t.d.filter(g=>g.H!=null).forEach(w)};u._onConnectionStateChange=function(q,w){li.log("internal event: ConnectionStateChange"),u.pf?.(q,w),q==4&&(u._onConnectionStateChange=null,o=null,u.room=null)},u._onRoomLeave=l;try{var v=u.Bi.crappy_router,y=new uw,C=tw.L();C.ci(u.Bi.player_name),C.ci(u.Bi.geo.flag),C.si(u.Bi.avatar);var k=new hw(u,n,{Xu:Dp,backendUrl:ap,t:y,Et:u.Et,sv:C.We(),fi:r,Zf:v,Yu:e,uv:s});li.log("Connecting to master..."),u.mr=function(){k.zn=null,k.Ue=null,k.rt()};var f=function(q){_e(u.room),u.mr=null,u.Eu?.(q)},p=function(){u.mr=null;var q=new fw(u,k);q.pr=rw(n,!1),k.mv=function(w){u.room._onPingChange?.(w,k.Vs.$e(.5),k.Vs.max())},q.Au=function(){k.zn=null,k.rt(),q.rt()},k.zn=function(){k.zn=null,q.rt(),q.Wn?.stop(),f(k.th)},h.isHost=!1,h.n=q,h.roomState=y,o?.()};k.Ue=function(q){k.Ue=null,k.zn=null,q.code==1&&q.params[0]==4004&&u.Ss?.(),f(q)},k.zn=function(q){switch(q){case 1:li.log("Connecting to peer...");break;case 2:li.log("Awaiting state...");break;case 3:p()}},k.fv=function(){li.log("Trying reverse connection..."),u.wf?.()}}catch(q){li.log(q instanceof Bf?q.zt:q),_e(u.room),u.mr=null,u.Eu?.(If(_f.Unknown,q instanceof Bf?q.zt:q))}return u}Gf.NY=ow});var Kf=O((l2,Hf)=>{var{performance:lw,pako:cw,E:o2}=P(),vw=Ri(),Ff=Ti(),{Event:Ie}=B(),{F:Lf,extend:pw}=j(),{Sandbox:ww}=pe();function Uf(t){Ff.call(this,t),this.A=1,this.vr=lw.now(),this.frozen=!1,this.kv=[],this.newEvents=[],this.maxFrameNo=0}Uf.prototype=pw(Ff.prototype,{j:function(){},en:function(t=0){return this.t},ct:function(){var t=this.maxFrameNo;if(!(this.k>=t))do{var i=0,n=this.newEvents[0];if(!n||this.k>n.St)break;for(;n?.St==this.k;)n.apply(this.t),this.kv.push(n),n=this.newEvents[++i];this.t.ct(1),this.k++,this.newEvents.splice(0,i)}while(this.k<t)},setSpeed:function(t){if(!(t<0)){if(t==0){this.frozen=!0;return}this.k=this.k*t/this.A|0,this.A=t,this.frozen=!1}},runSteps:function(t){this.frozen&&this.t.ct(t)}});function yw(t,i={},n){var r=new vw,e=new Uf(r),s=new ww(e,i,n),u;function h(o){var v=o.ut(),y=o.Kt(),C=o.At(),k=o.ut();return o=Ie.ai(o),o.i=C,o.Bn=k,o.St=v,o.V=y,o}function l(o){o.St==e.k&&o.V<=e.ti?(o.V=e.ti++,e.receiveEvent(o)):e.tn.as(o)}for(t=new Lf(new DataView(t.buffer,t.byteOffset,t.byteLength)),e.k=t.ut(),e.Gn=t.ut(),e.ti=t.Kt(),r.a(t);t.l<t.v.byteLength;)l(h(t));return t=null,u={state:r,extrapolate:o=>e.en(o),readStream:o=>{if(e.maxFrameNo=o.ut(),o.v.byteLength!=o.v.byteOffset+o.l){var v=cw.inflateRaw(new Uint8Array(o.v.buffer,o.l)),y,C,k,f,p;for(o=new Lf(new DataView(v.buffer,v.byteOffset,v.byteLength));o.l<v.byteLength;)for(f=e.maxFrameNo-o.At(),y=o.At(),p=0;p<y;p++)C=o.At(),k=Ie.ai(o,!0),k.i=C,k.St=f,e.newEvents.push(k)}},readImmediateStream:o=>{var v=e.maxFrameNo=o.ut(),y=o.At(),C=Ie.ai(o,!0);C.i=y,C.St=v,e.newEvents.push(C)},takeSnapshot:function(){return r.copy()},useSnapshot:function(o){var v=o.copy();s.sf(v),r=v,u.state=v},setSimulationSpeed:function(o){e.setSpeed(o)},runSteps:function(o){e.runSteps(o)},destroy:s.rt},Object.defineProperty(u,"gameState",{get(){return u.state.s}}),Object.defineProperty(u,"currentPlayerId",{get(){return 0}}),Object.defineProperty(u,"currentFrameNo",{get(){return e.k}}),Object.defineProperty(u,"maxFrameNo",{get(){return e.maxFrameNo}}),u}Hf.NY=yw});var Wf=O((c2,Jf)=>{var qw=gi(),{noVariableValueChangeEvent:Cw,E:gw}=P();function Li(t,i=null){this.name=t,this.defineMetadata(i)}Li.prototype.defineMetadata=function(t){};Li.prototype.defineVariable=function(t){var{name:i,value:n}=t,r=this;Cw?r[i]=n:Object.defineProperty(r,i,{get:()=>n,set:e=>{var s=n;e!=s&&(n=e,r.room?._onVariableValueChange?.(r,i,s,n))}})};Li.prototype.setVariableGUIProps=function(t,...i){};Li.addonType=qw.Library;gw(Li,["name"],[]);Jf.NY=Li});var Xf=O((v2,Qf)=>{var mw=gi(),{noVariableValueChangeEvent:kw}=P();function sn(t=null){this.defineMetadata(t)}sn.prototype.defineMetadata=function(t){};sn.prototype.defineVariable=function(t){var{name:i,value:n}=t,r=this;kw?r[i]=n:Object.defineProperty(r,i,{get:()=>n,set:e=>{var s=n;e!=s&&(n=e,r.room?._onVariableValueChange?.(r,i,s,n))}})};sn.prototype.setVariableGUIProps=function(t,...i){};sn.addonType=mw.RoomConfig;Qf.NY=sn});var $f=O((p2,Yf)=>{var Nw=mr(),Sw=gi(),{noVariableValueChangeEvent:Tw,E:Ow}=P();function Fi(t,i=!1,n=null){this.name=t,this.defineMetadata(n),this.defineVariable({name:"active",description:"Whether this plugin is active or not.",type:Nw.Boolean,value:i})}Fi.prototype.defineMetadata=function(t){};Fi.prototype.defineVariable=function(t){var{name:i,value:n}=t,r=this;Tw?r[i]=n:Object.defineProperty(r,i,{get:()=>n,set:e=>{var s=n;e!=s&&(n=e,r.room?._onVariableValueChange?.(r,i,s,n))}})};Fi.prototype.setVariableGUIProps=function(t,...i){};Fi.addonType=Sw.Plugin;Ow(Fi,["name"],[]);Yf.NY=Fi});var zf=O((w2,Zf)=>{var Rw=gi(),{noVariableValueChangeEvent:Pw}=P();function un(t=null){this.defineMetadata(t)}un.prototype.defineMetadata=function(t){};un.prototype.defineVariable=function(t){var{name:i,value:n}=t,r=this;Pw?r[i]=n:Object.defineProperty(r,i,{get:()=>n,set:e=>{var s=n;e!=s&&(n=e,r.room?._onVariableValueChange?.(r,i,s,n))}})};un.prototype.setVariableGUIProps=function(t,...i){};un.addonType=Rw.Renderer;Zf.NY=un});var Ew=O((y2,bf)=>{var Aw=Ue(),Mw=Ye(),dw=Ci(),xf=$();bf.NY=(t,i)=>{var{ErrorCodes:n,...r}=rs();Aw(t,i);var{D:e,F:s,w:u}=j(),{J:h,K:l}=ci(),{Point:o}=mi(),v=Mr(),{ef:y,...C}=ve(),{createSandbox:k}=pe();return{version:"1.5.0",...r,Callback:{add:v.Jo,remove:v.Wo},Utils:Xi(),EventFactory:Mh(),Room:{create:Nf(),join:Vf(),sandbox:k,streamWatcher:Kf()},Replay:C,Query:Mw,Library:Wf(),RoomConfig:Xf(),Plugin:$f(),Renderer:zf(),Language:dw.Language,Errors:{HBError:xf.HBError,ErrorCodes:n},Impl:{Core:{Point:o,TeamColors:zn(),Team:ot()},Stream:{F:s,w:u},Utils:{D:e,J:h,K:l,M:nr(),q:xf.q}}}}});return Ew();})();if (typeof exports !== 'undefined') { if (typeof module !== 'undefined' && module.exports) exports = module.exports = Ef; exports.abcHaxballAPI = Ef; } else if (typeof root !== 'undefined') root['abcHaxballAPI'] = Ef; else window['abcHaxballAPI'] = Ef;